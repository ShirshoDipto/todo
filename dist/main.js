(()=>{"use strict";class t{constructor(t,e,i,l=0){this.title=t,this.todos=e,this.listNumber=i,this.isDefault=l}get getIsDefault(){return this.isDefault}set setIsDefault(t){this.isDefault=t}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,l,s,n,o){this.title=t,this.description=e,this.dueDate=i,this.priority=l,this.listNumber=s,this.completed=n,this.todoNumber=o}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function l(t,e,l){i.push(t);const s=document.createElement("div");s.classList.add("a-list"),s.setAttribute("list-number",`${t.getListNumber}`),e.insertBefore(s,l);const n=document.createElement("div");n.classList.add("left"),s.appendChild(n);const o=document.createElement("div");o.classList.add("right"),s.appendChild(o);const r=document.createElement("img");r.classList.add("icon"),1===t.getIsDefault?r.setAttribute("src","icons/weather-sunny.png"):r.setAttribute("src","icons/plus.png"),n.appendChild(r);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,n.appendChild(d);const u=document.createElement("img");u.classList.add("edit"),u.setAttribute("src","icons/plus.png"),o.appendChild(u);const c=document.createElement("img");c.classList.add("icon"),c.setAttribute("src","icons/plus.png"),o.appendChild(c);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),o.appendChild(a);const m=document.createElement("img");return m.classList.add("delete"),m.setAttribute("src","icons/plus.png"),o.appendChild(m),s}function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function n(t){let e=0;for(let l=0;l<i.length;l++)if(i[l].setListNumber=l,0!==i[l].getTodos.length){let s=0;const n=i[l].getListNumber;for(let o of i[l].getTodos){o.setListNumber=l,o.setTodoNumber=s;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${n}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${s}`),s++,e++}}}let o=[];function r(t,e){o.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const l=document.createElement("div");l.classList.add("a-list"),i.appendChild(l);const s=document.createElement("div");s.classList.add("description"),s.textContent=e.getDescription,i.appendChild(s);const n=document.createElement("div");n.classList.add("collapse"),i.appendChild(n);const r=document.createElement("div");r.classList.add("left"),l.appendChild(r);const d=document.createElement("div");d.classList.add("right"),l.appendChild(d);const u=document.createElement("img");u.setAttribute("src","icons/plus.png"),u.setAttribute("alt","collapse icon"),n.appendChild(u);const c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("id","todo-checkbox"),c.setAttribute("name","todo-checkbox"),1===e.getIsCompleted&&(c.checked=!0),r.appendChild(c);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,r.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),m.classList.add("edit"),d.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),g.classList.add("icon"),d.appendChild(g);const h=document.createElement("img");h.setAttribute("src","icons/plus.png"),h.classList.add("icon"),d.appendChild(h);const b=document.createElement("img");return b.setAttribute("src","icons/plus.png"),b.classList.add("delete"),d.appendChild(b),i}function d(t,e,i){null===e&&(t.firstElementChild.textContent=i),t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function u(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function c(t,e){let i=0;for(let l of t){let t=l.getTitle,s=l.getDescription,n=l.dueDate,o=l.getPriority,r=l.getListNumber,d=l.getIsCompleted,u=l.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${s},${n},${o},${r},${d},${u}`),i++}}function a(t,e){localStorage.clear();let i=0;localStorage.setItem("activeListNumber",e);for(let e of t){let t=e.getTitle,l=e.getListNumber;1===e.getIsDefault?localStorage.setItem(`list_${i}`,`${t},${l},1`):localStorage.setItem(`list_${i}`,`${t},${l}`),c(e.getTodos,i),i++}}let m="0";function g(t){var e;t.preventDefault(),console.log(m),i[parseInt(m)].setTitle=t.target.firstElementChild.value,t.target.previousElementSibling.textContent=t.target.firstElementChild.value,(e=t.target.parentNode.parentNode).firstElementChild.removeChild(e.firstElementChild.lastElementChild),e.firstElementChild.lastElementChild.removeAttribute("id"),a(i,m)}function h(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");f.removeChild(t);const l=Array.from(document.querySelectorAll(".a-list"));let s=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let l of e)l.getAttribute("list-number")===i&&t.removeChild(l)}($,s,e),s=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,l){i.splice(parseInt(e),1);let s=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${s}`),s++;n(l)}(l,e,s),e===m&&function(t,e){0===i.length?d(q,null,"Add a List"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),d(q,e,i[0].getTitle),u(t,"0"),m="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),d(q,e,i[parseInt(e)-1].getTitle),u(t,""+(parseInt(e)-1)),m=""+(parseInt(e)-1))}(s,e),m=e}a(i,m)}(this);else if("edit"===t.target.classList.value)(function(t){const e=t.firstElementChild.lastElementChild;e.setAttribute("id","hide");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("maxlength","30"),i.required=!0,i.value=e.textContent;const l=document.createElement("form");return l.setAttribute("action","#"),t.firstElementChild.appendChild(l),l.appendChild(i),console.log(t),l}(this)).onsubmit=g;else{s(f),this.setAttribute("id","active-list");let t=this.getAttribute("list-number");d(q,t,this.firstElementChild.lastElementChild.textContent),u(Array.from(document.querySelectorAll(".a-todo")),t),m=t,localStorage.removeItem("activeListNumber"),localStorage.setItem("activeListNumber",m)}console.log(i)}function b(t){!0===t.checked?t.checked=!1:t.checked=!0}function p(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.table(i),$.removeChild(this),n(Array.from(document.querySelectorAll(".all-todo .a-todo")))}else if("edit"===t.target.classList.value){const t=document.querySelector(".edit-todo-modal");t.removeAttribute("id");const e=function(t,e,i){let l=t.getAttribute("list-number"),s=t.getAttribute("todo-number"),n=i[parseInt(l)].getTodos[parseInt(s)];n.setTitle="hi there";let o=e.firstElementChild.nextElementSibling;o.firstElementChild.value=n.getTitle,o.firstElementChild.nextElementSibling.lastElementChild.value=n.getDueDate;const r=n.getPriority;let d=o.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild;return function(t,e){let i=e.firstElementChild;for(;;){if(i.getAttribute("value")===t){i.selected=!0;break}i=i.nextElementSibling}}(r,d),d.parentNode.nextElementSibling.value=n.getDescription,n}(this,t,i),l=t.lastElementChild;l.onsubmit=t=>{!function(t,e){e.preventDefault(),t.setTitle=e.target.firstElementChild.value,t.setDueDate=e.target.firstElementChild.nextElementSibling.lastElementChild.value,t.setPriority=e.target.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild.value,t.setDescription=e.target.lastElementChild.previousElementSibling.value,e.target.parentNode.setAttribute("id","hide"),function(t,e){e.firstElementChild.firstElementChild.lastElementChild.textContent=`${t.getTitle} (Due: ${t.getDueDate})`,e.firstElementChild.nextElementSibling.textContent=`${t.getDescription}`}(t,document.querySelector(`.all-todo div[todo-number="${t.getTodoNumber}"]`)),a(i,m)}(e,t)},l.onreset=()=>{t.setAttribute("id","hide")}}else{"checkbox"===t.target.getAttribute("type")&&b(t.target);const e=this.getAttribute("list-number"),l=this.getAttribute("todo-number");i[parseInt(e)].getTodos[parseInt(l)].changeCompleteStatus(),b(this.firstElementChild.firstElementChild.firstElementChild),console.log(this.firstElementChild.firstElementChild.firstElementChild)}a(i,m)}const f=document.querySelector(".all-list"),A=document.querySelector("#list-name"),C=document.querySelector(".list-form"),E=document.querySelector(".add-new-list"),v=document.querySelector(".new-list-modal"),S=document.querySelector(".add-todo"),y=document.querySelector(".new-todo-modal"),L=document.querySelector(".todo-form"),N=document.querySelector("#todo-name"),T=document.querySelector("#due-date"),D=document.querySelector("#priority"),I=document.querySelector("#description"),$=document.querySelector(".all-todo"),q=document.querySelector(".todo-header");if(localStorage.getItem("activeListNumber")){let s=function(){let i=[],l=[];for(let s in localStorage)if(s.includes("list")&&!s.includes("todo")){const e=localStorage.getItem(s).split(","),l=e[0],n=parseInt(e[1]);if(3===e.length){const e=new t(l,[],n,1);i.push(e)}else{const e=new t(l,[],n);i.push(e)}}else if(s.includes("todo")){const t=localStorage.getItem(s).split(","),i=t[0],n=t[1],o=t[2],r=t[3],d=parseInt(t[4]),u=parseInt(t[5]),c=parseInt(t[6]),a=new e(i,n,o,r,d,u,c);l.push(a)}let s=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);return function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(s,l),s}();m=localStorage.getItem("activeListNumber"),function(t){if(0===t.length)return;for(let e of t){l(e,f,v);for(let t of e.getTodos)r($,t)}const e=document.querySelector(`.all-list div[list-number="${m}"]`);null!==e&&e.setAttribute("id","active-list");const s=Array.from(document.querySelectorAll(".a-todo"));d(q,m,i[parseInt(m)].getTitle),u(s,m),console.log(i)}(s)}else{let e=new t("My Day",[],0,1);l(e,f,v),d(q,"0","My Day"),document.querySelector(`.all-list div[list-number="${e.getListNumber}"]`).setAttribute("id","active-list"),a(i,m)}const x=document.querySelectorAll(".all-list .a-list"),k=document.querySelectorAll(".all-todo .a-todo");S.onclick=()=>{y.removeAttribute("id")},E.addEventListener("click",(()=>{v.removeAttribute("id")})),C.onsubmit=function(e){console.log(e.target),e.preventDefault();let n=new t(A.value,[],i.length);s(f);const o=l(n,f,v);o.setAttribute("id","active-list");const r=Array.from(document.querySelectorAll(".a-todo"));d(q,n.getListNumber,n.getTitle),u(r,n.getListNumber.toString()),m=n.getListNumber.toString(),o.onclick=h,e.target.reset(),v.setAttribute("id","hide"),console.log(i),a(i,m)},C.onreset=()=>{v.setAttribute("id","hide")},L.onsubmit=function(t){t.preventDefault();const l=parseInt(q.getAttribute("list-number")),s=i[parseInt(l)].getTodos.length;let n=new e(N.value,I.value,T.value,D.value,l,0,s);i[parseInt(l)].getTodos.push(n),r($,n).onclick=p,y.setAttribute("id","hide"),t.target.reset(),console.table(i),a(i,m)},L.onreset=()=>{y.setAttribute("id","hide")},x.forEach((t=>{t.onclick=h})),k.forEach((t=>{t.onclick=p}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VDVFLFFBQVErQixNQUFNOUYsR0FDZHVELEVBQVN2RCxFQUFPd0QsRUFDcEIsRUFpT0F3RCxFQUFTTixRQUFVLEtBQ2ZLLEVBQWFyRyxhQUFhLEtBQU0sT0FBTyxFQUczQzJILEVBQWVPLFNBQVE1RCxJQUNuQkEsRUFBS3VELFFBQVVoRSxDQUFjLElBR2pDK0QsRUFBWU0sU0FBUTVGLElBQ2hCQSxFQUFLdUYsUUFBVTFDLENBQVUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8vLi9zcmMvbGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tYW5hZ2VMaXN0SW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlVG9kb0ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3N0b3JhZ2VNYW5hZ2VtZW50LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB0b2RvcywgbGlzdE51bWJlciwgaXNEZWZhdWx0PTApIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnRvZG9zID0gdG9kb3M7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIHRoaXMuaXNEZWZhdWx0ID0gaXNEZWZhdWx0O1xuICAgIH1cblxuICAgIGdldCBnZXRJc0RlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGVmYXVsdDtcbiAgICB9XG5cbiAgICBzZXQgc2V0SXNEZWZhdWx0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNEZWZhdWx0ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldExpc3ROdW1iZXIoKSB7cmV0dXJuIHRoaXMubGlzdE51bWJlcn1cblxuICAgIHNldCBzZXRMaXN0TnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRUaXRsZSgpIHtyZXR1cm4gdGhpcy50aXRsZX1cblxuICAgIGdldCBnZXRUb2RvcygpIHtyZXR1cm4gdGhpcy50b2Rvc31cblxuICAgIHNldCBzZXRUb2Rvcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGFkZE5ld0xpc3QodGhlVG9kbykge1xuICAgICAgICB0aGlzLnRvZG9zLnB1c2godGhlVG9kbyk7XG4gICAgfVxufSIsIlxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG8ge1xuXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgbGlzdE51bWJlciwgY29tcGxldGVkLCB0b2RvTnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gY29tcGxldGVkO1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB0b2RvTnVtYmVyO1xuICAgIH1cblxuICAgIGdldCBnZXRUb2RvTnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2RvTnVtYmVyO1xuICAgIH1cblxuICAgIHNldCBzZXRUb2RvTnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb051bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRJc0NvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVkO1xuICAgIH1cblxuICAgIGNoYW5nZUNvbXBsZXRlU3RhdHVzKCkge1xuICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWQgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBnZXRMaXN0TnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0TnVtYmVyO1xuICAgIH1cblxuICAgIHNldCBzZXRMaXN0TnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGl0bGU7XG4gICAgfVxuICAgIGdldCBnZXREZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIGdldCBnZXREdWVEYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kdWVEYXRlO1xuICAgIH1cbiAgICBnZXQgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5O1xuICAgIH1cblxuICAgIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldERlc2NyaXB0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0IHNldER1ZURhdGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXRQcmlvcml0eSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gdmFsdWU7XG4gICAgfVxufSIsIlxuXG5leHBvcnQgbGV0IGxpc3RzID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXdMaXN0SW50ZXJmYWNlKGxpc3RPYmplY3QsIGNvbnRhaW5lciwgaW5zZXJ0X2JlZm9yZSkge1xuXG4gICAgbGlzdHMucHVzaChsaXN0T2JqZWN0KTtcblxuICAgIGNvbnN0IGFMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYUxpc3QuY2xhc3NMaXN0LmFkZCgnYS1saXN0Jyk7XG4gICAgYUxpc3Quc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3RPYmplY3QuZ2V0TGlzdE51bWJlcn1gKTtcbiAgICAvLyBhTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgY29udGFpbmVyLmluc2VydEJlZm9yZShhTGlzdCwgaW5zZXJ0X2JlZm9yZSk7XG5cblxuICAgIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICBjb25zdCBpY29uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24xLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpZiAobGlzdE9iamVjdC5nZXRJc0RlZmF1bHQgPT09IDEpIHtcbiAgICAgICAgaWNvbjEuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvd2VhdGhlci1zdW5ueS5wbmcnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgfVxuICAgIGxlZnQuYXBwZW5kQ2hpbGQoaWNvbjEpO1xuXG4gICAgY29uc3QgbGlzdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGlzdFRpdGxlLmNsYXNzTGlzdC5hZGQoJ2xpc3QtdGl0bGUnKTtcbiAgICBsaXN0VGl0bGUudGV4dENvbnRlbnQgPSBsaXN0T2JqZWN0LmdldFRpdGxlO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQobGlzdFRpdGxlKTtcblxuICAgIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjIuY2xhc3NMaXN0LmFkZCgnZWRpdCcpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjMuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMyk7XG5cbiAgICBjb25zdCBpY29uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uNC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb240KTtcblxuICAgIGNvbnN0IGljb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjUuY2xhc3NMaXN0LmFkZCgnZGVsZXRlJyk7XG4gICAgaWNvbjUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgICByZXR1cm4gYUxpc3Q7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4aXN0aW5nTWFya2VyKGNvbnRhaW5lcikge1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBmaXJzdExpc3QgPSBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgaWYgKGZpcnN0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpIHtcbiAgICAgICAgZmlyc3RMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBuZXh0TGlzdCA9IGZpcnN0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAobmV4dExpc3QuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWN0aXZlLWxpc3QnKXtcbiAgICAgICAgICAgICAgICBuZXh0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0TGlzdCA9IG5leHRMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKSB7XG4gICAgbGV0IGFsbFRvZG9JbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0c1tpXS5zZXRMaXN0TnVtYmVyID0gaTtcbiAgICAgICAgaWYgKGxpc3RzW2ldLmdldFRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdG9kb19ubyA9IDA7XG4gICAgICAgICAgICBjb25zdCBsaXN0X25vID0gbGlzdHNbaV0uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgICAgIGZvciAobGV0IHggb2YgbGlzdHNbaV0uZ2V0VG9kb3MpIHtcbiAgICAgICAgICAgICAgICB4LnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICAgICAgICAgIHguc2V0VG9kb051bWJlciA9IHRvZG9fbm87XG4gICAgICAgICAgICAgICAgbGV0IHRoZURPTSA9IGFsbFRvZG9zW2FsbFRvZG9JbmRleF07XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3Rfbm99YCk7XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RvZG9fbm99YCk7XG4gICAgICAgICAgICAgICAgdG9kb19ubysrO1xuICAgICAgICAgICAgICAgIGFsbFRvZG9JbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGxpc3ROdW1iZXIsIGFsbFRvZG9zKSB7XG5cbiAgICBsaXN0cy5zcGxpY2UocGFyc2VJbnQobGlzdE51bWJlciksIDEpO1xuICAgIC8vICB1cGRhdGUgZG9tc1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICBmb3IgKGxldCBsaXN0IG9mIGNvbnRhaW5lcikge1xuICAgICAgICBsaXN0LnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgbGlzdC5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7aW5kZXh9YCk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIEFycmF5IGFuZCB0b2RvIERPTSdzXG4gICAgdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdExpc3QoZWxlbWVudCkge1xuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBsaXN0VGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG5cbiAgICAvLyBjcmVhdGUgYW4gaW5wdXQgRWxlbWVudFxuICAgIGNvbnN0IGxpc3ROYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGxpc3ROYW1lSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICBsaXN0TmFtZUlucHV0LnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzMwJyk7XG4gICAgbGlzdE5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG4gICAgbGlzdE5hbWVJbnB1dC52YWx1ZSA9IGxpc3RUaXRsZS50ZXh0Q29udGVudDtcblxuICAgIC8vIGNyZWF0ZSB0aGUgZm9ybVxuICAgIGNvbnN0IGxpc3ROYW1lRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBsaXN0TmFtZUZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnIycpO1xuXG4gICAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5hcHBlbmRDaGlsZChsaXN0TmFtZUZvcm0pO1xuICAgIGxpc3ROYW1lRm9ybS5hcHBlbmRDaGlsZChsaXN0TmFtZUlucHV0KTtcbiAgICBjb25zb2xlLmxvZyhlbGVtZW50KTtcblxuICAgIHJldHVybiBsaXN0TmFtZUZvcm07XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZG9DaGFuZ2UoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkKTtcbiAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufSIsIlxuXG5leHBvcnQgbGV0IHRvZG9zID0gW107XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld1RvZG9JbnRlcmZhY2UoY29udGFpbmVyLCB0aGVUb2RvKSB7XG5cbiAgICAvLyBkZXNjcmlwdGlvbnMgZ29lcyBoZXJlXG5cbiAgICB0b2Rvcy5wdXNoKHRoZVRvZG8pO1xuXG4gICAgY29uc3QgYVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhVG9kby5jbGFzc0xpc3QuYWRkKCdhLXRvZG8nKTtcbiAgICBhVG9kby5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7dGhlVG9kby5nZXRMaXN0TnVtYmVyfWApO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgndG9kby1udW1iZXInLCBgJHt0aGVUb2RvLmdldFRvZG9OdW1iZXJ9YCk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGFUb2RvKTtcblxuICAgIGNvbnN0IGFMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYUxpc3QuY2xhc3NMaXN0LmFkZCgnYS1saXN0Jyk7XG4gICAgYVRvZG8uYXBwZW5kQ2hpbGQoYUxpc3QpO1xuXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKCdkZXNjcmlwdGlvbicpO1xuICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGhlVG9kby5nZXREZXNjcmlwdGlvbjtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XG5cbiAgICBjb25zdCBjb2xsYXBzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbGxhcHNlLmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlJyk7XG4gICAgYVRvZG8uYXBwZW5kQ2hpbGQoY29sbGFwc2UpO1xuXG4gICAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKGxlZnQpO1xuXG4gICAgY29uc3QgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByaWdodC5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKHJpZ2h0KTtcblxuICAgIGNvbnN0IGNvbGxhcHNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdjb2xsYXBzZSBpY29uJyk7XG4gICAgY29sbGFwc2UuYXBwZW5kQ2hpbGQoY29sbGFwc2VJbWcpO1xuXG4gICAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2NoZWNrYm94Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnaWQnLCAndG9kby1jaGVja2JveCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndG9kby1jaGVja2JveCcpO1xuICAgIGlmICh0aGVUb2RvLmdldElzQ29tcGxldGVkID09PSAxKSB7XG4gICAgICAgIGlucHV0MS5jaGVja2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgbGVmdC5hcHBlbmRDaGlsZChpbnB1dDEpO1xuXG4gICAgY29uc3QgdGl0bGVUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGVUb2RvLnRleHRDb250ZW50ID0gYCR7dGhlVG9kby5nZXRUaXRsZX0gKER1ZTogJHt0aGVUb2RvLmdldER1ZURhdGV9KWA7XG4gICAgbGVmdC5hcHBlbmRDaGlsZCh0aXRsZVRvZG8pO1xuXG4gICAgY29uc3QgaWNvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2VkaXQnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMik7XG5cbiAgICBjb25zdCBpY29uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uNC5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjQpO1xuXG4gICAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGljb241LmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZScpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb241KTtcblxuICAgIHJldHVybiBhVG9kbztcbn1cblxuXG4vLyBjaGFuZ2UgdG9kbyBoZWFkZXJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3ROdW1iZXIsIHRpdGxlKSB7XG4gICAgaWYgKGxpc3ROdW1iZXIgPT09IG51bGwpIHtcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIH1cbiAgICB0b2RvSGVhZGVyLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0TnVtYmVyfWApO1xuICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZTtcbn1cblxuLy8gc2hvdyBhbGwgdG9kb3Mgb2YgYSBwYXJ0aWN1bGFyIGxpc3RcbmV4cG9ydCBmdW5jdGlvbiBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbGlzdE51bWJlcikge1xuICAgIGlmIChhbGxUb2RvcyA9PT0gbnVsbCkgcmV0dXJuXG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBpZiAodG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykgPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHRvZG8ucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9kby5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUmVsYXRlZFRvZG8oY29udGFpbmVyLCBhbGxUb2RvcywgbGlzdE51bWJlcil7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBjb25zdCBsaXN0X251bSA9IHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBpZiAobGlzdF9udW0gPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KSB7XG5cbiAgICBsZXQgaW5wdXQgPSBwcmlvcml0eUlucHV0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPT09IHNlbGVjdGVkT25lKSB7XG4gICAgICAgICAgICBpbnB1dC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRUb2RvKGVsZW1lbnQsIGVkaXRNb2RhbCwgbGlzdHMpIHtcbiAgICBsZXQgbGlzdE51bWJlciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgIGxldCB0b2RvTnVtYmVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJyk7XG4gICAgbGV0IHRoZVRvZG8gPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICAgIHRoZVRvZG8uc2V0VGl0bGUgPSAnaGkgdGhlcmUnO1xuICAgIGxldCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQudmFsdWUgPSB0aGVUb2RvLmdldFRpdGxlO1xuICAgIGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlID0gdGhlVG9kby5nZXREdWVEYXRlO1xuICAgIGNvbnN0IHNlbGVjdGVkT25lID0gdGhlVG9kby5nZXRQcmlvcml0eTtcbiAgICBsZXQgcHJpb3JpdHlJbnB1dCA9IGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KTtcbiAgICBwcmlvcml0eUlucHV0LnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnZhbHVlID0gdGhlVG9kby5nZXREZXNjcmlwdGlvbjtcblxuICAgIHJldHVybiB0aGVUb2RvO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pIHtcbiAgICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0RGVzY3JpcHRpb259YFxufSBcblxuXG5cbiAgICAgICAgLy8gPGRpdiBjbGFzcz1cImVkaXQtdG9kby1tb2RhbFwiIGlkPVwiaGlkZVwiPlxuICAgICAgICAvLyAgICAgPGgyIGNsYXNzPVwidG9kby1tb2RhbC1oZWFkZXJcIj5FZGl0IFRhc2s8L2gyPlxuXG4gICAgICAgIC8vICAgICA8Zm9ybSBjbGFzcz1cImVkaXQtZm9ybVwiIGFjdGlvbj1cIiNcIj5cbiAgICAgICAgLy8gICAgICAgICA8aW5wdXQgaWQ9XCJ0b2RvLW5hbWVcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJ0b2RvLW5hbWVcIiBtYXhsZW5ndGg9XCI1MFwiIHBsYWNlaG9sZGVyPVwiVGl0bGVcIiByZXF1aXJlZD5cbiAgICAgICAgLy8gICAgICAgICA8ZGl2IGNsYXNzPVwiZHVlLWRhdGVcIj5cbiAgICAgICAgLy8gICAgICAgICAgICAgPGxhYmVsIGZvcj1cImR1ZS1kYXRlXCI+RHVlIERhdGU6PC9sYWJlbD5cbiAgICAgICAgLy8gICAgICAgICAgICAgPGlucHV0IGlkPVwiZHVlLWRhdGVcIiB0eXBlPVwiZGF0ZVwiIG5hbWU9XCJkdWUtZGF0ZVwiPlxuICAgICAgICAvLyAgICAgICAgIDwvZGl2PlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmlvcml0eVwiPlxuICAgICAgICAvLyAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJpb3JpdHlcIj5TZWxlY3QgUHJpb3JpdHkgKE9wdGlvbmFsKTwvbGFiZWw+XG4gICAgICAgIC8vICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT1cInByaW9yaXR5XCIgaWQ9XCJwcmlvcml0eVwiPlxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm5vbmVcIiBzZWxlY3RlZD5Ob25lPC9vcHRpb24+XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiaGlnaFwiPkhpZ2g8L29wdGlvbj5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJtZWRpdW1cIj5NZWRpdW08L29wdGlvbj5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJub3JtYWxcIj5Ob3JtYWw8L29wdGlvbj5cbiAgICAgICAgLy8gICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICAgICAgPHRleHRhcmVhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGlkPVwiZGVzY3JpcHRpb25cIiBjb2xzPVwiMzBcIiByb3dzPVwiMTBcIiBtYXhsZW5ndGg9XCIzMDBcIiBwbGFjZWhvbGRlcj1cImdpdmUgc29tZSBkZXNjcmlwdGlvbiAob3B0aW9uYWwpXCI+PC90ZXh0YXJlYT5cbiAgICAgICAgLy8gICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLWNhbmNlbFwiPlxuICAgICAgICAvLyAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cIm1vZGFsLXRvZG9cIj5TYXZlPC9idXR0b24+XG4gICAgICAgIC8vICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInJlc2V0XCIgY2xhc3M9XCJjYW5jZWwtdG9kb1wiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAvLyAgICAgICAgIDwvZGl2PlxuICAgICAgICAvLyAgICAgPC9mb3JtPlxuICAgICAgICAvLyA8L2Rpdj5cblxuIiwiaW1wb3J0IExpc3QgZnJvbSAnLi9saXN0J1xuaW1wb3J0IFRvZG8gZnJvbSAnLi90b2RvJ1xuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUb2RvKGFuQXJyYXksIGwpIHtcbiAgICBsZXQgdCA9IDA7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbkFycmF5KSB7XG4gICAgICAgIGxldCB0aXRsZSA9IHRvZG8uZ2V0VGl0bGU7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IHRvZG8uZ2V0RGVzY3JpcHRpb247XG4gICAgICAgIGxldCBkdWVEYXRlID0gdG9kby5kdWVEYXRlO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSB0b2RvLmdldFByaW9yaXR5O1xuICAgICAgICBsZXQgbGlzdE51bWJlciA9IHRvZG8uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgbGV0IGNvbXBsZXRlZCA9IHRvZG8uZ2V0SXNDb21wbGV0ZWQ7XG4gICAgICAgIGxldCB0b2RvTnVtYmVyID0gdG9kby5nZXRUb2RvTnVtYmVyO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGlzdF8ke2x9X3RvZG9fJHt0fWAsIGAke3RpdGxlfSwke2Rlc2NyaXB0aW9ufSwke2R1ZURhdGV9LCR7cHJpb3JpdHl9LCR7bGlzdE51bWJlcn0sJHtjb21wbGV0ZWR9LCR7dG9kb051bWJlcn1gKTtcbiAgICAgICAgdCsrO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKVxuICAgIGxldCBsID0gMDtcblxuICAgIC8vIHNhdmUgbGlzdHNcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlTGlzdE51bWJlcicsIGFjdGl2ZUxpc3ROdW1iZXIpO1xuICAgIGZvciAobGV0IGVsZW0gb2YgbGlzdHMpIHtcbiAgICAgICAgbGV0IGxpc3RUaXRsZSA9IGVsZW0uZ2V0VGl0bGU7XG4gICAgICAgIGxldCBsaXN0TnVtYmVyID0gZWxlbS5nZXRMaXN0TnVtYmVyO1xuICAgICAgICBpZiAoZWxlbS5nZXRJc0RlZmF1bHQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGlzdF8ke2x9YCwgYCR7bGlzdFRpdGxlfSwke2xpc3ROdW1iZXJ9LDFgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1gLCBgJHtsaXN0VGl0bGV9LCR7bGlzdE51bWJlcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBzYXZlVG9kbyhlbGVtLmdldFRvZG9zLCBsKTtcbiAgICAgICAgbCsrO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzb3J0QXJyYXlzKGFycmF5TGlzdHMpIHtcbiAgICBjb25zdCBuZXdMaXN0cyA9IGFycmF5TGlzdHMuc29ydCgoYSxiKSA9PiB7XG4gICAgICAgIGlmIChhLmdldExpc3ROdW1iZXIgPiBiLmdldExpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBuZXdMaXN0cztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0VG9kb3NUb0xpc3RzKGZpbmFsQXJyYXksIGFycmF5VG9kb3MpIHtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGFycmF5VG9kb3MpIHtcbiAgICAgICAgZmluYWxBcnJheVt0b2RvLmdldExpc3ROdW1iZXJdLmdldFRvZG9zLnB1c2godG9kbyk7XG4gICAgfVxuICAgIC8vIHNvcnQgdGhlIHRvZG9zXG4gICAgZm9yIChsZXQgbGlzdCBvZiBmaW5hbEFycmF5KSB7XG4gICAgICAgIGNvbnN0IG5ld1RvZG8gPSBsaXN0LmdldFRvZG9zLnNvcnQoKGEsYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuZ2V0VG9kb051bWJlciA+IGIuZ2V0VG9kb051bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBsaXN0LnNldFRvZG9zID0gbmV3VG9kbztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWREYXRhKCkge1xuICAgIGxldCBhcnJheUxpc3RzID0gW107XG4gICAgbGV0IGFycmF5VG9kb3MgPSBbXTtcbiAgICBmb3IgKGxldCBlbGVtIGluIGxvY2FsU3RvcmFnZSkge1xuICAgICAgICBpZiAoZWxlbS5pbmNsdWRlcygnbGlzdCcpICYmICFlbGVtLmluY2x1ZGVzKCd0b2RvJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3REZXRhaWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbSkuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gbGlzdERldGFpbHNbMF07XG4gICAgICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQobGlzdERldGFpbHNbMV0pO1xuICAgICAgICAgICAgaWYgKGxpc3REZXRhaWxzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpc3QgPSBuZXcgTGlzdCh0aXRsZSwgW10sIGxpc3ROdW1iZXIsIDEpO1xuICAgICAgICAgICAgICAgIGFycmF5TGlzdHMucHVzaChuZXdMaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpc3QgPSBuZXcgTGlzdCh0aXRsZSwgW10sIGxpc3ROdW1iZXIpO1xuICAgICAgICAgICAgICAgIGFycmF5TGlzdHMucHVzaChuZXdMaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbGVtLmluY2x1ZGVzKCd0b2RvJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9EZXRhaWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbSkuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdG9kb0RldGFpbHNbMF07XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRvZG9EZXRhaWxzWzFdO1xuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IHRvZG9EZXRhaWxzWzJdO1xuICAgICAgICAgICAgY29uc3QgcHJpb3JpdHkgPSB0b2RvRGV0YWlsc1szXTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s0XSk7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZWQgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s1XSk7XG4gICAgICAgICAgICBjb25zdCB0b2RvTnVtYmVyID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNl0pO1xuICAgICAgICAgICAgY29uc3QgbmV3VG9kbyA9IG5ldyBUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3ROdW1iZXIsIGNvbXBsZXRlZCwgdG9kb051bWJlcik7XG4gICAgICAgICAgICBhcnJheVRvZG9zLnB1c2gobmV3VG9kbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGZpbmFsQXJyYXkgPSBzb3J0QXJyYXlzKGFycmF5TGlzdHMpO1xuICAgIGluc2VydFRvZG9zVG9MaXN0cyhmaW5hbEFycmF5LCBhcnJheVRvZG9zKTtcbiAgICByZXR1cm4gZmluYWxBcnJheTtcbiAgICBjb25zb2xlLmxvZygncHJpbnRpbmcgdGhlIGNvbnZlcnRlZCBhcnJheScpXG4gICAgY29uc29sZS5sb2coZmluYWxBcnJheSk7XG59IiwiaW1wb3J0IExpc3QgZnJvbSAnLi9saXN0J1xuaW1wb3J0IFRvZG8gZnJvbSAnLi90b2RvJ1xuaW1wb3J0IHtsaXN0cywgYWRkTmV3TGlzdEludGVyZmFjZSwgcmVtb3ZlRXhpc3RpbmdNYXJrZXIsIHVwZGF0ZUxpc3RzQW5kVG9kb3MsIHVwZGF0ZUFycmF5QW5kVG9kbywgZWRpdExpc3QsIHVuZG9DaGFuZ2V9IGZyb20gJy4vbWFuYWdlTGlzdEludGVyZmFjZSdcbmltcG9ydCB7YWRkTmV3VG9kb0ludGVyZmFjZSwgY2hhbmdlVG9kb0hlYWRlciwgc2hvd0xpc3RzVG9kb3MsIGRlbGV0ZVJlbGF0ZWRUb2RvLCBlZGl0VG9kbywgdXBkYXRlVG9kb0RPTX0gZnJvbSAnLi9tYW5hZ2VUb2RvSW50ZXJmYWNlJ1xuaW1wb3J0IHtzYXZlRGF0YSwgbG9hZERhdGF9IGZyb20gJy4vc3RvcmFnZU1hbmFnZW1lbnQnXG5cbmxldCBhY3RpdmVMaXN0TnVtYmVyID0gJzAnO1xuXG5cbmZ1bmN0aW9uIGFkZExpc3QoZSkge1xuICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KTtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBsZXQgbmV3TGlzdCA9IG5ldyBMaXN0KG5ld0xpc3RpbnB1dC52YWx1ZSwgW10sIGxpc3RzLmxlbmd0aCk7XG4gICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgY29uc3QgbmV3TGlzdERPTSA9IGFkZE5ld0xpc3RJbnRlcmZhY2UobmV3TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgICBuZXdMaXN0RE9NLnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtdG9kbycpKTtcblxuICAgIC8vIG1hbmFnZSB0b2RvIGludGVyZmFjZVxuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbmV3TGlzdC5nZXRMaXN0TnVtYmVyLCBuZXdMaXN0LmdldFRpdGxlKTtcbiAgICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbmV3TGlzdC5nZXRMaXN0TnVtYmVyLnRvU3RyaW5nKCkpO1xuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBuZXdMaXN0LmdldExpc3ROdW1iZXIudG9TdHJpbmcoKTtcbiAgICBuZXdMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIGFkZF9hX1RvZG8oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludCh0b2RvSGVhZGVyLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKSk7XG4gICAgY29uc3QgdG9kb051bWJlciA9IGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5sZW5ndGg7XG4gICAgbGV0IG5ld1RvZG8gPSBuZXcgVG9kbyh0b2RvTmFtZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUsIGR1ZURhdGUudmFsdWUsIHByaW9yaXR5LnZhbHVlLCBsaXN0TnVtYmVyLCAwLCB0b2RvTnVtYmVyKTtcbiAgICBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MucHVzaChuZXdUb2RvKTtcblxuXG4gICAgLy8gYnJpbmcgdGhlIHRvZG8gaW50ZXJmYWNlXG4gICAgY29uc3QgbmV3VG9kb0RPTSA9IGFkZE5ld1RvZG9JbnRlcmZhY2UoYWxsVG9kbywgbmV3VG9kbyk7XG4gICAgbmV3VG9kb0RPTS5vbmNsaWNrID0gbW9kaWZ5VG9kbztcblxuICAgIC8vIGhpZGUgbW9kYWxcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBjb25zb2xlLnRhYmxlKGxpc3RzKTtcbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuZnVuY3Rpb24gc2F2ZUVkaXRlZExpc3QoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhhY3RpdmVMaXN0TnVtYmVyKTtcbiAgICBsZXQgdGhlTGlzdCA9IGxpc3RzW3BhcnNlSW50KGFjdGl2ZUxpc3ROdW1iZXIpXTtcbiAgICB0aGVMaXN0LnNldFRpdGxlID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgZS50YXJnZXQucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlO1xuICAgIC8vIGNvbnNvbGUubG9nKGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7XG4gICAgdW5kb0NoYW5nZShlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBtYWtlTGlzdEFjdGl2ZShlKSB7XG4gICAgLy8gaGFuZGxlIGRlbGV0ZSwgdXAsIGRvd24sIGNvbXBsZXRlXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgZGVsZXRlRWxlbWVudCh0aGlzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSAnZWRpdCcpIHtcbiAgICAgICAgY29uc3QgbGlzdE5hbWVGb3JtID0gZWRpdExpc3QodGhpcyk7XG4gICAgICAgIGxpc3ROYW1lRm9ybS5vbnN1Ym1pdCA9IHNhdmVFZGl0ZWRMaXN0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gZ2V0IHRoZSBsaXN0T2JqZWN0XG4gICAgICAgIGxldCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICAgICAgYWN0aXZlTGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY3RpdmVMaXN0TnVtYmVyJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVMaXN0TnVtYmVyJywgYWN0aXZlTGlzdE51bWJlcik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIHNob3dSZWxhdGVkVG9kb3MoeCwgbGlzdE5vKXtcbiAgICBpZiAobGlzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbnVsbCwgJ0FkZCBhIExpc3QnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGlzdE5vID09PSBgMGApIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIwXCJdJyk7XG4gICAgICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbMF0uZ2V0VGl0bGUpO1xuICAgICAgICBzaG93TGlzdHNUb2Rvcyh4LCBgMGApO1xuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gJzAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke3BhcnNlSW50KGxpc3RObyktMX1cIl1gKTtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1twYXJzZUludChsaXN0Tm8pLTFdLmdldFRpdGxlKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoeCwgYCR7cGFyc2VJbnQobGlzdE5vKS0xfWApO1xuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gYCR7cGFyc2VJbnQobGlzdE5vKS0xfWA7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIGRlbGV0ZUVsZW1lbnQoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2EtbGlzdCcpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgLy8gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgICAgIGFsbExpc3QucmVtb3ZlQ2hpbGQoZWxlbWVudClcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS1saXN0JykpO1xuICAgICAgICBsZXQgeCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIGRlbGV0ZVJlbGF0ZWRUb2RvKGFsbFRvZG8sIHgsIGluZGV4KTtcbiAgICAgICAgeCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIHVwZGF0ZUxpc3RzQW5kVG9kb3MoY29udGFpbmVyLCBpbmRleCwgeCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gYWN0aXZlTGlzdE51bWJlcikge1xuICAgICAgICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7fVxuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gaW5kZXg7XG4gICAgfVxuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gY2hhbmdlQ2hlY2soZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiB1cGRhdGVEYXRhcyh0aGVUb2RvLCBlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoZVRvZG8uc2V0VGl0bGUgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICB0aGVUb2RvLnNldER1ZURhdGUgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICB0aGVUb2RvLnNldFByaW9yaXR5ID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlO1xuICAgIHRoZVRvZG8uc2V0RGVzY3JpcHRpb24gPSBlLnRhcmdldC5sYXN0RWxlbWVudENoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudmFsdWU7XG4gICAgZS50YXJnZXQucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBjb25zdCB0b2RvRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC10b2RvIGRpdlt0b2RvLW51bWJlcj1cIiR7dGhlVG9kby5nZXRUb2RvTnVtYmVyfVwiXWApO1xuICAgIHVwZGF0ZVRvZG9ET00odGhlVG9kbywgdG9kb0RPTSk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIG1vZGlmeVRvZG8oZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSB0b2RvIGZyb20gdGhlIGxpc3RzIEFycmF5IGFuZCB0aGUgZG9tXG4gICAgICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5zcGxpY2UocGFyc2VJbnQodG9kb051bWJlciksIDEpO1xuICAgICAgICBjb25zb2xlLnRhYmxlKGxpc3RzKTtcbiAgICAgICAgYWxsVG9kby5yZW1vdmVDaGlsZCh0aGlzKTtcblxuICAgICAgICAvLyB1cGRhdGUgdG9kbyBhcnJheVxuICAgICAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgIGNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXRvZG8tbW9kYWwnKTtcbiAgICAgICAgZWRpdE1vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgY29uc3QgdGhlVG9kbyA9IGVkaXRUb2RvKHRoaXMsIGVkaXRNb2RhbCwgbGlzdHMpO1xuICAgICAgICBjb25zdCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICBlZGl0Rm9ybS5vbnN1Ym1pdCA9IChlKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhcyh0aGVUb2RvLCBlKTtcbiAgICAgICAgfVxuICAgICAgICBlZGl0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZWRpdE1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgIGNoYW5nZUNoZWNrKGUudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNvbnN0IHRvZG9OdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcbiAgICAgICAgbGV0IHRoZUxpc3QgPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV07XG4gICAgICAgIGxldCB0aGVUb2RvID0gdGhlTGlzdC5nZXRUb2Rvc1twYXJzZUludCh0b2RvTnVtYmVyKV07XG4gICAgICAgIHRoZVRvZG8uY2hhbmdlQ29tcGxldGVTdGF0dXMoKTtcbiAgICAgICAgY2hhbmdlQ2hlY2sodGhpcy5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgIH1cbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuZnVuY3Rpb24gbG9hZFBhZ2UoYW5BcnJheSkge1xuICAgIGlmIChhbkFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGZvciAobGV0IGxpc3Qgb2YgYW5BcnJheSkge1xuICAgICAgICBhZGROZXdMaXN0SW50ZXJmYWNlKGxpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gICAgICAgIGZvciAobGV0IHRvZG8gb2YgbGlzdC5nZXRUb2Rvcykge1xuICAgICAgICAgICAgYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCB0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7YWN0aXZlTGlzdE51bWJlcn1cIl1gKTtcbiAgICAvLyByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICBpZiAoYWN0aXZlTGlzdCAhPT0gbnVsbCkge1xuICAgICAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICB9XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBhY3RpdmVMaXN0TnVtYmVyLCBsaXN0c1twYXJzZUludChhY3RpdmVMaXN0TnVtYmVyKV0uZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBhY3RpdmVMaXN0TnVtYmVyKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuLy8gIyMjIyMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjIyMjIyMjI1xuXG5cbi8vIEFsbCBnbG9iYWwgdmFyaWFibGVzIGFuZCBldmVudExpc3RlbmVyc1xuY29uc3QgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCcpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtbmFtZScpO1xuY29uc3QgbGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1mb3JtJyk7XG5jb25zdCBhZGROZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1uZXctbGlzdCcpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1saXN0LW1vZGFsJyk7XG5jb25zdCBhZGRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tbW9kYWwnKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybScpO1xuY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1uYW1lJyk7XG5jb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZS1kYXRlJyk7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbmNvbnN0IGFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRvZG8nKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1oZWFkZXInKTtcblxuXG5cbi8vIGxvYWRpbmcgdGhlIGV4aXN0aW5nIGRhdGFcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlTGlzdE51bWJlcicpKSB7XG4gICAgbGV0IGFuQXJyYXkgPSBsb2FkRGF0YSgpO1xuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlTGlzdE51bWJlcicpO1xuICAgIGxvYWRQYWdlKGFuQXJyYXkpO1xuICAgIC8vIGxvYWRQYWdlKGFuQXJyYXkpO1xufVxuZWxzZSB7XG4gICAgLy8gQWRkaW5nIGRlZmF1bHQgbGlzdFxuICAgIGxldCBkZWZhdWx0TGlzdCA9IG5ldyBMaXN0KCdNeSBEYXknLCBbXSwgMCwgMSk7XG4gICAgYWRkTmV3TGlzdEludGVyZmFjZShkZWZhdWx0TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsICcwJywgJ015IERheScpO1xuICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiJHtkZWZhdWx0TGlzdC5nZXRMaXN0TnVtYmVyfVwiXWApO1xuICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIC8vIGFjdGl2ZUxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnZGVmYXVsdC1saXN0Jyk7XG4gICAgLy8gYWN0aXZlTGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgIC8vIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvd2VhdGhlci1zdW5ueS5wbmcnKTtcbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLWxpc3QgLmEtbGlzdCcpO1xuY29uc3QgYWxsVG9kb0RPTVMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpO1xuXG5hZGRUb2RvLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn1cblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufSlcblxuXG5saXN0Rm9ybS5vbnN1Ym1pdCA9IGFkZExpc3Q7XG5saXN0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxudG9kb0Zvcm0ub25zdWJtaXQgPSBhZGRfYV9Ub2RvO1xudG9kb0Zvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbmRlZmF1bHRMaXN0RE9NLmZvckVhY2gobGlzdCA9PiB7XG4gICAgbGlzdC5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG59KTtcblxuYWxsVG9kb0RPTVMuZm9yRWFjaCh0b2RvID0+IHtcbiAgICB0b2RvLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xufSk7Il0sIm5hbWVzIjpbIkxpc3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidG9kb3MiLCJsaXN0TnVtYmVyIiwiaXNEZWZhdWx0IiwidGhpcyIsImdldElzRGVmYXVsdCIsInNldElzRGVmYXVsdCIsInZhbHVlIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJnZXRUaXRsZSIsImdldFRvZG9zIiwic2V0VG9kb3MiLCJzZXRUaXRsZSIsImFkZE5ld0xpc3QiLCJ0aGVUb2RvIiwicHVzaCIsIlRvZG8iLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsInRvZG9OdW1iZXIiLCJnZXRUb2RvTnVtYmVyIiwic2V0VG9kb051bWJlciIsImdldElzQ29tcGxldGVkIiwiY2hhbmdlQ29tcGxldGVTdGF0dXMiLCJnZXREZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldERlc2NyaXB0aW9uIiwic2V0RHVlRGF0ZSIsInNldFByaW9yaXR5IiwibGlzdHMiLCJhZGROZXdMaXN0SW50ZXJmYWNlIiwibGlzdE9iamVjdCIsImNvbnRhaW5lciIsImluc2VydF9iZWZvcmUiLCJhTGlzdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImluc2VydEJlZm9yZSIsImxlZnQiLCJhcHBlbmRDaGlsZCIsInJpZ2h0IiwiaWNvbjEiLCJsaXN0VGl0bGUiLCJ0ZXh0Q29udGVudCIsImljb24yIiwiaWNvbjMiLCJpY29uNCIsImljb241IiwicmVtb3ZlRXhpc3RpbmdNYXJrZXIiLCJsZW5ndGgiLCJmaXJzdExpc3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5leHRMaXN0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidXBkYXRlQXJyYXlBbmRUb2RvIiwiYWxsVG9kb3MiLCJhbGxUb2RvSW5kZXgiLCJpIiwidG9kb19ubyIsImxpc3Rfbm8iLCJ4IiwidGhlRE9NIiwiYWRkTmV3VG9kb0ludGVyZmFjZSIsImFUb2RvIiwiY29sbGFwc2UiLCJjb2xsYXBzZUltZyIsImlucHV0MSIsImNoZWNrZWQiLCJ0aXRsZVRvZG8iLCJjaGFuZ2VUb2RvSGVhZGVyIiwidG9kb0hlYWRlciIsInNob3dMaXN0c1RvZG9zIiwidG9kbyIsInNhdmVUb2RvIiwiYW5BcnJheSIsImwiLCJ0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInNhdmVEYXRhIiwiYWN0aXZlTGlzdE51bWJlciIsImNsZWFyIiwiZWxlbSIsInNhdmVFZGl0ZWRMaXN0IiwiZSIsImVsZW1lbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZUludCIsInRhcmdldCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJsYXN0RWxlbWVudENoaWxkIiwibWFrZUxpc3RBY3RpdmUiLCJpbmRleCIsImFsbExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGVsZXRlUmVsYXRlZFRvZG8iLCJhbGxUb2RvIiwic3BsaWNlIiwibGlzdCIsInVwZGF0ZUxpc3RzQW5kVG9kb3MiLCJsaXN0Tm8iLCJxdWVyeVNlbGVjdG9yIiwic2hvd1JlbGF0ZWRUb2RvcyIsImRlbGV0ZUVsZW1lbnQiLCJsaXN0TmFtZUlucHV0IiwicmVxdWlyZWQiLCJsaXN0TmFtZUZvcm0iLCJlZGl0TGlzdCIsIm9uc3VibWl0IiwicmVtb3ZlSXRlbSIsImNoYW5nZUNoZWNrIiwibW9kaWZ5VG9kbyIsInRhYmxlIiwiZWRpdE1vZGFsIiwiZWRpdEZvcm0iLCJzZWxlY3RlZE9uZSIsInByaW9yaXR5SW5wdXQiLCJpbnB1dCIsInNlbGVjdGVkIiwic2V0UHJpb3JpdHlWYWx1ZSIsImVkaXRUb2RvIiwidG9kb0RPTSIsInVwZGF0ZVRvZG9ET00iLCJ1cGRhdGVEYXRhcyIsIm9ucmVzZXQiLCJuZXdMaXN0aW5wdXQiLCJsaXN0Rm9ybSIsIm5ld0xpc3RNb2RhbCIsImFkZFRvZG8iLCJuZXdUb2RvTW9kYWwiLCJ0b2RvRm9ybSIsInRvZG9OYW1lIiwiZ2V0SXRlbSIsImFycmF5TGlzdHMiLCJhcnJheVRvZG9zIiwiaW5jbHVkZXMiLCJsaXN0RGV0YWlscyIsInNwbGl0IiwibmV3TGlzdCIsInRvZG9EZXRhaWxzIiwibmV3VG9kbyIsImZpbmFsQXJyYXkiLCJzb3J0IiwiYSIsImIiLCJzb3J0QXJyYXlzIiwiaW5zZXJ0VG9kb3NUb0xpc3RzIiwibG9hZERhdGEiLCJhY3RpdmVMaXN0IiwibG9hZFBhZ2UiLCJkZWZhdWx0TGlzdCIsImRlZmF1bHRMaXN0RE9NIiwiYWxsVG9kb0RPTVMiLCJvbmNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5ld0xpc3RET00iLCJ0b1N0cmluZyIsInJlc2V0IiwiZm9yRWFjaCJdLCJzb3VyY2VSb290IjoiIn0=