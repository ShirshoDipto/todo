(()=>{"use strict";class t{constructor(t,e,i,s){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,n,o,r){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.listNumber=n,this.completed=o,this.todoNumber=r}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){!0===this.completed?this.completed=!1:this.completed=!0}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t){const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}let n=[];function o(t,e,i){t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function r(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function d(t){s(l),this.setAttribute("id","active-list");let e=t.target.getAttribute("list-number");o(L,e,this.firstElementChild.lastElementChild.textContent),r(Array.from(document.querySelectorAll(".a-todo")),e),console.log(i)}let c=new t("My Day",[],0);i.push(c);const l=document.querySelector(".all-list"),u=document.querySelector("#list-name"),a=document.querySelector(".list-form"),m=document.querySelector(".add-new-list"),p=document.querySelector(".new-list-modal"),h=document.querySelector(".add-todo"),g=document.querySelector(".new-todo-modal"),b=document.querySelector(".todo-form"),A=document.querySelector("#todo-name"),C=document.querySelector("#due-date"),E=document.querySelector("#priority"),v=document.querySelector("#description"),y=document.querySelector(".all-todo"),L=document.querySelector(".todo-header"),f=document.querySelector(".all-list .a-list");h.onclick=()=>{g.removeAttribute("id")},m.addEventListener("click",(()=>{p.removeAttribute("id")})),a.onsubmit=function(e){e.preventDefault();let n=new t(u.value,[],i.length);!function(t,e,n,o){i.push(t),s(e);const r=document.createElement("div");r.classList.add("a-list"),r.setAttribute("list-number",`${t.getListNumber}`),r.setAttribute("id","active-list"),e.insertBefore(r,n);const d=document.createElement("div");d.classList.add("left"),r.appendChild(d);const c=document.createElement("div");c.classList.add("right"),r.appendChild(c);const l=document.createElement("img");l.classList.add("icon"),l.setAttribute("src","icons/plus.png"),d.appendChild(l);const u=document.createElement("div");u.classList.add("list-title"),u.textContent=t.getTitle,d.appendChild(u);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),c.appendChild(a);const m=document.createElement("img");m.classList.add("icon"),m.setAttribute("src","icons/plus.png"),c.appendChild(m);const p=document.createElement("img");p.classList.add("icon"),p.setAttribute("src","icons/plus.png"),c.appendChild(p);const h=document.createElement("img");h.classList.add("delete"),h.setAttribute("src","icons/plus.png"),c.appendChild(h)}(n,l,p);const c=Array.from(document.querySelectorAll(".a-todo"));o(L,n.getListNumber,n.getTitle),r(c,n.getListNumber),document.getElementById("active-list").onclick=d,e.target.reset(),p.setAttribute("id","hide"),console.log(i)},a.onreset=()=>{p.setAttribute("id","hide")},b.onsubmit=function(t){t.preventDefault();const s=L.getAttribute("list-number"),o=i[parseInt(s)].getTodos.length;let r=new e(A.value,v.value,C.value,E.value,s,!1,o);i[parseInt(s)].getTodos.push(r),function(t,e){n.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const o=document.createElement("div");o.classList.add("description"),o.textContent=e.getDescription,i.appendChild(o);const r=document.createElement("div");r.classList.add("collapse"),i.appendChild(r);const d=document.createElement("div");d.classList.add("left"),s.appendChild(d);const c=document.createElement("div");c.classList.add("right"),s.appendChild(c);const l=document.createElement("img");l.setAttribute("src","icons/plus.png"),l.setAttribute("alt","collapse icon"),r.appendChild(l);const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id","todo-checkbox"),u.setAttribute("name","todo-checkbox"),d.appendChild(u);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,d.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),l.setAttribute("alt","icon img"),m.classList.add("icon"),c.appendChild(m);const p=document.createElement("img");p.setAttribute("src","icons/plus.png"),l.setAttribute("alt","icon img"),p.classList.add("icon"),c.appendChild(p);const h=document.createElement("img");h.setAttribute("src","icons/plus.png"),l.setAttribute("alt","icon img"),h.classList.add("icon"),c.appendChild(h);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),l.setAttribute("alt","icon img"),g.classList.add("delete"),c.appendChild(g)}(y,r),g.setAttribute("id","hide"),t.target.reset(),console.log(i)},b.onreset=()=>{g.setAttribute("id","hide")},f.onclick=d})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUFJLFVBQ3BCSSxFQUFNRCxZQUFZTyxFQUN0QixDQzNDSVksQ0FBb0JuQyxFQUFTNkIsR0FHN0JoQyxFQUFhdEIsYUFBYSxLQUFNLFFBQ2hDTSxFQUFFRSxPQUFPMkMsUUFDVHJDLFFBQVFDLElBQUkxQixFQUNoQixFQTBEQWtDLEVBQVM2QixRQUFVLEtBQ2Y5QixFQUFhdEIsYUFBYSxLQUFNLE9BQU8sRUFHM0MwQixFQUFlQyxRQUFVdEIsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8vLi9zcmMvbGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tYW5hZ2VMaXN0SW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlVG9kb0ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdG9kb3MsIGxpc3ROdW1iZXIsIGFjdGl2ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMudG9kb3MgPSB0b2RvcztcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICAgICAgLy8gdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgLy8gdGhpcy5hY3RpdmUgPSBhY3RpdmU7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGdldEFjdGl2ZSgpIHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICAgIC8vIH1cbiAgICAvLyBzZXQgc2V0QWN0aXZlKHZhbHVlKSB7XG4gICAgLy8gICAgIHRoaXMuYWN0aXZlID0gdmFsdWU7XG4gICAgLy8gfVxuXG4gICAgLy8gZ2V0IGdldER1ZURhdGUoKSB7XG4gICAgLy8gICAgIHJldHVybiB0aGlzLmR1ZURhdGU7XG4gICAgLy8gfVxuXG4gICAgLy8gc2V0IHNldER1ZURhdGUodmFsdWUpIHtcbiAgICAvLyAgICAgdGhpcy5kdWVEYXRlID0gdmFsdWU7XG4gICAgLy8gfVxuXG4gICAgZ2V0IGdldExpc3ROdW1iZXIoKSB7cmV0dXJuIHRoaXMubGlzdE51bWJlcn1cblxuICAgIHNldCBzZXRMaXN0TnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRUaXRsZSgpIHtyZXR1cm4gdGhpcy50aXRsZX1cblxuICAgIGdldCBnZXRUb2RvcygpIHtyZXR1cm4gdGhpcy50b2Rvc31cblxuICAgIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGROZXdMaXN0KHRoZVRvZG8pIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRoZVRvZG8pO1xuICAgIH1cbn0iLCJcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3ROdW1iZXIsIGNvbXBsZXRlZCwgdG9kb051bWJlcikge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VG9kb051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb051bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNDb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICBjaGFuZ2VDb21wbGV0ZVN0YXR1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGdldExpc3ROdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3ROdW1iZXI7XG4gICAgfVxuXG4gICAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aXRsZTtcbiAgICB9XG4gICAgZ2V0IGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IGdldER1ZURhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmR1ZURhdGU7XG4gICAgfVxuICAgIGdldCBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHk7XG4gICAgfVxuXG4gICAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0RGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0RHVlRGF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0IHNldFByaW9yaXR5KHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSB2YWx1ZTtcbiAgICB9XG59IiwiXG5cbmV4cG9ydCBsZXQgbGlzdHMgPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld0xpc3RJbnRlcmZhY2UobGlzdE9iamVjdCwgY29udGFpbmVyLCBpbnNlcnRfYmVmb3JlLCB0b2RvSGVhZGVyKSB7XG5cbiAgICBsaXN0cy5wdXNoKGxpc3RPYmplY3QpO1xuXG4gICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoY29udGFpbmVyKTtcblxuICAgIGNvbnN0IGFMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYUxpc3QuY2xhc3NMaXN0LmFkZCgnYS1saXN0Jyk7XG4gICAgYUxpc3Quc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3RPYmplY3QuZ2V0TGlzdE51bWJlcn1gKTtcbiAgICBhTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgY29udGFpbmVyLmluc2VydEJlZm9yZShhTGlzdCwgaW5zZXJ0X2JlZm9yZSk7XG5cblxuICAgIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICBjb25zdCBpY29uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24xLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQoaWNvbjEpO1xuXG4gICAgY29uc3QgbGlzdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGlzdFRpdGxlLmNsYXNzTGlzdC5hZGQoJ2xpc3QtdGl0bGUnKTtcbiAgICBsaXN0VGl0bGUudGV4dENvbnRlbnQgPSBsaXN0T2JqZWN0LmdldFRpdGxlO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQobGlzdFRpdGxlKTtcblxuICAgIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjIuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjMuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMyk7XG5cbiAgICBjb25zdCBpY29uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uNC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb240KTtcblxuICAgIGNvbnN0IGljb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjUuY2xhc3NMaXN0LmFkZCgnZGVsZXRlJyk7XG4gICAgaWNvbjUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4aXN0aW5nTWFya2VyKGNvbnRhaW5lcikge1xuICAgIGNvbnN0IGZpcnN0TGlzdCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBpZiAoZmlyc3RMaXN0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FjdGl2ZS1saXN0Jykge1xuICAgICAgICBmaXJzdExpc3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG5leHRMaXN0ID0gZmlyc3RMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpe1xuICAgICAgICAgICAgICAgIG5leHRMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRMaXN0ID0gbmV4dExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8vIDxkaXYgY2xhc3M9XCJhLWxpc3RcIj5cbi8vICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuLy8gICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwicGljXCI+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LXRpdGxlXCI+TXkgRGF5PC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJFXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJVXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEZWxcIj5cbi8vICAgICA8L2Rpdj5cbi8vIDwvZGl2PlxuIiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFUb2RvLmNsYXNzTGlzdC5hZGQoJ2EtdG9kbycpO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2NvbGxhcHNlIGljb24nKTtcbiAgICBjb2xsYXBzZS5hcHBlbmRDaGlsZChjb2xsYXBzZUltZyk7XG5cbiAgICBjb25zdCBpbnB1dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgLy8gaW5wdXQxLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGlucHV0MSk7XG5cbiAgICBjb25zdCB0aXRsZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZVRvZG8udGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKHRpdGxlVG9kbyk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2ljb24gaW1nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdpY29uIGltZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG59XG5cblxuLy8gY2hhbmdlIHRvZG8gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aXRsZSkge1xuICAgIHRvZG9IZWFkZXIuc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4gICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xufVxuXG4vLyBzaG93IGFsbCB0b2RvcyBvZiBhIHBhcnRpY3VsYXIgbGlzdFxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgLy8gbWV0aG9kIGRlc2NyaXB0aW9uIGdvZXMgaGVyZVxuICAgIGlmIChhbGxUb2RvcyA9PT0gbnVsbCkgcmV0dXJuXG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBpZiAodG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykgPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHRvZG8ucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9kby5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIDxkaXYgY2xhc3M9XCJhLXRvZG9cIj5cbi8vICAgICA8ZGl2IGNsYXNzPVwiYS1saXN0XCI+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiXCI+XG4vLyAgICAgICAgICAgICA8ZGl2Pm5hbWUgb2YgdGhlIHRvZG88L2Rpdj5cbi8vICAgICAgICAgPC9kaXY+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkVcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJVXCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiRFwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRlbFwiPlxuLy8gICAgICAgICA8L2Rpdj5cbi8vICAgICA8L2Rpdj5cbi8vICAgICA8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIiBpZD1cImhpZGVcIj5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gRXNzZSBpcHNhbSBmdWdpYXQgZXVtIGhpYyBpcHN1bSBkb2xvcnVtIGJsYW5kaXRpaXMgaXVzdG8gZGVsZW5pdGkgcGVyZmVyZW5kaXMgZW5pbSBuaXNpIGFkaXBpc2NpIGl1cmUgbmF0dXMgYWQgbWF4aW1lLCBhbWV0LCBjb3Jwb3JpcyBxdWlidXNkYW0gYWxpcXVhbSE8L2Rpdj5cbi8vICAgICA8ZGl2IGNsYXNzPVwiY29sbGFwc2VcIj5cbi8vICAgICAgICAgPGltZyBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cImNvbGxhcHNlIGljb25cIj5cbi8vICAgICA8L2Rpdj5cbi8vIDwvZGl2PlxuXG4iLCJpbXBvcnQgTGlzdCBmcm9tICcuL2xpc3QnXG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8nXG5pbXBvcnQge2xpc3RzLCBhZGROZXdMaXN0SW50ZXJmYWNlLCByZW1vdmVFeGlzdGluZ01hcmtlcn0gZnJvbSAnLi9tYW5hZ2VMaXN0SW50ZXJmYWNlJ1xuaW1wb3J0IHt0b2RvcywgYWRkTmV3VG9kb0ludGVyZmFjZSwgY2hhbmdlVG9kb0hlYWRlciwgc2hvd0xpc3RzVG9kb3N9IGZyb20gJy4vbWFuYWdlVG9kb0ludGVyZmFjZSdcblxuXG5mdW5jdGlvbiBhZGRMaXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBsZXQgbmV3TGlzdCA9IG5ldyBMaXN0KG5ld0xpc3RpbnB1dC52YWx1ZSwgW10sIGxpc3RzLmxlbmd0aCk7XG4gICAgYWRkTmV3TGlzdEludGVyZmFjZShuZXdMaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwsIHRvZG9IZWFkZXIpO1xuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuXG4gICAgLy8gbWFuYWdlIHRvZG8gaW50ZXJmYWNlXG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBuZXdMaXN0LmdldExpc3ROdW1iZXIsIG5ld0xpc3QuZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBuZXdMaXN0LmdldExpc3ROdW1iZXIpO1xuICAgIGNvbnN0IG5ld0xpc3RET00gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlLWxpc3QnKTtcbiAgICBuZXdMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gYWRkX2FfVG9kbyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbWFuYWdlIEFycmF5IG9mIGxpc3RzXG4gICAgY29uc3QgbGlzdE51bWJlciA9IHRvZG9IZWFkZXIuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgIGNvbnN0IHRvZG9OdW1iZXIgPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MubGVuZ3RoO1xuICAgIGxldCBuZXdUb2RvID0gbmV3IFRvZG8odG9kb05hbWUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlLCBwcmlvcml0eS52YWx1ZSwgbGlzdE51bWJlciwgZmFsc2UsIHRvZG9OdW1iZXIpO1xuICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5wdXNoKG5ld1RvZG8pO1xuXG5cbiAgICAvLyBicmluZyB0aGUgdG9kbyBpbnRlcmZhY2VcbiAgICBhZGROZXdUb2RvSW50ZXJmYWNlKGFsbFRvZG8sIG5ld1RvZG8pO1xuXG4gICAgLy8gaGlkZSBtb2RhbFxuICAgIG5ld1RvZG9Nb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbn1cblxuXG5mdW5jdGlvbiBtYWtlTGlzdEFjdGl2ZShlKSB7XG4gICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgXG4gICAgLy8gZ2V0IHRoZSBsaXN0T2JqZWN0XG4gICAgbGV0IGxpc3ROdW1iZXIgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aGlzLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQpO1xuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gaGFuZGxlVG9kb0NoZWNrYm94KGUpIHtcbiAgICBjb25zb2xlLmxvZygnSXQgd2FzIGNsaWNrZWQnKTtcbn1cblxuXG4vLyBBZGRpbmcgZGVmYXVsdCBsaXN0XG5sZXQgZGVmYXVsdExpc3QgPSBuZXcgTGlzdCgnTXkgRGF5JywgW10sIDApO1xubGlzdHMucHVzaChkZWZhdWx0TGlzdCk7XG5cbi8vIEFsbCBnbG9iYWwgdmFyaWFibGVzIGFuZCBldmVudExpc3RlbmVyc1xuY29uc3QgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCcpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtbmFtZScpO1xuY29uc3QgbGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1mb3JtJyk7XG5jb25zdCBhZGROZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1uZXctbGlzdCcpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1saXN0LW1vZGFsJyk7XG5jb25zdCBhZGRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tbW9kYWwnKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybScpO1xuY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1uYW1lJyk7XG5jb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZS1kYXRlJyk7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbmNvbnN0IGFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRvZG8nKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1oZWFkZXInKTtcblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QgLmEtbGlzdCcpO1xuXG5hZGRUb2RvLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn1cblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufSlcblxuXG5saXN0Rm9ybS5vbnN1Ym1pdCA9IGFkZExpc3Q7XG5saXN0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxudG9kb0Zvcm0ub25zdWJtaXQgPSBhZGRfYV9Ub2RvO1xudG9kb0Zvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbmRlZmF1bHRMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTsiXSwibmFtZXMiOlsiTGlzdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJ0b2RvcyIsImxpc3ROdW1iZXIiLCJhY3RpdmUiLCJ0aGlzIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJ2YWx1ZSIsImdldFRpdGxlIiwiZ2V0VG9kb3MiLCJzZXRUaXRsZSIsInNldFRvZG9zIiwiYWRkTmV3TGlzdCIsInRoZVRvZG8iLCJwdXNoIiwiVG9kbyIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGVkIiwidG9kb051bWJlciIsImdldFRvZG9OdW1iZXIiLCJzZXRUb2RvTnVtYmVyIiwiZ2V0SXNDb21wbGV0ZWQiLCJjaGFuZ2VDb21wbGV0ZVN0YXR1cyIsImdldERlc2NyaXB0aW9uIiwiZ2V0RHVlRGF0ZSIsImdldFByaW9yaXR5Iiwic2V0RGVzY3JpcHRpb24iLCJzZXREdWVEYXRlIiwic2V0UHJpb3JpdHkiLCJsaXN0cyIsInJlbW92ZUV4aXN0aW5nTWFya2VyIiwiY29udGFpbmVyIiwiZmlyc3RMaXN0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJuZXh0TGlzdCIsIm5leHRFbGVtZW50U2libGluZyIsImNoYW5nZVRvZG9IZWFkZXIiLCJ0b2RvSGVhZGVyIiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJzaG93TGlzdHNUb2RvcyIsImFsbFRvZG9zIiwidG9kbyIsIm1ha2VMaXN0QWN0aXZlIiwiZSIsImFsbExpc3QiLCJ0YXJnZXQiLCJsYXN0RWxlbWVudENoaWxkIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29uc29sZSIsImxvZyIsImRlZmF1bHRMaXN0IiwicXVlcnlTZWxlY3RvciIsIm5ld0xpc3RpbnB1dCIsImxpc3RGb3JtIiwibmV3TGlzdE1vZGFsIiwiYWRkVG9kbyIsIm5ld1RvZG9Nb2RhbCIsInRvZG9Gb3JtIiwidG9kb05hbWUiLCJhbGxUb2RvIiwiZGVmYXVsdExpc3RET00iLCJvbmNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uc3VibWl0IiwicHJldmVudERlZmF1bHQiLCJuZXdMaXN0IiwibGVuZ3RoIiwibGlzdE9iamVjdCIsImluc2VydF9iZWZvcmUiLCJhTGlzdCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnNlcnRCZWZvcmUiLCJsZWZ0IiwiYXBwZW5kQ2hpbGQiLCJyaWdodCIsImljb24xIiwibGlzdFRpdGxlIiwiaWNvbjIiLCJpY29uMyIsImljb240IiwiaWNvbjUiLCJhZGROZXdMaXN0SW50ZXJmYWNlIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXNldCIsIm9ucmVzZXQiLCJwYXJzZUludCIsIm5ld1RvZG8iLCJhVG9kbyIsImNvbGxhcHNlIiwiY29sbGFwc2VJbWciLCJpbnB1dDEiLCJ0aXRsZVRvZG8iLCJhZGROZXdUb2RvSW50ZXJmYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==