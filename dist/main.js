(()=>{"use strict";class t{constructor(t,e,i){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,o,l,r){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.listNumber=o,this.completed=l,this.todoNumber=r}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t,e,s){i.push(t);const o=document.createElement("div");o.classList.add("a-list"),o.setAttribute("list-number",`${t.getListNumber}`),o.setAttribute("id","active-list"),e.insertBefore(o,s);const l=document.createElement("div");l.classList.add("left"),o.appendChild(l);const r=document.createElement("div");r.classList.add("right"),o.appendChild(r);const n=document.createElement("img");n.classList.add("icon"),n.setAttribute("src","icons/plus.png"),l.appendChild(n);const c=document.createElement("div");c.classList.add("list-title"),c.textContent=t.getTitle,l.appendChild(c);const d=document.createElement("img");d.classList.add("icon"),d.setAttribute("src","icons/plus.png"),r.appendChild(d);const u=document.createElement("img");u.classList.add("icon"),u.setAttribute("src","icons/plus.png"),r.appendChild(u);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),r.appendChild(a);const m=document.createElement("img");return m.classList.add("delete"),m.setAttribute("src","icons/plus.png"),r.appendChild(m),o}function o(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function l(t){let e=0;for(let s=0;s<i.length;s++)if(i[s].setListNumber=s,0!==i[s].getTodos.length){let o=0;const l=i[s].getListNumber;for(let r of i[s].getTodos){r.setListNumber=s,r.setTodoNumber=o;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${l}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${o}`),o++,e++}}}let r=[];function n(t,e,i){t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function c(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function d(t,e){let i=0;for(let s of t){let t=s.getTitle,o=s.getDescription,l=s.dueDate,r=s.getPriority,n=s.getListNumber,c=s.getIsCompleted,d=s.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${o},${l},${r},${n},${c},${d}`),i++}}function u(t){localStorage.clear();let e=0;for(let i of t){let t=i.getTitle,s=i.getListNumber;localStorage.setItem(`list_${e}`,`${t},${s}`),d(i.getTodos,e),e++}}let a="0";function m(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");p.removeChild(t);const s=Array.from(document.querySelectorAll(".a-list"));let o=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let s of e)s.getAttribute("list-number")===i&&t.removeChild(s)}(T,o,e),o=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,s){i.splice(parseInt(e),1);let o=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${o}`),o++;l(s)}(s,e,o),function(t,e){0===i.length?(q.firstElementChild.textContent="Add a List",q.firstElementChild.nextElementSibling.textContent="placeholder"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),n(q,e,i[0].getTitle),c(t,"0"),a="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),n(q,e,i[parseInt(e)-1].getTitle),c(t,""+(parseInt(e)-1)),a=""+(parseInt(e)-1))}(o,e),a=e}u(i)}(this);else{o(p),this.setAttribute("id","active-list");let e=t.target.getAttribute("list-number");n(q,e,this.firstElementChild.lastElementChild.textContent),c(Array.from(document.querySelectorAll(".a-todo")),e),a=e}console.table(i)}function g(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.table(i),T.removeChild(this),l(Array.from(document.querySelectorAll(".all-todo .a-todo")))}u(i)}localStorage.clear();const p=document.querySelector(".all-list"),b=document.querySelector("#list-name"),h=document.querySelector(".list-form"),f=document.querySelector(".add-new-list"),A=document.querySelector(".new-list-modal"),L=document.querySelector(".add-todo"),v=document.querySelector(".new-todo-modal"),y=document.querySelector(".todo-form"),C=document.querySelector("#todo-name"),S=document.querySelector("#due-date"),E=document.querySelector("#priority"),N=document.querySelector("#description"),T=document.querySelector(".all-todo"),q=document.querySelector(".todo-header");localStorage.getItem("html-page")?function(){let i=[],s=[];for(let o in localStorage)if(o.includes("list")&&!o.includes("todo")){const e=localStorage.getItem(o).split(","),s=e[0],l=parseInt(e[1]),r=new t(s,[],l);i.push(r)}else if(o.includes("todo")){const t=localStorage.getItem(o).split(","),i=t[0],l=t[1],r=t[2],n=t[3],c=parseInt(t[4]),d=parseInt(t[5]),u=parseInt(t[6]),a=new e(i,l,r,n,c,d,u);s.push(a)}let o=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);!function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(o,s)}():(s(new t("My Day",[],0),p,A),u(i));const $=document.querySelectorAll(".all-list .a-list"),I=document.querySelectorAll(".all-todo .a-todo");L.onclick=()=>{v.removeAttribute("id")},f.addEventListener("click",(()=>{A.removeAttribute("id")})),h.onsubmit=function(e){e.preventDefault();let l=new t(b.value,[],i.length);o(p);const r=s(l,p,A),d=Array.from(document.querySelectorAll(".a-todo"));n(q,l.getListNumber,l.getTitle),c(d,l.getListNumber.toString()),a=l.getListNumber.toString(),r.onclick=m,e.target.reset(),A.setAttribute("id","hide"),console.log(i),u(i)},h.onreset=()=>{A.setAttribute("id","hide")},y.onsubmit=function(t){t.preventDefault();const s=parseInt(q.getAttribute("list-number")),o=i[parseInt(s)].getTodos.length;let l=new e(C.value,N.value,S.value,E.value,s,0,o);i[parseInt(s)].getTodos.push(l);const n=function(t,e){r.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const o=document.createElement("div");o.classList.add("description"),o.textContent=e.getDescription,i.appendChild(o);const l=document.createElement("div");l.classList.add("collapse"),i.appendChild(l);const n=document.createElement("div");n.classList.add("left"),s.appendChild(n);const c=document.createElement("div");c.classList.add("right"),s.appendChild(c);const d=document.createElement("img");d.setAttribute("src","icons/plus.png"),d.setAttribute("alt","collapse icon"),l.appendChild(d);const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id","todo-checkbox"),u.setAttribute("name","todo-checkbox"),n.appendChild(u);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,n.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),m.classList.add("icon"),c.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),g.classList.add("icon"),c.appendChild(g);const p=document.createElement("img");p.setAttribute("src","icons/plus.png"),p.classList.add("icon"),c.appendChild(p);const b=document.createElement("img");return b.setAttribute("src","icons/plus.png"),b.classList.add("delete"),c.appendChild(b),i}(T,l);n.onclick=g,v.setAttribute("id","hide"),t.target.reset(),console.table(i),u(i)},y.onreset=()=>{v.setAttribute("id","hide")},$.forEach((t=>{t.onclick=m})),I.forEach((t=>{t.onclick=g}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQ2hDMkMsRUFBRUMsT0FBT3FELFFBQ1RsQyxRQUFRQyxNQUFNMUUsR0FDZGdELEVBQVNoRCxFQUNiLEVBd0pBaUYsRUFBUzRCLFFBQVUsS0FDZjdCLEVBQWF0RSxhQUFhLEtBQU0sT0FBTyxFQUczQ3lGLEVBQWVrQixTQUFRbkQsSUFDbkJBLEVBQUttQyxRQUFVakQsQ0FBYyxJQUdqQ2dELEVBQVlpQixTQUFRNUUsSUFDaEJBLEVBQUs0RCxRQUFVMUIsQ0FBVSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9saXN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZUxpc3RJbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tYW5hZ2VUb2RvSW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvc3RvcmFnZU1hbmFnZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdCB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIHRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b2RvcyA9IHRvZG9zO1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgIH1cblxuICAgIGdldCBnZXRMaXN0TnVtYmVyKCkge3JldHVybiB0aGlzLmxpc3ROdW1iZXJ9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7cmV0dXJuIHRoaXMudGl0bGV9XG5cbiAgICBnZXQgZ2V0VG9kb3MoKSB7cmV0dXJuIHRoaXMudG9kb3N9XG5cbiAgICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGROZXdMaXN0KHRoZVRvZG8pIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRoZVRvZG8pO1xuICAgIH1cbn0iLCJcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3ROdW1iZXIsIGNvbXBsZXRlZCwgdG9kb051bWJlcikge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VG9kb051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb051bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNDb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICBjaGFuZ2VDb21wbGV0ZVN0YXR1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdE51bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICB9XG4gICAgZ2V0IGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUpIHtcblxuICAgIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0T2JqZWN0LmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYUxpc3QsIGluc2VydF9iZWZvcmUpO1xuXG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgaWNvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjEuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGljb24xKTtcblxuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RUaXRsZS5jbGFzc0xpc3QuYWRkKCdsaXN0LXRpdGxlJyk7XG4gICAgbGlzdFRpdGxlLnRleHRDb250ZW50ID0gbGlzdE9iamVjdC5nZXRUaXRsZTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGxpc3RUaXRsZSk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICAgIGNvbnN0IGljb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjMpO1xuXG4gICAgY29uc3QgaWNvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNC5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZScpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xuXG4gICAgcmV0dXJuIGFMaXN0O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFeGlzdGluZ01hcmtlcihjb250YWluZXIpIHtcbiAgICBpZiAobGlzdHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgY29uc3QgZmlyc3RMaXN0ID0gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGlmIChmaXJzdExpc3QuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWN0aXZlLWxpc3QnKSB7XG4gICAgICAgIGZpcnN0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbmV4dExpc3QgPSBmaXJzdExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRMaXN0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FjdGl2ZS1saXN0Jyl7XG4gICAgICAgICAgICAgICAgbmV4dExpc3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dExpc3QgPSBuZXh0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcykge1xuICAgIGxldCBhbGxUb2RvSW5kZXggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGlzdHNbaV0uc2V0TGlzdE51bWJlciA9IGk7XG4gICAgICAgIGlmIChsaXN0c1tpXS5nZXRUb2Rvcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHRvZG9fbm8gPSAwO1xuICAgICAgICAgICAgY29uc3QgbGlzdF9ubyA9IGxpc3RzW2ldLmdldExpc3ROdW1iZXI7XG4gICAgICAgICAgICBmb3IgKGxldCB4IG9mIGxpc3RzW2ldLmdldFRvZG9zKSB7XG4gICAgICAgICAgICAgICAgeC5zZXRMaXN0TnVtYmVyID0gaTtcbiAgICAgICAgICAgICAgICB4LnNldFRvZG9OdW1iZXIgPSB0b2RvX25vO1xuICAgICAgICAgICAgICAgIGxldCB0aGVET00gPSBhbGxUb2Rvc1thbGxUb2RvSW5kZXhdO1xuICAgICAgICAgICAgICAgIHRoZURPTS5yZW1vdmVBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgICAgICAgICAgdGhlRE9NLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0X25vfWApO1xuICAgICAgICAgICAgICAgIHRoZURPTS5yZW1vdmVBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJyk7XG4gICAgICAgICAgICAgICAgdGhlRE9NLnNldEF0dHJpYnV0ZSgndG9kby1udW1iZXInLCBgJHt0b2RvX25vfWApO1xuICAgICAgICAgICAgICAgIHRvZG9fbm8rKztcbiAgICAgICAgICAgICAgICBhbGxUb2RvSW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUxpc3RzQW5kVG9kb3MoY29udGFpbmVyLCBsaXN0TnVtYmVyLCBhbGxUb2Rvcykge1xuXG4gICAgbGlzdHMuc3BsaWNlKHBhcnNlSW50KGxpc3ROdW1iZXIpLCAxKTtcbiAgICAvLyAgdXBkYXRlIGRvbXNcbiAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgZm9yIChsZXQgbGlzdCBvZiBjb250YWluZXIpIHtcbiAgICAgICAgbGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGxpc3Quc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2luZGV4fWApO1xuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBBcnJheSBhbmQgdG9kbyBET00nc1xuICAgIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcyk7XG59XG5cblxuLy8gPGRpdiBjbGFzcz1cImEtbGlzdFwiPlxuLy8gICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJwaWNcIj5cbi8vICAgICAgICAgPGRpdiBjbGFzcz1cImxpc3QtdGl0bGVcIj5NeSBEYXk8L2Rpdj5cbi8vICAgICA8L2Rpdj5cbi8vICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkVcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIlVcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRlbFwiPlxuLy8gICAgIDwvZGl2PlxuLy8gPC9kaXY+XG4iLCJcblxuZXhwb3J0IGxldCB0b2RvcyA9IFtdO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXdUb2RvSW50ZXJmYWNlKGNvbnRhaW5lciwgdGhlVG9kbykge1xuXG4gICAgLy8gZGVzY3JpcHRpb25zIGdvZXMgaGVyZVxuXG4gICAgdG9kb3MucHVzaCh0aGVUb2RvKTtcblxuICAgIGNvbnN0IGFUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYVRvZG8uY2xhc3NMaXN0LmFkZCgnYS10b2RvJyk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke3RoZVRvZG8uZ2V0TGlzdE51bWJlcn1gKTtcbiAgICBhVG9kby5zZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJywgYCR7dGhlVG9kby5nZXRUb2RvTnVtYmVyfWApO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhVG9kbyk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGFMaXN0KTtcblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgnZGVzY3JpcHRpb24nKTtcbiAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoZVRvZG8uZ2V0RGVzY3JpcHRpb247XG4gICAgYVRvZG8uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gICAgY29uc3QgY29sbGFwc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb2xsYXBzZS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGNvbGxhcHNlKTtcblxuICAgIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICBjb25zdCBjb2xsYXBzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnY29sbGFwc2UgaWNvbicpO1xuICAgIGNvbGxhcHNlLmFwcGVuZENoaWxkKGNvbGxhcHNlSW1nKTtcblxuICAgIGNvbnN0IGlucHV0MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvZG8tY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RvZG8tY2hlY2tib3gnKTtcbiAgICAvLyBpbnB1dDEuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQoaW5wdXQxKTtcblxuICAgIGNvbnN0IHRpdGxlVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRpdGxlVG9kby50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0VGl0bGV9IChEdWU6ICR7dGhlVG9kby5nZXREdWVEYXRlfSlgO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQodGl0bGVUb2RvKTtcblxuICAgIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjIuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGljb24zLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMyk7XG5cbiAgICBjb25zdCBpY29uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjQuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb240KTtcblxuICAgIGNvbnN0IGljb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgICByZXR1cm4gYVRvZG87XG59XG5cblxuLy8gY2hhbmdlIHRvZG8gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aXRsZSkge1xuICAgIHRvZG9IZWFkZXIuc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4gICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xufVxuXG4vLyBzaG93IGFsbCB0b2RvcyBvZiBhIHBhcnRpY3VsYXIgbGlzdFxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgaWYgKGFsbFRvZG9zID09PSBudWxsKSByZXR1cm5cbiAgICBmb3IgKGxldCB0b2RvIG9mIGFsbFRvZG9zKSB7XG4gICAgICAgIGlmICh0b2RvLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKSA9PT0gbGlzdE51bWJlcikge1xuICAgICAgICAgICAgdG9kby5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2RvLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZWxhdGVkVG9kbyhjb250YWluZXIsIGFsbFRvZG9zLCBsaXN0TnVtYmVyKXtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGFsbFRvZG9zKSB7XG4gICAgICAgIGNvbnN0IGxpc3RfbnVtID0gdG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGlmIChsaXN0X251bSA9PT0gbGlzdE51bWJlcikge1xuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHRvZG8pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyA8ZGl2IGNsYXNzPVwiYS10b2RvXCI+XG4vLyAgICAgPGRpdiBjbGFzcz1cImEtbGlzdFwiPlxuLy8gICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIlwiPlxuLy8gICAgICAgICAgICAgPGRpdj5uYW1lIG9mIHRoZSB0b2RvPC9kaXY+XG4vLyAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJFXCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiVVwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEZWxcIj5cbi8vICAgICAgICAgPC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uXCIgaWQ9XCJoaWRlXCI+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQuIEVzc2UgaXBzYW0gZnVnaWF0IGV1bSBoaWMgaXBzdW0gZG9sb3J1bSBibGFuZGl0aWlzIGl1c3RvIGRlbGVuaXRpIHBlcmZlcmVuZGlzIGVuaW0gbmlzaSBhZGlwaXNjaSBpdXJlIG5hdHVzIGFkIG1heGltZSwgYW1ldCwgY29ycG9yaXMgcXVpYnVzZGFtIGFsaXF1YW0hPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cImNvbGxhcHNlXCI+XG4vLyAgICAgICAgIDxpbWcgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJjb2xsYXBzZSBpY29uXCI+XG4vLyAgICAgPC9kaXY+XG4vLyA8L2Rpdj5cblxuIiwiaW1wb3J0IExpc3QgZnJvbSAnLi9saXN0J1xuaW1wb3J0IFRvZG8gZnJvbSAnLi90b2RvJ1xuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUb2RvKGFuQXJyYXksIGwpIHtcbiAgICBsZXQgdCA9IDA7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbkFycmF5KSB7XG4gICAgICAgIGxldCB0aXRsZSA9IHRvZG8uZ2V0VGl0bGU7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IHRvZG8uZ2V0RGVzY3JpcHRpb247XG4gICAgICAgIGxldCBkdWVEYXRlID0gdG9kby5kdWVEYXRlO1xuICAgICAgICBsZXQgcHJpb3JpdHkgPSB0b2RvLmdldFByaW9yaXR5O1xuICAgICAgICBsZXQgbGlzdE51bWJlciA9IHRvZG8uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgbGV0IGNvbXBsZXRlZCA9IHRvZG8uZ2V0SXNDb21wbGV0ZWQ7XG4gICAgICAgIGxldCB0b2RvTnVtYmVyID0gdG9kby5nZXRUb2RvTnVtYmVyO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGlzdF8ke2x9X3RvZG9fJHt0fWAsIGAke3RpdGxlfSwke2Rlc2NyaXB0aW9ufSwke2R1ZURhdGV9LCR7cHJpb3JpdHl9LCR7bGlzdE51bWJlcn0sJHtjb21wbGV0ZWR9LCR7dG9kb051bWJlcn1gKTtcbiAgICAgICAgdCsrO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZURhdGEobGlzdHMpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKVxuICAgIGxldCBsID0gMDtcblxuICAgIC8vIHNhdmUgbGlzdHNcbiAgICBmb3IgKGxldCBlbGVtIG9mIGxpc3RzKSB7XG4gICAgICAgIGxldCBsaXN0VGl0bGUgPSBlbGVtLmdldFRpdGxlO1xuICAgICAgICBsZXQgbGlzdE51bWJlciA9IGVsZW0uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGxpc3RfJHtsfWAsIGAke2xpc3RUaXRsZX0sJHtsaXN0TnVtYmVyfWApO1xuICAgICAgICBzYXZlVG9kbyhlbGVtLmdldFRvZG9zLCBsKTtcbiAgICAgICAgbCsrO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzb3J0QXJyYXlzKGFycmF5TGlzdHMpIHtcbiAgICBjb25zdCBuZXdMaXN0cyA9IGFycmF5TGlzdHMuc29ydCgoYSxiKSA9PiB7XG4gICAgICAgIGlmIChhLmdldExpc3ROdW1iZXIgPiBiLmdldExpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBuZXdMaXN0cztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0VG9kb3NUb0xpc3RzKGZpbmFsQXJyYXksIGFycmF5VG9kb3MpIHtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGFycmF5VG9kb3MpIHtcbiAgICAgICAgZmluYWxBcnJheVt0b2RvLmdldExpc3ROdW1iZXJdLmdldFRvZG9zLnB1c2godG9kbyk7XG4gICAgfVxuICAgIC8vIHNvcnQgdGhlIHRvZG9zXG4gICAgZm9yIChsZXQgbGlzdCBvZiBmaW5hbEFycmF5KSB7XG4gICAgICAgIGNvbnN0IG5ld1RvZG8gPSBsaXN0LmdldFRvZG9zLnNvcnQoKGEsYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuZ2V0VG9kb051bWJlciA+IGIuZ2V0VG9kb051bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBsaXN0LnNldFRvZG9zID0gbmV3VG9kbztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWREYXRhKCkge1xuICAgIGxldCBhcnJheUxpc3RzID0gW107XG4gICAgbGV0IGFycmF5VG9kb3MgPSBbXTtcbiAgICBmb3IgKGxldCBlbGVtIGluIGxvY2FsU3RvcmFnZSkge1xuICAgICAgICBpZiAoZWxlbS5pbmNsdWRlcygnbGlzdCcpICYmICFlbGVtLmluY2x1ZGVzKCd0b2RvJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3REZXRhaWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbSkuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gbGlzdERldGFpbHNbMF07XG4gICAgICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQobGlzdERldGFpbHNbMV0pXG4gICAgICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExpc3QodGl0bGUsIFtdLCBsaXN0TnVtYmVyKTtcbiAgICAgICAgICAgIGFycmF5TGlzdHMucHVzaChuZXdMaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbGVtLmluY2x1ZGVzKCd0b2RvJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9EZXRhaWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbSkuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdG9kb0RldGFpbHNbMF07XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRvZG9EZXRhaWxzWzFdO1xuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IHRvZG9EZXRhaWxzWzJdO1xuICAgICAgICAgICAgY29uc3QgcHJpb3JpdHkgPSB0b2RvRGV0YWlsc1szXTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s0XSk7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZWQgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s1XSk7XG4gICAgICAgICAgICBjb25zdCB0b2RvTnVtYmVyID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNl0pO1xuICAgICAgICAgICAgY29uc3QgbmV3VG9kbyA9IG5ldyBUb2RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3ROdW1iZXIsIGNvbXBsZXRlZCwgdG9kb051bWJlcik7XG4gICAgICAgICAgICBhcnJheVRvZG9zLnB1c2gobmV3VG9kbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGZpbmFsQXJyYXkgPSBzb3J0QXJyYXlzKGFycmF5TGlzdHMpO1xuICAgIGluc2VydFRvZG9zVG9MaXN0cyhmaW5hbEFycmF5LCBhcnJheVRvZG9zKTtcbiAgICByZXR1cm4gZmluYWxBcnJheTtcbiAgICBjb25zb2xlLmxvZygncHJpbnRpbmcgdGhlIGNvbnZlcnRlZCBhcnJheScpXG4gICAgY29uc29sZS5sb2coZmluYWxBcnJheSk7XG59IiwiaW1wb3J0IExpc3QgZnJvbSAnLi9saXN0J1xuaW1wb3J0IFRvZG8gZnJvbSAnLi90b2RvJ1xuaW1wb3J0IHtsaXN0cywgYWRkTmV3TGlzdEludGVyZmFjZSwgcmVtb3ZlRXhpc3RpbmdNYXJrZXIsIHVwZGF0ZUxpc3RzQW5kVG9kb3MsIHVwZGF0ZUFycmF5QW5kVG9kb30gZnJvbSAnLi9tYW5hZ2VMaXN0SW50ZXJmYWNlJ1xuaW1wb3J0IHthZGROZXdUb2RvSW50ZXJmYWNlLCBjaGFuZ2VUb2RvSGVhZGVyLCBzaG93TGlzdHNUb2RvcywgZGVsZXRlUmVsYXRlZFRvZG99IGZyb20gJy4vbWFuYWdlVG9kb0ludGVyZmFjZSdcbmltcG9ydCB7c2F2ZURhdGEsIGxvYWREYXRhfSBmcm9tICcuL3N0b3JhZ2VNYW5hZ2VtZW50J1xuXG5sZXQgYWN0aXZlTGlzdE51bWJlciA9ICcwJztcblxuXG5mdW5jdGlvbiBhZGRMaXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBsZXQgbmV3TGlzdCA9IG5ldyBMaXN0KG5ld0xpc3RpbnB1dC52YWx1ZSwgW10sIGxpc3RzLmxlbmd0aCk7XG4gICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgY29uc3QgbmV3TGlzdERPTSA9IGFkZE5ld0xpc3RJbnRlcmZhY2UobmV3TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtdG9kbycpKTtcblxuICAgIC8vIG1hbmFnZSB0b2RvIGludGVyZmFjZVxuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbmV3TGlzdC5nZXRMaXN0TnVtYmVyLCBuZXdMaXN0LmdldFRpdGxlKTtcbiAgICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbmV3TGlzdC5nZXRMaXN0TnVtYmVyLnRvU3RyaW5nKCkpO1xuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBuZXdMaXN0LmdldExpc3ROdW1iZXIudG9TdHJpbmcoKTtcbiAgICBuZXdMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG4gICAgc2F2ZURhdGEobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIGFkZF9hX1RvZG8oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludCh0b2RvSGVhZGVyLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKSk7XG4gICAgY29uc3QgdG9kb051bWJlciA9IGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5sZW5ndGg7XG4gICAgbGV0IG5ld1RvZG8gPSBuZXcgVG9kbyh0b2RvTmFtZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUsIGR1ZURhdGUudmFsdWUsIHByaW9yaXR5LnZhbHVlLCBsaXN0TnVtYmVyLCAwLCB0b2RvTnVtYmVyKTtcbiAgICBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MucHVzaChuZXdUb2RvKTtcblxuXG4gICAgLy8gYnJpbmcgdGhlIHRvZG8gaW50ZXJmYWNlXG4gICAgY29uc3QgbmV3VG9kb0RPTSA9IGFkZE5ld1RvZG9JbnRlcmZhY2UoYWxsVG9kbywgbmV3VG9kbyk7XG4gICAgbmV3VG9kb0RPTS5vbmNsaWNrID0gbW9kaWZ5VG9kbztcblxuICAgIC8vIGhpZGUgbW9kYWxcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBjb25zb2xlLnRhYmxlKGxpc3RzKTtcbiAgICBzYXZlRGF0YShsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gbWFrZUxpc3RBY3RpdmUoZSkge1xuICAgIC8vIGhhbmRsZSBkZWxldGUsIHVwLCBkb3duLCBjb21wbGV0ZVxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGRlbGV0ZUVsZW1lbnQodGhpcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgdGhlIGxpc3RPYmplY3RcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICAgICAgYWN0aXZlTGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgfVxuXG4gICAgY29uc29sZS50YWJsZShsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gc2hvd1JlbGF0ZWRUb2Rvcyh4LCBsaXN0Tm8pe1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9ICdBZGQgYSBMaXN0JztcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSAncGxhY2Vob2xkZXInO1xuICAgIH1cbiAgICBlbHNlIGlmIChsaXN0Tm8gPT09IGAwYCkge1xuICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIjBcIl0nKTtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1swXS5nZXRUaXRsZSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKHgsIGAwYCk7XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSAnMCc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7cGFyc2VJbnQobGlzdE5vKS0xfVwiXWApO1xuICAgICAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0Tm8sIGxpc3RzW3BhcnNlSW50KGxpc3RObyktMV0uZ2V0VGl0bGUpO1xuICAgICAgICBzaG93TGlzdHNUb2Rvcyh4LCBgJHtwYXJzZUludChsaXN0Tm8pLTF9YCk7XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBgJHtwYXJzZUludChsaXN0Tm8pLTF9YDtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gZGVsZXRlRWxlbWVudChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LnZhbHVlID09PSAnYS1saXN0Jykge1xuICAgICAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICAvLyByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgYWxsTGlzdC5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLWxpc3QnKSk7XG4gICAgICAgIGxldCB4ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpKTtcbiAgICAgICAgZGVsZXRlUmVsYXRlZFRvZG8oYWxsVG9kbywgeCwgaW5kZXgpO1xuICAgICAgICB4ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpKTtcbiAgICAgICAgdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGluZGV4LCB4KTtcbiAgICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBpbmRleDtcbiAgICB9XG4gICAgc2F2ZURhdGEobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIG1vZGlmeVRvZG8oZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSB0b2RvIGZyb20gdGhlIGxpc3RzIEFycmF5IGFuZCB0aGUgZG9tXG4gICAgICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5zcGxpY2UocGFyc2VJbnQodG9kb051bWJlciksIDEpO1xuICAgICAgICBjb25zb2xlLnRhYmxlKGxpc3RzKTtcbiAgICAgICAgYWxsVG9kby5yZW1vdmVDaGlsZCh0aGlzKTtcblxuICAgICAgICAvLyB1cGRhdGUgdG9kbyBhcnJheVxuICAgICAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcyk7XG4gICAgfVxuICAgIHNhdmVEYXRhKGxpc3RzKTtcbn1cblxuXG4vLyB0aGVyZSBpcyBhbiBlZGdlIGNhc2Vcbi8vIDEuIHdoYXQgaWYgdGhlIHBhZ2UgaXMgZW1wdHk/XG4vLyAyLiBcblxuXG4vLyBmdW5jdGlvbiBsb2FkUGFnZShhbkFycmF5KSB7XG4vLyAgICAgZm9yIChsZXQgbGlzdCBvZiBhbkFycmF5KSB7XG4vLyAgICAgICAgIGlmIChsaXN0LmdldExpc3ROdW1iZXIgIT09IDApIHtcbi8vICAgICAgICAgICAgIGFkZE5ld0xpc3RJbnRlcmZhY2UobGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbi8vICAgICAgICAgfVxuXG4vLyAgICAgfVxuLy8gfVxuXG5cbmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuXG5cblxuLy8gIyMjIyMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjIyMjIyMjI1xuXG5cbi8vIEFsbCBnbG9iYWwgdmFyaWFibGVzIGFuZCBldmVudExpc3RlbmVyc1xuY29uc3QgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCcpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtbmFtZScpO1xuY29uc3QgbGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1mb3JtJyk7XG5jb25zdCBhZGROZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1uZXctbGlzdCcpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1saXN0LW1vZGFsJyk7XG5jb25zdCBhZGRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tbW9kYWwnKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybScpO1xuY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1uYW1lJyk7XG5jb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZS1kYXRlJyk7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbmNvbnN0IGFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRvZG8nKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1oZWFkZXInKTtcblxuXG5cbi8vIGxvYWRpbmcgdGhlIGV4aXN0aW5nIGRhdGFcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaHRtbC1wYWdlJykpIHtcbiAgICBsZXQgYW5BcnJheSA9IGxvYWREYXRhKCk7XG4gICAgLy8gbG9hZFBhZ2UoYW5BcnJheSk7XG59XG5lbHNlIHtcbiAgICAvLyBBZGRpbmcgZGVmYXVsdCBsaXN0XG4gICAgbGV0IGRlZmF1bHRMaXN0ID0gbmV3IExpc3QoJ015IERheScsIFtdLCAwKTtcbiAgICBhZGROZXdMaXN0SW50ZXJmYWNlKGRlZmF1bHRMaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwpO1xuICAgIHNhdmVEYXRhKGxpc3RzKTtcbn1cblxuXG5jb25zdCBkZWZhdWx0TGlzdERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtbGlzdCAuYS1saXN0Jyk7XG5jb25zdCBhbGxUb2RvRE9NUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJyk7XG5cbmFkZFRvZG8ub25jbGljayA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufVxuXG5hZGROZXdMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59KVxuXG5cbmxpc3RGb3JtLm9uc3VibWl0ID0gYWRkTGlzdDtcbmxpc3RGb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gICAgbmV3TGlzdE1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xufVxuXG50b2RvRm9ybS5vbnN1Ym1pdCA9IGFkZF9hX1RvZG87XG50b2RvRm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld1RvZG9Nb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxuZGVmYXVsdExpc3RET00uZm9yRWFjaChsaXN0ID0+IHtcbiAgICBsaXN0Lm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbn0pO1xuXG5hbGxUb2RvRE9NUy5mb3JFYWNoKHRvZG8gPT4ge1xuICAgIHRvZG8ub25jbGljayA9IG1vZGlmeVRvZG87XG59KTsiXSwibmFtZXMiOlsiTGlzdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJ0b2RvcyIsImxpc3ROdW1iZXIiLCJ0aGlzIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJ2YWx1ZSIsImdldFRpdGxlIiwiZ2V0VG9kb3MiLCJzZXRUb2RvcyIsInNldFRpdGxlIiwiYWRkTmV3TGlzdCIsInRoZVRvZG8iLCJwdXNoIiwiVG9kbyIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGVkIiwidG9kb051bWJlciIsImdldFRvZG9OdW1iZXIiLCJzZXRUb2RvTnVtYmVyIiwiZ2V0SXNDb21wbGV0ZWQiLCJjaGFuZ2VDb21wbGV0ZVN0YXR1cyIsImdldERlc2NyaXB0aW9uIiwiZ2V0RHVlRGF0ZSIsImdldFByaW9yaXR5Iiwic2V0RGVzY3JpcHRpb24iLCJzZXREdWVEYXRlIiwic2V0UHJpb3JpdHkiLCJsaXN0cyIsImFkZE5ld0xpc3RJbnRlcmZhY2UiLCJsaXN0T2JqZWN0IiwiY29udGFpbmVyIiwiaW5zZXJ0X2JlZm9yZSIsImFMaXN0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0QmVmb3JlIiwibGVmdCIsImFwcGVuZENoaWxkIiwicmlnaHQiLCJpY29uMSIsImxpc3RUaXRsZSIsInRleHRDb250ZW50IiwiaWNvbjIiLCJpY29uMyIsImljb240IiwiaWNvbjUiLCJyZW1vdmVFeGlzdGluZ01hcmtlciIsImxlbmd0aCIsImZpcnN0TGlzdCIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwibmV4dExpc3QiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ1cGRhdGVBcnJheUFuZFRvZG8iLCJhbGxUb2RvcyIsImFsbFRvZG9JbmRleCIsImkiLCJ0b2RvX25vIiwibGlzdF9ubyIsIngiLCJ0aGVET00iLCJjaGFuZ2VUb2RvSGVhZGVyIiwidG9kb0hlYWRlciIsInNob3dMaXN0c1RvZG9zIiwidG9kbyIsInNhdmVUb2RvIiwiYW5BcnJheSIsImwiLCJ0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInNhdmVEYXRhIiwiY2xlYXIiLCJlbGVtIiwiYWN0aXZlTGlzdE51bWJlciIsIm1ha2VMaXN0QWN0aXZlIiwiZSIsInRhcmdldCIsImVsZW1lbnQiLCJpbmRleCIsImFsbExpc3QiLCJyZW1vdmVDaGlsZCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkZWxldGVSZWxhdGVkVG9kbyIsImFsbFRvZG8iLCJzcGxpY2UiLCJwYXJzZUludCIsImxpc3QiLCJ1cGRhdGVMaXN0c0FuZFRvZG9zIiwibGlzdE5vIiwicXVlcnlTZWxlY3RvciIsInNob3dSZWxhdGVkVG9kb3MiLCJkZWxldGVFbGVtZW50IiwibGFzdEVsZW1lbnRDaGlsZCIsImNvbnNvbGUiLCJ0YWJsZSIsIm1vZGlmeVRvZG8iLCJuZXdMaXN0aW5wdXQiLCJsaXN0Rm9ybSIsIm5ld0xpc3RNb2RhbCIsImFkZFRvZG8iLCJuZXdUb2RvTW9kYWwiLCJ0b2RvRm9ybSIsInRvZG9OYW1lIiwiZ2V0SXRlbSIsImFycmF5TGlzdHMiLCJhcnJheVRvZG9zIiwiaW5jbHVkZXMiLCJsaXN0RGV0YWlscyIsInNwbGl0IiwibmV3TGlzdCIsInRvZG9EZXRhaWxzIiwibmV3VG9kbyIsImZpbmFsQXJyYXkiLCJzb3J0IiwiYSIsImIiLCJzb3J0QXJyYXlzIiwiaW5zZXJ0VG9kb3NUb0xpc3RzIiwibG9hZERhdGEiLCJkZWZhdWx0TGlzdERPTSIsImFsbFRvZG9ET01TIiwib25jbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbnN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwibmV3TGlzdERPTSIsInRvU3RyaW5nIiwicmVzZXQiLCJsb2ciLCJvbnJlc2V0IiwibmV3VG9kb0RPTSIsImFUb2RvIiwiY29sbGFwc2UiLCJjb2xsYXBzZUltZyIsImlucHV0MSIsInRpdGxlVG9kbyIsImFkZE5ld1RvZG9JbnRlcmZhY2UiLCJmb3JFYWNoIl0sInNvdXJjZVJvb3QiOiIifQ==