(()=>{"use strict";class t{constructor(t,e,i){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,o,l,n){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.listNumber=o,this.completed=l,this.todoNumber=n}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function o(t){let e=0;for(let s=0;s<i.length;s++)if(i[s].setListNumber=s,0!==i[s].getTodos.length){let o=0;const l=i[s].getListNumber;for(let n of i[s].getTodos){n.setListNumber=s,n.setTodoNumber=o;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${l}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${o}`),o++,e++}}}let l=[];function n(t,e,i){t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function r(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function c(t,e){let i=0;for(let s of t){let t=s.getTitle,o=s.getDescription,l=s.dueDate,n=s.getPriority,r=s.getListNumber,c=s.getIsCompleted,d=s.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${o},${l},${n},${r},${c},${d}`),i++}}function d(t){let e=0;for(let i of t){let t=i.getTitle,s=i.getListNumber;localStorage.setItem(`list_${e}`,`${t},${s}`),c(i.getTodos,e),e++}console.log(localStorage),u(t)}function u(t){for(let t in localStorage)t.includes("list")&&!t.includes("todo")?console.log("printing a list"):t.includes("todo")&&console.log("printing a todo");return t}function a(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");b.removeChild(t);const s=Array.from(document.querySelectorAll(".a-list"));let l=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let s of e)s.getAttribute("list-number")===i&&t.removeChild(s)}(T,l,e),l=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,s){i.splice(parseInt(e),1);let l=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${l}`),l++;o(s)}(s,e,l),m(l,e),$.getAttribute("list-number")===e&&m(l,e)}d(i)}(this);else{s(b),this.setAttribute("id","active-list");let e=t.target.getAttribute("list-number");n($,e,this.firstElementChild.lastElementChild.textContent),r(Array.from(document.querySelectorAll(".a-todo")),e)}console.log(i)}function m(t,e){0===i.length?($.firstElementChild.textContent="Add a List",$.firstElementChild.nextElementSibling.textContent=""):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),n($,e,i[0].getTitle),r(t,"0")):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),n($,e,i[parseInt(e)-1].getTitle),r(t,""+(parseInt(e)-1)))}function g(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.log(i),T.removeChild(this),o(Array.from(document.querySelectorAll(".all-todo .a-todo")))}d()}localStorage.clear();let p=new t("My Day",[],0);i.push(p),localStorage.getItem("html-page")&&u();const b=document.querySelector(".all-list"),h=document.querySelector("#list-name"),A=document.querySelector(".list-form"),f=document.querySelector(".add-new-list"),v=document.querySelector(".new-list-modal"),y=document.querySelector(".add-todo"),C=document.querySelector(".new-todo-modal"),L=document.querySelector(".todo-form"),E=document.querySelector("#todo-name"),S=document.querySelector("#due-date"),N=document.querySelector("#priority"),q=document.querySelector("#description"),T=document.querySelector(".all-todo"),$=document.querySelector(".todo-header"),D=document.querySelectorAll(".all-list .a-list"),I=document.querySelectorAll(".all-todo .a-todo");y.onclick=()=>{C.removeAttribute("id")},f.addEventListener("click",(()=>{v.removeAttribute("id")})),A.onsubmit=function(e){e.preventDefault();let o=new t(h.value,[],i.length);s(b),function(t,e,s){i.push(t);const o=document.createElement("div");o.classList.add("a-list"),o.setAttribute("list-number",`${t.getListNumber}`),o.setAttribute("id","active-list"),e.insertBefore(o,s);const l=document.createElement("div");l.classList.add("left"),o.appendChild(l);const n=document.createElement("div");n.classList.add("right"),o.appendChild(n);const r=document.createElement("img");r.classList.add("icon"),r.setAttribute("src","icons/plus.png"),l.appendChild(r);const c=document.createElement("div");c.classList.add("list-title"),c.textContent=t.getTitle,l.appendChild(c);const d=document.createElement("img");d.classList.add("icon"),d.setAttribute("src","icons/plus.png"),n.appendChild(d);const u=document.createElement("img");u.classList.add("icon"),u.setAttribute("src","icons/plus.png"),n.appendChild(u);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),n.appendChild(a);const m=document.createElement("img");m.classList.add("delete"),m.setAttribute("src","icons/plus.png"),n.appendChild(m)}(o,b,v);const l=Array.from(document.querySelectorAll(".a-todo"));n($,o.getListNumber,o.getTitle),r(l,o.getListNumber),document.getElementById("active-list").onclick=a,e.target.reset(),v.setAttribute("id","hide"),console.log(i),d(i)},A.onreset=()=>{v.setAttribute("id","hide")},L.onsubmit=function(t){t.preventDefault();const s=$.getAttribute("list-number"),o=i[parseInt(s)].getTodos.length;let n=new e(E.value,q.value,S.value,N.value,s,0,o);i[parseInt(s)].getTodos.push(n);const r=function(t,e){l.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const o=document.createElement("div");o.classList.add("description"),o.textContent=e.getDescription,i.appendChild(o);const n=document.createElement("div");n.classList.add("collapse"),i.appendChild(n);const r=document.createElement("div");r.classList.add("left"),s.appendChild(r);const c=document.createElement("div");c.classList.add("right"),s.appendChild(c);const d=document.createElement("img");d.setAttribute("src","icons/plus.png"),d.setAttribute("alt","collapse icon"),n.appendChild(d);const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id","todo-checkbox"),u.setAttribute("name","todo-checkbox"),r.appendChild(u);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,r.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),m.classList.add("icon"),c.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),g.classList.add("icon"),c.appendChild(g);const p=document.createElement("img");p.setAttribute("src","icons/plus.png"),p.classList.add("icon"),c.appendChild(p);const b=document.createElement("img");return b.setAttribute("src","icons/plus.png"),b.classList.add("delete"),c.appendChild(b),i}(T,n);r.onclick=g,C.setAttribute("id","hide"),t.target.reset(),console.log(i),d(i)},L.onreset=()=>{C.setAttribute("id","hide")},D.forEach((t=>{t.onclick=a})),I.forEach((t=>{t.onclick=g}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3VELFFBQ1Q3RCxRQUFRQyxJQUFJbEMsR0FDWjhCLEVBQVM5QixFQUNiLEVBdUlBcUUsRUFBUzBCLFFBQVUsS0FDZjNCLEVBQWFsRCxhQUFhLEtBQU0sT0FBTyxFQUczQ3FELEVBQWVpQyxTQUFRbkQsSUFDbkJBLEVBQUtvQixRQUFVcEMsQ0FBYyxJQUdqQ21DLEVBQVlnQyxTQUFRakYsSUFDaEJBLEVBQUtrRCxRQUFVYixDQUFVLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlTGlzdEludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZVRvZG9JbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9zdG9yYWdlTWFuYWdlbWVudC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdG9kb3MsIGxpc3ROdW1iZXIpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnRvZG9zID0gdG9kb3M7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIC8vIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIC8vIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xuICAgIH1cblxuICAgIC8vIGdldCBnZXRBY3RpdmUoKSB7XG4gICAgLy8gICAgIHJldHVybiB0aGlzLmFjdGl2ZTtcbiAgICAvLyB9XG4gICAgLy8gc2V0IHNldEFjdGl2ZSh2YWx1ZSkge1xuICAgIC8vICAgICB0aGlzLmFjdGl2ZSA9IHZhbHVlO1xuICAgIC8vIH1cblxuICAgIC8vIGdldCBnZXREdWVEYXRlKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5kdWVEYXRlO1xuICAgIC8vIH1cblxuICAgIC8vIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgLy8gICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIC8vIH1cblxuICAgIGdldCBnZXRMaXN0TnVtYmVyKCkge3JldHVybiB0aGlzLmxpc3ROdW1iZXJ9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7cmV0dXJuIHRoaXMudGl0bGV9XG5cbiAgICBnZXQgZ2V0VG9kb3MoKSB7cmV0dXJuIHRoaXMudG9kb3N9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXRUb2Rvcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgYWRkTmV3TGlzdCh0aGVUb2RvKSB7XG4gICAgICAgIHRoaXMudG9kb3MucHVzaCh0aGVUb2RvKTtcbiAgICB9XG59IiwiXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9kbyB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBsaXN0TnVtYmVyLCBjb21wbGV0ZWQsIHRvZG9OdW1iZXIpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBjb21wbGV0ZWQ7XG4gICAgICAgIHRoaXMudG9kb051bWJlciA9IHRvZG9OdW1iZXI7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRvZG9OdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvZG9OdW1iZXI7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9OdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldElzQ29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZWQ7XG4gICAgfVxuXG4gICAgY2hhbmdlQ29tcGxldGVTdGF0dXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGdldExpc3ROdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3ROdW1iZXI7XG4gICAgfVxuXG4gICAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aXRsZTtcbiAgICB9XG4gICAgZ2V0IGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IGdldER1ZURhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmR1ZURhdGU7XG4gICAgfVxuICAgIGdldCBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHk7XG4gICAgfVxuXG4gICAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0RGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0RHVlRGF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0IHNldFByaW9yaXR5KHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSB2YWx1ZTtcbiAgICB9XG59IiwiXG5cbmV4cG9ydCBsZXQgbGlzdHMgPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld0xpc3RJbnRlcmZhY2UobGlzdE9iamVjdCwgY29udGFpbmVyLCBpbnNlcnRfYmVmb3JlKSB7XG5cbiAgICBsaXN0cy5wdXNoKGxpc3RPYmplY3QpO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhTGlzdC5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7bGlzdE9iamVjdC5nZXRMaXN0TnVtYmVyfWApO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGFMaXN0LCBpbnNlcnRfYmVmb3JlKTtcblxuXG4gICAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKGxlZnQpO1xuXG4gICAgY29uc3QgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByaWdodC5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKHJpZ2h0KTtcblxuICAgIGNvbnN0IGljb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjEuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChpY29uMSk7XG5cbiAgICBjb25zdCBsaXN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsaXN0VGl0bGUuY2xhc3NMaXN0LmFkZCgnbGlzdC10aXRsZScpO1xuICAgIGxpc3RUaXRsZS50ZXh0Q29udGVudCA9IGxpc3RPYmplY3QuZ2V0VGl0bGU7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChsaXN0VGl0bGUpO1xuXG4gICAgY29uc3QgaWNvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjIuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMik7XG5cbiAgICBjb25zdCBpY29uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24zLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjQpO1xuXG4gICAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICBpY29uNS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb241KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoY29udGFpbmVyKSB7XG4gICAgaWYgKGxpc3RzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGNvbnN0IGZpcnN0TGlzdCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBpZiAoZmlyc3RMaXN0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FjdGl2ZS1saXN0Jykge1xuICAgICAgICBmaXJzdExpc3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG5leHRMaXN0ID0gZmlyc3RMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpe1xuICAgICAgICAgICAgICAgIG5leHRMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRMaXN0ID0gbmV4dExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpIHtcbiAgICBsZXQgYWxsVG9kb0luZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpc3RzW2ldLnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICBpZiAobGlzdHNbaV0uZ2V0VG9kb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0b2RvX25vID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGxpc3Rfbm8gPSBsaXN0c1tpXS5nZXRMaXN0TnVtYmVyO1xuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiBsaXN0c1tpXS5nZXRUb2Rvcykge1xuICAgICAgICAgICAgICAgIHguc2V0TGlzdE51bWJlciA9IGk7XG4gICAgICAgICAgICAgICAgeC5zZXRUb2RvTnVtYmVyID0gdG9kb19ubztcbiAgICAgICAgICAgICAgICBsZXQgdGhlRE9NID0gYWxsVG9kb3NbYWxsVG9kb0luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGVET00ucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICAgICAgICAgIHRoZURPTS5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7bGlzdF9ub31gKTtcbiAgICAgICAgICAgICAgICB0aGVET00ucmVtb3ZlQXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuICAgICAgICAgICAgICAgIHRoZURPTS5zZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJywgYCR7dG9kb19ub31gKTtcbiAgICAgICAgICAgICAgICB0b2RvX25vKys7XG4gICAgICAgICAgICAgICAgYWxsVG9kb0luZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgbGlzdE51bWJlciwgYWxsVG9kb3MpIHtcblxuICAgIGxpc3RzLnNwbGljZShwYXJzZUludChsaXN0TnVtYmVyKSwgMSk7XG4gICAgLy8gIHVwZGF0ZSBkb21zXG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIGZvciAobGV0IGxpc3Qgb2YgY29udGFpbmVyKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBsaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtpbmRleH1gKTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgQXJyYXkgYW5kIHRvZG8gRE9NJ3NcbiAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xufVxuXG5cbi8vIDxkaXYgY2xhc3M9XCJhLWxpc3RcIj5cbi8vICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuLy8gICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwicGljXCI+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LXRpdGxlXCI+TXkgRGF5PC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJFXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJVXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEZWxcIj5cbi8vICAgICA8L2Rpdj5cbi8vIDwvZGl2PlxuIiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFUb2RvLmNsYXNzTGlzdC5hZGQoJ2EtdG9kbycpO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2NvbGxhcHNlIGljb24nKTtcbiAgICBjb2xsYXBzZS5hcHBlbmRDaGlsZChjb2xsYXBzZUltZyk7XG5cbiAgICBjb25zdCBpbnB1dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgLy8gaW5wdXQxLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGlucHV0MSk7XG5cbiAgICBjb25zdCB0aXRsZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZVRvZG8udGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKHRpdGxlVG9kbyk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjIuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICAgIGNvbnN0IGljb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjMuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uMy5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjMpO1xuXG4gICAgY29uc3QgaWNvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjUuY2xhc3NMaXN0LmFkZCgnZGVsZXRlJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xuXG4gICAgcmV0dXJuIGFUb2RvO1xufVxuXG5cbi8vIGNoYW5nZSB0b2RvIGhlYWRlclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGl0bGUpIHtcbiAgICB0b2RvSGVhZGVyLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0TnVtYmVyfWApO1xuICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZTtcbn1cblxuLy8gc2hvdyBhbGwgdG9kb3Mgb2YgYSBwYXJ0aWN1bGFyIGxpc3RcbmV4cG9ydCBmdW5jdGlvbiBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbGlzdE51bWJlcikge1xuICAgIC8vIG1ldGhvZCBkZXNjcmlwdGlvbiBnb2VzIGhlcmVcbiAgICBpZiAoYWxsVG9kb3MgPT09IG51bGwpIHJldHVyblxuICAgIGZvciAobGV0IHRvZG8gb2YgYWxsVG9kb3MpIHtcbiAgICAgICAgaWYgKHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpID09PSBsaXN0TnVtYmVyKSB7XG4gICAgICAgICAgICB0b2RvLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvZG8uc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVJlbGF0ZWRUb2RvKGNvbnRhaW5lciwgYWxsVG9kb3MsIGxpc3ROdW1iZXIpe1xuICAgIGZvciAobGV0IHRvZG8gb2YgYWxsVG9kb3MpIHtcbiAgICAgICAgY29uc3QgbGlzdF9udW0gPSB0b2RvLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgaWYgKGxpc3RfbnVtID09PSBsaXN0TnVtYmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQodG9kbyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIDxkaXYgY2xhc3M9XCJhLXRvZG9cIj5cbi8vICAgICA8ZGl2IGNsYXNzPVwiYS1saXN0XCI+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiXCI+XG4vLyAgICAgICAgICAgICA8ZGl2Pm5hbWUgb2YgdGhlIHRvZG88L2Rpdj5cbi8vICAgICAgICAgPC9kaXY+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkVcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJVXCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiRFwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRlbFwiPlxuLy8gICAgICAgICA8L2Rpdj5cbi8vICAgICA8L2Rpdj5cbi8vICAgICA8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIiBpZD1cImhpZGVcIj5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdC4gRXNzZSBpcHNhbSBmdWdpYXQgZXVtIGhpYyBpcHN1bSBkb2xvcnVtIGJsYW5kaXRpaXMgaXVzdG8gZGVsZW5pdGkgcGVyZmVyZW5kaXMgZW5pbSBuaXNpIGFkaXBpc2NpIGl1cmUgbmF0dXMgYWQgbWF4aW1lLCBhbWV0LCBjb3Jwb3JpcyBxdWlidXNkYW0gYWxpcXVhbSE8L2Rpdj5cbi8vICAgICA8ZGl2IGNsYXNzPVwiY29sbGFwc2VcIj5cbi8vICAgICAgICAgPGltZyBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cImNvbGxhcHNlIGljb25cIj5cbi8vICAgICA8L2Rpdj5cbi8vIDwvZGl2PlxuXG4iLCJpbXBvcnQgTGlzdCBmcm9tICcuL2xpc3QnXG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8nXG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlVG9kbyhhbkFycmF5LCBsKSB7XG4gICAgbGV0IHQgPSAwO1xuICAgIGZvciAobGV0IHRvZG8gb2YgYW5BcnJheSkge1xuICAgICAgICBsZXQgdGl0bGUgPSB0b2RvLmdldFRpdGxlO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSB0b2RvLmdldERlc2NyaXB0aW9uO1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IHRvZG8uZHVlRGF0ZTtcbiAgICAgICAgbGV0IHByaW9yaXR5ID0gdG9kby5nZXRQcmlvcml0eTtcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSB0b2RvLmdldExpc3ROdW1iZXI7XG4gICAgICAgIGxldCBjb21wbGV0ZWQgPSB0b2RvLmdldElzQ29tcGxldGVkO1xuICAgICAgICBsZXQgdG9kb051bWJlciA9IHRvZG8uZ2V0VG9kb051bWJlcjtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGxpc3RfJHtsfV90b2RvXyR7dH1gLCBgJHt0aXRsZX0sJHtkZXNjcmlwdGlvbn0sJHtkdWVEYXRlfSwke3ByaW9yaXR5fSwke2xpc3ROdW1iZXJ9LCR7Y29tcGxldGVkfSwke3RvZG9OdW1iZXJ9YCk7XG4gICAgICAgIHQrKztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVEYXRhKGxpc3RzKSB7XG4gICAgbGV0IGwgPSAwO1xuXG4gICAgLy8gc2F2ZSBsaXN0c1xuICAgIGZvciAobGV0IGVsZW0gb2YgbGlzdHMpIHtcbiAgICAgICAgbGV0IGxpc3RUaXRsZSA9IGVsZW0uZ2V0VGl0bGU7XG4gICAgICAgIGxldCBsaXN0TnVtYmVyID0gZWxlbS5nZXRMaXN0TnVtYmVyO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGlzdF8ke2x9YCwgYCR7bGlzdFRpdGxlfSwke2xpc3ROdW1iZXJ9YCk7XG4gICAgICAgIHNhdmVUb2RvKGVsZW0uZ2V0VG9kb3MsIGwpO1xuICAgICAgICBsKys7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZSk7XG4gICAgbG9hZERhdGEobGlzdHMpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRGF0YShsaXN0cykge1xuICAgIC8vIGxldCBhcnJheUxpc3RzID0gW107XG4gICAgZm9yIChsZXQgZWxlbSBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgaWYgKGVsZW0uaW5jbHVkZXMoJ2xpc3QnKSAmJiAhZWxlbS5pbmNsdWRlcygndG9kbycpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHJpbnRpbmcgYSBsaXN0JylcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbGVtLmluY2x1ZGVzKCd0b2RvJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcmludGluZyBhIHRvZG8nKVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaXN0cztcbn0iLCJpbXBvcnQgTGlzdCBmcm9tICcuL2xpc3QnXG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8nXG5pbXBvcnQge2xpc3RzLCBhZGROZXdMaXN0SW50ZXJmYWNlLCByZW1vdmVFeGlzdGluZ01hcmtlciwgdXBkYXRlTGlzdHNBbmRUb2RvcywgdXBkYXRlQXJyYXlBbmRUb2RvfSBmcm9tICcuL21hbmFnZUxpc3RJbnRlcmZhY2UnXG5pbXBvcnQge2FkZE5ld1RvZG9JbnRlcmZhY2UsIGNoYW5nZVRvZG9IZWFkZXIsIHNob3dMaXN0c1RvZG9zLCBkZWxldGVSZWxhdGVkVG9kb30gZnJvbSAnLi9tYW5hZ2VUb2RvSW50ZXJmYWNlJ1xuaW1wb3J0IHtzYXZlRGF0YSwgbG9hZERhdGF9IGZyb20gJy4vc3RvcmFnZU1hbmFnZW1lbnQnXG5cblxuXG5mdW5jdGlvbiBhZGRMaXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBsZXQgbmV3TGlzdCA9IG5ldyBMaXN0KG5ld0xpc3RpbnB1dC52YWx1ZSwgW10sIGxpc3RzLmxlbmd0aCk7XG4gICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgYWRkTmV3TGlzdEludGVyZmFjZShuZXdMaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwsIHRvZG9IZWFkZXIpO1xuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuXG4gICAgLy8gbWFuYWdlIHRvZG8gaW50ZXJmYWNlXG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBuZXdMaXN0LmdldExpc3ROdW1iZXIsIG5ld0xpc3QuZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBuZXdMaXN0LmdldExpc3ROdW1iZXIpO1xuICAgIGNvbnN0IG5ld0xpc3RET00gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWN0aXZlLWxpc3QnKTtcbiAgICBuZXdMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG4gICAgc2F2ZURhdGEobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIGFkZF9hX1RvZG8oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0b2RvSGVhZGVyLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICBjb25zdCB0b2RvTnVtYmVyID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLmxlbmd0aDtcbiAgICBsZXQgbmV3VG9kbyA9IG5ldyBUb2RvKHRvZG9OYW1lLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZHVlRGF0ZS52YWx1ZSwgcHJpb3JpdHkudmFsdWUsIGxpc3ROdW1iZXIsIDAsIHRvZG9OdW1iZXIpO1xuICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5wdXNoKG5ld1RvZG8pO1xuXG5cbiAgICAvLyBicmluZyB0aGUgdG9kbyBpbnRlcmZhY2VcbiAgICBjb25zdCBuZXdUb2RvRE9NID0gYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCBuZXdUb2RvKTtcbiAgICBuZXdUb2RvRE9NLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xuXG4gICAgLy8gaGlkZSBtb2RhbFxuICAgIG5ld1RvZG9Nb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbiAgICBzYXZlRGF0YShsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gbWFrZUxpc3RBY3RpdmUoZSkge1xuICAgIC8vIGhhbmRsZSBkZWxldGUsIHVwLCBkb3duLCBjb21wbGV0ZVxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGRlbGV0ZUVsZW1lbnQodGhpcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgdGhlIGxpc3RPYmplY3RcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gc2hvd1JlbGF0ZWRUb2Rvcyh4LCBsaXN0Tm8pe1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9ICdBZGQgYSBMaXN0JztcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSAnJztcbiAgICB9XG4gICAgZWxzZSBpZiAobGlzdE5vID09PSBgMGApIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIwXCJdJyk7XG4gICAgICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbMF0uZ2V0VGl0bGUpO1xuICAgICAgICBzaG93TGlzdHNUb2Rvcyh4LCBgMGApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke3BhcnNlSW50KGxpc3RObyktMX1cIl1gKTtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1twYXJzZUludChsaXN0Tm8pLTFdLmdldFRpdGxlKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoeCwgYCR7cGFyc2VJbnQobGlzdE5vKS0xfWApO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBkZWxldGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QudmFsdWUgPT09ICdhLWxpc3QnKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIC8vIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgICAgICBhbGxMaXN0LnJlbW92ZUNoaWxkKGVsZW1lbnQpXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtbGlzdCcpKTtcbiAgICAgICAgbGV0IHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICBkZWxldGVSZWxhdGVkVG9kbyhhbGxUb2RvLCB4LCBpbmRleCk7XG4gICAgICAgIHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgaW5kZXgsIHgpO1xuICAgICAgICBzaG93UmVsYXRlZFRvZG9zKHgsIGluZGV4KTtcbiAgICAgICAgaWYgKHRvZG9IZWFkZXIuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpID09PSBpbmRleCkge1xuICAgICAgICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2F2ZURhdGEobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIG1vZGlmeVRvZG8oZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSB0b2RvIGZyb20gdGhlIGxpc3RzIEFycmF5IGFuZCB0aGUgZG9tXG4gICAgICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5zcGxpY2UocGFyc2VJbnQodG9kb051bWJlciksIDEpO1xuICAgICAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG4gICAgICAgIGFsbFRvZG8ucmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRvZG8gYXJyYXlcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xuICAgIH1cbiAgICBzYXZlRGF0YSgpO1xufVxuXG5cbmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuXG5cblxuXG5cbi8vIEFkZGluZyBkZWZhdWx0IGxpc3RcbmxldCBkZWZhdWx0TGlzdCA9IG5ldyBMaXN0KCdNeSBEYXknLCBbXSwgMCk7XG5saXN0cy5wdXNoKGRlZmF1bHRMaXN0KTtcblxuXG5cblxuLy8gIyMjIyMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjIyMjIyMjI1xuXG5cbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaHRtbC1wYWdlJykpIHtcbiAgICBsb2FkRGF0YSgpO1xufVxuXG5cbi8vIEFsbCBnbG9iYWwgdmFyaWFibGVzIGFuZCBldmVudExpc3RlbmVyc1xuY29uc3QgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCcpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtbmFtZScpO1xuY29uc3QgbGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1mb3JtJyk7XG5jb25zdCBhZGROZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1uZXctbGlzdCcpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1saXN0LW1vZGFsJyk7XG5jb25zdCBhZGRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tbW9kYWwnKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybScpO1xuY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1uYW1lJyk7XG5jb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZS1kYXRlJyk7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbmNvbnN0IGFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRvZG8nKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1oZWFkZXInKTtcblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLWxpc3QgLmEtbGlzdCcpO1xuY29uc3QgYWxsVG9kb0RPTVMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpO1xuXG5hZGRUb2RvLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn1cblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufSlcblxuXG5saXN0Rm9ybS5vbnN1Ym1pdCA9IGFkZExpc3Q7XG5saXN0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxudG9kb0Zvcm0ub25zdWJtaXQgPSBhZGRfYV9Ub2RvO1xudG9kb0Zvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbmRlZmF1bHRMaXN0RE9NLmZvckVhY2gobGlzdCA9PiB7XG4gICAgbGlzdC5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG59KTtcblxuYWxsVG9kb0RPTVMuZm9yRWFjaCh0b2RvID0+IHtcbiAgICB0b2RvLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xufSk7Il0sIm5hbWVzIjpbIkxpc3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidG9kb3MiLCJsaXN0TnVtYmVyIiwidGhpcyIsImdldExpc3ROdW1iZXIiLCJzZXRMaXN0TnVtYmVyIiwidmFsdWUiLCJnZXRUaXRsZSIsImdldFRvZG9zIiwic2V0VGl0bGUiLCJzZXRUb2RvcyIsImFkZE5ld0xpc3QiLCJ0aGVUb2RvIiwicHVzaCIsIlRvZG8iLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsInRvZG9OdW1iZXIiLCJnZXRUb2RvTnVtYmVyIiwic2V0VG9kb051bWJlciIsImdldElzQ29tcGxldGVkIiwiY2hhbmdlQ29tcGxldGVTdGF0dXMiLCJnZXREZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldERlc2NyaXB0aW9uIiwic2V0RHVlRGF0ZSIsInNldFByaW9yaXR5IiwibGlzdHMiLCJyZW1vdmVFeGlzdGluZ01hcmtlciIsImNvbnRhaW5lciIsImxlbmd0aCIsImZpcnN0TGlzdCIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwibmV4dExpc3QiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ1cGRhdGVBcnJheUFuZFRvZG8iLCJhbGxUb2RvcyIsImFsbFRvZG9JbmRleCIsImkiLCJ0b2RvX25vIiwibGlzdF9ubyIsIngiLCJ0aGVET00iLCJzZXRBdHRyaWJ1dGUiLCJjaGFuZ2VUb2RvSGVhZGVyIiwidG9kb0hlYWRlciIsInRleHRDb250ZW50Iiwic2hvd0xpc3RzVG9kb3MiLCJ0b2RvIiwic2F2ZVRvZG8iLCJhbkFycmF5IiwibCIsInQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2F2ZURhdGEiLCJlbGVtIiwibGlzdFRpdGxlIiwiY29uc29sZSIsImxvZyIsImxvYWREYXRhIiwiaW5jbHVkZXMiLCJtYWtlTGlzdEFjdGl2ZSIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJlbGVtZW50IiwiaW5kZXgiLCJhbGxMaXN0IiwicmVtb3ZlQ2hpbGQiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkZWxldGVSZWxhdGVkVG9kbyIsImFsbFRvZG8iLCJzcGxpY2UiLCJwYXJzZUludCIsImxpc3QiLCJ1cGRhdGVMaXN0c0FuZFRvZG9zIiwic2hvd1JlbGF0ZWRUb2RvcyIsImRlbGV0ZUVsZW1lbnQiLCJsYXN0RWxlbWVudENoaWxkIiwibGlzdE5vIiwicXVlcnlTZWxlY3RvciIsIm1vZGlmeVRvZG8iLCJjbGVhciIsImRlZmF1bHRMaXN0IiwiZ2V0SXRlbSIsIm5ld0xpc3RpbnB1dCIsImxpc3RGb3JtIiwibmV3TGlzdE1vZGFsIiwiYWRkVG9kbyIsIm5ld1RvZG9Nb2RhbCIsInRvZG9Gb3JtIiwidG9kb05hbWUiLCJkZWZhdWx0TGlzdERPTSIsImFsbFRvZG9ET01TIiwib25jbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbnN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwibmV3TGlzdCIsImxpc3RPYmplY3QiLCJpbnNlcnRfYmVmb3JlIiwiYUxpc3QiLCJjcmVhdGVFbGVtZW50IiwiYWRkIiwiaW5zZXJ0QmVmb3JlIiwibGVmdCIsImFwcGVuZENoaWxkIiwicmlnaHQiLCJpY29uMSIsImljb24yIiwiaWNvbjMiLCJpY29uNCIsImljb241IiwiYWRkTmV3TGlzdEludGVyZmFjZSIsImdldEVsZW1lbnRCeUlkIiwicmVzZXQiLCJvbnJlc2V0IiwibmV3VG9kbyIsIm5ld1RvZG9ET00iLCJhVG9kbyIsImNvbGxhcHNlIiwiY29sbGFwc2VJbWciLCJpbnB1dDEiLCJ0aXRsZVRvZG8iLCJhZGROZXdUb2RvSW50ZXJmYWNlIiwiZm9yRWFjaCJdLCJzb3VyY2VSb290IjoiIn0=