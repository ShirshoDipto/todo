(()=>{"use strict";class t{constructor(t,e,i,l=0){this.title=t,this.todos=e,this.listNumber=i,this.isDefault=l}get getIsDefault(){return this.isDefault}set setIsDefault(t){this.isDefault=t}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,l,s,r,n){this.title=t,this.description=e,this.dueDate=i,this.priority=l,this.listNumber=s,this.completed=r,this.todoNumber=n}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function l(t,e,l){i.push(t);const s=document.createElement("div");s.classList.add("a-list"),s.setAttribute("list-number",`${t.getListNumber}`),e.insertBefore(s,l);const r=document.createElement("div");r.classList.add("left"),s.appendChild(r);const n=document.createElement("div");n.classList.add("right"),s.appendChild(n);const o=document.createElement("img");o.classList.add("icon"),1===t.getIsDefault?o.setAttribute("src","icons/weather-sunny.png"):o.setAttribute("src","icons/todo.png"),r.appendChild(o);const u=document.createElement("div");u.classList.add("list-title"),u.textContent=t.getTitle,r.appendChild(u);const d=document.createElement("img");d.classList.add("edit"),d.setAttribute("src","icons/pencil.png"),n.appendChild(d);const c=document.createElement("img");return c.classList.add("delete"),c.setAttribute("src","icons/trash.png"),n.appendChild(c),s}function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function r(t){let e=0;for(let l=0;l<i.length;l++)if(i[l].setListNumber=l,0!==i[l].getTodos.length){let s=0;const r=i[l].getListNumber;for(let n of i[l].getTodos){n.setListNumber=l,n.setTodoNumber=s;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${r}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${s}`),s++,e++}}}let n=[];function o(t){if(""===t)return"";let e=new Date(`${t}`).toDateString();return e.slice(4,10)+", "+e.slice(11)}function u(t,e){n.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),"none"===e.getPriority?i.classList.toggle("none"):"medium"===e.getPriority?i.classList.toggle("medium"):"high"===e.getPriority?i.classList.toggle("high"):"normal"===e.getPriority&&i.classList.toggle("normal"),t.appendChild(i);const l=document.createElement("div");l.classList.add("a-list"),i.appendChild(l);const s=document.createElement("div");s.classList.add("description"),s.textContent=e.getDescription,i.appendChild(s);const r=document.createElement("div");r.classList.add("collapse"),i.appendChild(r);const u=document.createElement("div");u.classList.add("left"),l.appendChild(u);const d=document.createElement("div");d.classList.add("right"),l.appendChild(d);const c=document.createElement("img");c.setAttribute("src","icons/unfold.png"),c.setAttribute("alt","collapse icon"),c.setAttribute("id","hide"),r.appendChild(c);const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("id","todo-checkbox"),a.setAttribute("name","todo-checkbox"),1===e.getIsCompleted&&(a.checked=!0),u.appendChild(a);const m=document.createElement("div");m.innerHTML=`<p class="tName"><strong>${e.getTitle}</strong></p>\n    <p class='tDate'>${o(e.getDueDate)}\n    </p>`,u.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/pencil.png"),g.classList.add("edit"),d.appendChild(g);const h=document.createElement("img");return h.setAttribute("src","icons/trash.png"),h.classList.add("delete"),d.appendChild(h),i}function d(t,e,i){null===e&&(t.firstElementChild.textContent=i),t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function c(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function a(t,e){let i=0;for(let l of t){let t=l.getTitle,s=l.getDescription,r=l.dueDate,n=l.getPriority,o=l.getListNumber,u=l.getIsCompleted,d=l.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${s},${r},${n},${o},${u},${d}`),i++}}function m(t,e){localStorage.clear();let i=0;localStorage.setItem("activeListNumber",e);for(let e of t){let t=e.getTitle,l=e.getListNumber;1===e.getIsDefault?localStorage.setItem(`list_${i}`,`${t},${l},1`):localStorage.setItem(`list_${i}`,`${t},${l}`),a(e.getTodos,i),i++}}let g="0";function h(t){var e;t.preventDefault(),i[parseInt(g)].setTitle=t.target.firstElementChild.value,t.target.previousElementSibling.textContent=t.target.firstElementChild.value,d(x,g,t.target.firstElementChild.value),(e=t.target.parentNode.parentNode).firstElementChild.removeChild(e.firstElementChild.lastElementChild),e.firstElementChild.lastElementChild.removeAttribute("id"),m(i,g)}function b(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");A.removeChild(t);const l=Array.from(document.querySelectorAll(".a-list"));let s=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let l of e)l.getAttribute("list-number")===i&&t.removeChild(l)}(q,s,e),s=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,l){i.splice(parseInt(e),1);let s=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${s}`),s++;r(l)}(l,e,s),e===g&&function(t,e){0===i.length?d(x,null,"Add a List"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),d(x,e,i[0].getTitle),c(t,"0"),g="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),d(x,e,i[parseInt(e)-1].getTitle),c(t,""+(parseInt(e)-1)),g=""+(parseInt(e)-1))}(s,e),g=document.querySelector("#active-list").getAttribute("list-number")}m(i,g)}(this);else if("edit"===t.target.classList.value)(function(t){const e=t.firstElementChild.lastElementChild;e.setAttribute("id","hide");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("maxlength","30"),i.required=!0,i.value=e.textContent;const l=document.createElement("form");return l.setAttribute("action","#"),l.classList.add("edit-list-form"),t.firstElementChild.appendChild(l),l.appendChild(i),l}(this)).onsubmit=h;else{s(A),this.setAttribute("id","active-list");let t=this.getAttribute("list-number");d(x,t,this.firstElementChild.lastElementChild.textContent),c(Array.from(document.querySelectorAll(".a-todo")),t),g=t,localStorage.removeItem("activeListNumber"),localStorage.setItem("activeListNumber",g)}}function p(t){!0===t.checked?t.checked=!1:t.checked=!0}function f(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),q.removeChild(this),r(Array.from(document.querySelectorAll(".all-todo .a-todo")))}else if("edit"===t.target.classList.value){const t=document.querySelector(".edit-todo-modal");t.removeAttribute("id");const e=function(t,e,i){let l=t.getAttribute("list-number"),s=t.getAttribute("todo-number"),r=i[parseInt(l)].getTodos[parseInt(s)],n=e.firstElementChild.nextElementSibling;n.firstElementChild.value=r.getTitle,n.firstElementChild.nextElementSibling.lastElementChild.value=r.getDueDate;const o=r.getPriority;let u=n.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild;return function(t,e){let i=e.firstElementChild;for(;;){if(i.getAttribute("value")===t){i.selected=!0;break}i=i.nextElementSibling}}(o,u),u.parentNode.nextElementSibling.value=r.getDescription,r}(this,t,i),l=t.lastElementChild;l.onsubmit=t=>{!function(t,e,l){e.preventDefault(),l.classList.remove(t.getPriority),t.setTitle=e.target.firstElementChild.value,t.setDueDate=e.target.firstElementChild.nextElementSibling.lastElementChild.value,t.setPriority=e.target.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild.value,t.setDescription=e.target.lastElementChild.previousElementSibling.value,e.target.reset(),e.target.parentNode.setAttribute("id","hide"),function(t,e){e.firstElementChild.firstElementChild.lastElementChild.innerHTML=`<p class="tName">\n                  <strong>${t.getTitle}</strong>\n                </p>\n                <p class='tDate'>${o(t.getDueDate)}</p>`,e.firstElementChild.nextElementSibling.textContent=`${t.getDescription}`,e.classList.toggle(t.getPriority)}(t,l),m(i,g)}(e,t,this)},l.onreset=()=>{t.setAttribute("id","hide")}}else{"checkbox"===t.target.getAttribute("type")&&p(t.target);const e=this.getAttribute("list-number"),l=this.getAttribute("todo-number");i[parseInt(e)].getTodos[parseInt(l)].changeCompleteStatus(),p(this.firstElementChild.firstElementChild.firstElementChild)}m(i,g)}const A=document.querySelector(".all-list"),v=document.querySelector("#list-name"),E=document.querySelector(".list-form"),C=document.querySelector(".add-new-list"),S=document.querySelector(".new-list-modal"),y=document.querySelector(".add-todo"),L=document.querySelector(".new-todo-modal"),N=document.querySelector(".todo-form"),T=document.querySelector("#todo-name"),D=document.querySelector("#due-date"),I=document.querySelector("#priority"),$=document.querySelector("#description"),q=document.querySelector(".all-todo"),x=document.querySelector(".todo-header");if(localStorage.getItem("activeListNumber")){let s=function(){let i=[],l=[];for(let s in localStorage)if(s.includes("list")&&!s.includes("todo")){const e=localStorage.getItem(s).split(","),l=e[0],r=parseInt(e[1]);if(3===e.length){const e=new t(l,[],r,1);i.push(e)}else{const e=new t(l,[],r);i.push(e)}}else if(s.includes("todo")){const t=localStorage.getItem(s).split(","),i=t[0],r=t[1],n=t[2],o=t[3],u=parseInt(t[4]),d=parseInt(t[5]),c=parseInt(t[6]),a=new e(i,r,n,o,u,d,c);l.push(a)}let s=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);return function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(s,l),s}();g=localStorage.getItem("activeListNumber"),function(t){if(0===t.length)return;for(let e of t){l(e,A,S);for(let t of e.getTodos)u(q,t)}const e=document.querySelector(`.all-list div[list-number="${g}"]`);null!==e&&e.setAttribute("id","active-list");const s=Array.from(document.querySelectorAll(".a-todo"));d(x,g,i[parseInt(g)].getTitle),c(s,g)}(s)}else{let e=new t("My Day",[],0,1);l(e,A,S),d(x,"0","My Day"),document.querySelector(`.all-list div[list-number="${e.getListNumber}"]`).setAttribute("id","active-list"),m(i,g)}const k=document.querySelectorAll(".all-list .a-list"),w=document.querySelectorAll(".all-todo .a-todo");y.onclick=()=>{L.removeAttribute("id")},C.addEventListener("click",(()=>{S.removeAttribute("id"),A.scrollTo(0,A.scrollHeight)})),E.onsubmit=function(e){e.preventDefault();let r=new t(v.value,[],i.length);s(A);const n=l(r,A,S);n.setAttribute("id","active-list");const o=Array.from(document.querySelectorAll(".a-todo"));d(x,r.getListNumber,r.getTitle),c(o,r.getListNumber.toString()),g=r.getListNumber.toString(),n.onclick=b,e.target.reset(),S.setAttribute("id","hide"),A.scrollTo(0,A.scrollHeight),m(i,g)},E.onreset=()=>{S.setAttribute("id","hide")},N.onsubmit=function(t){t.preventDefault();const l=parseInt(x.getAttribute("list-number")),s=i[parseInt(l)].getTodos.length;let r=new e(T.value,$.value,D.value,I.value,l,0,s);i[parseInt(l)].getTodos.push(r),u(q,r).onclick=f,L.setAttribute("id","hide"),q.scrollTo(0,q.scrollHeight),t.target.reset(),m(i,g)},N.onreset=()=>{L.setAttribute("id","hide")},k.forEach((t=>{t.onclick=b})),w.forEach((t=>{t.onclick=f}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c0MsUUFDVC9DLEVBQVM3RCxFQUFPOEQsRUFDbEIsRUEwTkF1RCxFQUFTTixRQUFVLEtBQ2pCSyxFQUFhMUcsYUFBYSxLQUFNLE9BQU8sRUFHekNnSSxFQUFlUSxTQUFTOUQsSUFDdEJBLEVBQUt3RCxRQUFVakUsQ0FBYyxJQUcvQmdFLEVBQVlPLFNBQVM1RixJQUNuQkEsRUFBS3NGLFFBQVUzQyxDQUFVLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlTGlzdEludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZVRvZG9JbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9zdG9yYWdlTWFuYWdlbWVudC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3Qge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgdG9kb3MsIGxpc3ROdW1iZXIsIGlzRGVmYXVsdCA9IDApIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy50b2RvcyA9IHRvZG9zO1xuICAgIHRoaXMubGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgdGhpcy5pc0RlZmF1bHQgPSBpc0RlZmF1bHQ7XG4gIH1cblxuICBnZXQgZ2V0SXNEZWZhdWx0KCkge1xuICAgIHJldHVybiB0aGlzLmlzRGVmYXVsdDtcbiAgfVxuXG4gIHNldCBzZXRJc0RlZmF1bHQodmFsdWUpIHtcbiAgICB0aGlzLmlzRGVmYXVsdCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGdldExpc3ROdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlzdE51bWJlcjtcbiAgfVxuXG4gIHNldCBzZXRMaXN0TnVtYmVyKHZhbHVlKSB7XG4gICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gIH1cblxuICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGl0bGU7XG4gIH1cblxuICBnZXQgZ2V0VG9kb3MoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9kb3M7XG4gIH1cblxuICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICB0aGlzLnRvZG9zID0gdmFsdWU7XG4gIH1cblxuICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gIH1cblxuICBhZGROZXdMaXN0KHRoZVRvZG8pIHtcbiAgICB0aGlzLnRvZG9zLnB1c2godGhlVG9kbyk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG8ge1xuICBjb25zdHJ1Y3RvcihcbiAgICB0aXRsZSxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkdWVEYXRlLFxuICAgIHByaW9yaXR5LFxuICAgIGxpc3ROdW1iZXIsXG4gICAgY29tcGxldGVkLFxuICAgIHRvZG9OdW1iZXJcbiAgKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgIHRoaXMuY29tcGxldGVkID0gY29tcGxldGVkO1xuICAgIHRoaXMudG9kb051bWJlciA9IHRvZG9OdW1iZXI7XG4gIH1cblxuICBnZXQgZ2V0VG9kb051bWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy50b2RvTnVtYmVyO1xuICB9XG5cbiAgc2V0IHNldFRvZG9OdW1iZXIodmFsdWUpIHtcbiAgICB0aGlzLnRvZG9OdW1iZXIgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBnZXRJc0NvbXBsZXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wbGV0ZWQ7XG4gIH1cblxuICBjaGFuZ2VDb21wbGV0ZVN0YXR1cygpIHtcbiAgICBpZiAodGhpcy5jb21wbGV0ZWQgPT09IDEpIHtcbiAgICAgIHRoaXMuY29tcGxldGVkID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21wbGV0ZWQgPSAxO1xuICAgIH1cbiAgfVxuXG4gIGdldCBnZXRMaXN0TnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLmxpc3ROdW1iZXI7XG4gIH1cblxuICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgIHRoaXMubGlzdE51bWJlciA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGdldFRpdGxlKCkge1xuICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICB9XG4gIGdldCBnZXREZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjtcbiAgfVxuICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kdWVEYXRlO1xuICB9XG4gIGdldCBnZXRQcmlvcml0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgfVxuXG4gIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgfVxuXG4gIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcbiAgfVxuICBzZXQgc2V0RHVlRGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICB9XG4gIHNldCBzZXRQcmlvcml0eSh2YWx1ZSkge1xuICAgIHRoaXMucHJpb3JpdHkgPSB2YWx1ZTtcbiAgfVxufVxuIiwiZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUpIHtcbiAgbGlzdHMucHVzaChsaXN0T2JqZWN0KTtcblxuICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGFMaXN0LmNsYXNzTGlzdC5hZGQoXCJhLWxpc3RcIik7XG4gIGFMaXN0LnNldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIsIGAke2xpc3RPYmplY3QuZ2V0TGlzdE51bWJlcn1gKTtcbiAgY29udGFpbmVyLmluc2VydEJlZm9yZShhTGlzdCwgaW5zZXJ0X2JlZm9yZSk7XG5cbiAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGxlZnQuY2xhc3NMaXN0LmFkZChcImxlZnRcIik7XG4gIGFMaXN0LmFwcGVuZENoaWxkKGxlZnQpO1xuXG4gIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcmlnaHQuY2xhc3NMaXN0LmFkZChcInJpZ2h0XCIpO1xuICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgY29uc3QgaWNvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBpY29uMS5jbGFzc0xpc3QuYWRkKFwiaWNvblwiKTtcbiAgaWYgKGxpc3RPYmplY3QuZ2V0SXNEZWZhdWx0ID09PSAxKSB7XG4gICAgaWNvbjEuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaWNvbnMvd2VhdGhlci1zdW5ueS5wbmdcIik7XG4gIH0gZWxzZSB7XG4gICAgaWNvbjEuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaWNvbnMvdG9kby5wbmdcIik7XG4gIH1cbiAgbGVmdC5hcHBlbmRDaGlsZChpY29uMSk7XG5cbiAgY29uc3QgbGlzdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbGlzdFRpdGxlLmNsYXNzTGlzdC5hZGQoXCJsaXN0LXRpdGxlXCIpO1xuICBsaXN0VGl0bGUudGV4dENvbnRlbnQgPSBsaXN0T2JqZWN0LmdldFRpdGxlO1xuICBsZWZ0LmFwcGVuZENoaWxkKGxpc3RUaXRsZSk7XG5cbiAgY29uc3QgaWNvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBpY29uMi5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiKTtcbiAgaWNvbjIuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaWNvbnMvcGVuY2lsLnBuZ1wiKTtcbiAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gIGNvbnN0IGljb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaWNvbjUuY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbiAgaWNvbjUuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaWNvbnMvdHJhc2gucG5nXCIpO1xuICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgcmV0dXJuIGFMaXN0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoY29udGFpbmVyKSB7XG4gIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgY29uc3QgZmlyc3RMaXN0ID0gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICBpZiAoZmlyc3RMaXN0LmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBcImFjdGl2ZS1saXN0XCIpIHtcbiAgICBmaXJzdExpc3QucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gIH0gZWxzZSB7XG4gICAgbGV0IG5leHRMaXN0ID0gZmlyc3RMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGlmIChuZXh0TGlzdC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gXCJhY3RpdmUtbGlzdFwiKSB7XG4gICAgICAgIG5leHRMaXN0LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG5leHRMaXN0ID0gbmV4dExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKSB7XG4gIGxldCBhbGxUb2RvSW5kZXggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGlzdHNbaV0uc2V0TGlzdE51bWJlciA9IGk7XG4gICAgaWYgKGxpc3RzW2ldLmdldFRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0b2RvX25vID0gMDtcbiAgICAgIGNvbnN0IGxpc3Rfbm8gPSBsaXN0c1tpXS5nZXRMaXN0TnVtYmVyO1xuICAgICAgZm9yIChsZXQgeCBvZiBsaXN0c1tpXS5nZXRUb2Rvcykge1xuICAgICAgICB4LnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICB4LnNldFRvZG9OdW1iZXIgPSB0b2RvX25vO1xuICAgICAgICBsZXQgdGhlRE9NID0gYWxsVG9kb3NbYWxsVG9kb0luZGV4XTtcbiAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIpO1xuICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIiwgYCR7bGlzdF9ub31gKTtcbiAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZShcInRvZG8tbnVtYmVyXCIpO1xuICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKFwidG9kby1udW1iZXJcIiwgYCR7dG9kb19ub31gKTtcbiAgICAgICAgdG9kb19ubysrO1xuICAgICAgICBhbGxUb2RvSW5kZXgrKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUxpc3RzQW5kVG9kb3MoY29udGFpbmVyLCBsaXN0TnVtYmVyLCBhbGxUb2Rvcykge1xuICBsaXN0cy5zcGxpY2UocGFyc2VJbnQobGlzdE51bWJlciksIDEpO1xuICAvLyAgdXBkYXRlIGRvbXNcbiAgbGV0IGluZGV4ID0gMDtcblxuICBmb3IgKGxldCBsaXN0IG9mIGNvbnRhaW5lcikge1xuICAgIGxpc3QucmVtb3ZlQXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gICAgbGlzdC5zZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiLCBgJHtpbmRleH1gKTtcbiAgICBpbmRleCsrO1xuICB9XG5cbiAgLy8gdXBkYXRlIEFycmF5IGFuZCB0b2RvIERPTSdzXG4gIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0TGlzdChlbGVtZW50KSB7XG4gIGNvbnN0IGxpc3RUaXRsZSA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcbiAgbGlzdFRpdGxlLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiaGlkZVwiKTtcblxuICAvLyBjcmVhdGUgYW4gaW5wdXQgRWxlbWVudFxuICBjb25zdCBsaXN0TmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBsaXN0TmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICBsaXN0TmFtZUlucHV0LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjMwXCIpO1xuICBsaXN0TmFtZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcbiAgbGlzdE5hbWVJbnB1dC52YWx1ZSA9IGxpc3RUaXRsZS50ZXh0Q29udGVudDtcblxuICAvLyBjcmVhdGUgdGhlIGZvcm1cbiAgY29uc3QgbGlzdE5hbWVGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gIGxpc3ROYW1lRm9ybS5zZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIiwgXCIjXCIpO1xuICBsaXN0TmFtZUZvcm0uY2xhc3NMaXN0LmFkZChcImVkaXQtbGlzdC1mb3JtXCIpO1xuXG4gIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQobGlzdE5hbWVGb3JtKTtcbiAgbGlzdE5hbWVGb3JtLmFwcGVuZENoaWxkKGxpc3ROYW1lSW5wdXQpO1xuXG4gIHJldHVybiBsaXN0TmFtZUZvcm07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmRvQ2hhbmdlKGVsZW1lbnQpIHtcbiAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmVDaGlsZChcbiAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGRcbiAgKTtcbiAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xufVxuIiwiZXhwb3J0IGxldCB0b2RvcyA9IFtdO1xuXG5mdW5jdGlvbiBtYWtlRGF0ZVN0cmluZyhkYXRlVGV4dCkge1xuICBsZXQgZGF0ZVN0cmluZyA9IFwiXCI7XG4gIGlmIChkYXRlVGV4dCA9PT0gXCJcIikge1xuICAgIHJldHVybiBkYXRlU3RyaW5nO1xuICB9XG4gIGxldCBhRGF0ZSA9IG5ldyBEYXRlKGAke2RhdGVUZXh0fWApLnRvRGF0ZVN0cmluZygpO1xuICBsZXQgbmV3RGF0ZSA9IGFEYXRlLnNsaWNlKDQsIDEwKSArIFwiLCBcIiArIGFEYXRlLnNsaWNlKDExKTtcbiAgcmV0dXJuIG5ld0RhdGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXdUb2RvSW50ZXJmYWNlKGNvbnRhaW5lciwgdGhlVG9kbykge1xuICAvLyBkZXNjcmlwdGlvbnMgZ29lcyBoZXJlXG5cbiAgdG9kb3MucHVzaCh0aGVUb2RvKTtcblxuICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGFUb2RvLmNsYXNzTGlzdC5hZGQoXCJhLXRvZG9cIik7XG4gIGFUb2RvLnNldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIsIGAke3RoZVRvZG8uZ2V0TGlzdE51bWJlcn1gKTtcbiAgYVRvZG8uc2V0QXR0cmlidXRlKFwidG9kby1udW1iZXJcIiwgYCR7dGhlVG9kby5nZXRUb2RvTnVtYmVyfWApO1xuICBpZiAodGhlVG9kby5nZXRQcmlvcml0eSA9PT0gXCJub25lXCIpIHtcbiAgICBhVG9kby5jbGFzc0xpc3QudG9nZ2xlKFwibm9uZVwiKTtcbiAgfSBlbHNlIGlmICh0aGVUb2RvLmdldFByaW9yaXR5ID09PSBcIm1lZGl1bVwiKSB7XG4gICAgYVRvZG8uY2xhc3NMaXN0LnRvZ2dsZShcIm1lZGl1bVwiKTtcbiAgfSBlbHNlIGlmICh0aGVUb2RvLmdldFByaW9yaXR5ID09PSBcImhpZ2hcIikge1xuICAgIGFUb2RvLmNsYXNzTGlzdC50b2dnbGUoXCJoaWdoXCIpO1xuICB9IGVsc2UgaWYgKHRoZVRvZG8uZ2V0UHJpb3JpdHkgPT09IFwibm9ybWFsXCIpIHtcbiAgICBhVG9kby5jbGFzc0xpc3QudG9nZ2xlKFwibm9ybWFsXCIpO1xuICB9XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhVG9kbyk7XG5cbiAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBhTGlzdC5jbGFzc0xpc3QuYWRkKFwiYS1saXN0XCIpO1xuICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBkZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwiZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGhlVG9kby5nZXREZXNjcmlwdGlvbjtcbiAgYVRvZG8uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZChcImNvbGxhcHNlXCIpO1xuICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGxlZnQuY2xhc3NMaXN0LmFkZChcImxlZnRcIik7XG4gIGFMaXN0LmFwcGVuZENoaWxkKGxlZnQpO1xuXG4gIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgcmlnaHQuY2xhc3NMaXN0LmFkZChcInJpZ2h0XCIpO1xuICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJpY29ucy91bmZvbGQucG5nXCIpO1xuICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJjb2xsYXBzZSBpY29uXCIpO1xuICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG4gIGNvbGxhcHNlLmFwcGVuZENoaWxkKGNvbGxhcHNlSW1nKTtcblxuICBjb25zdCBpbnB1dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInRvZG8tY2hlY2tib3hcIik7XG4gIGlucHV0MS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidG9kby1jaGVja2JveFwiKTtcbiAgaWYgKHRoZVRvZG8uZ2V0SXNDb21wbGV0ZWQgPT09IDEpIHtcbiAgICBpbnB1dDEuY2hlY2tlZCA9IHRydWU7XG4gIH1cbiAgbGVmdC5hcHBlbmRDaGlsZChpbnB1dDEpO1xuXG4gIGNvbnN0IHRpdGxlVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHRpdGxlVG9kby5pbm5lckhUTUwgPSBgPHAgY2xhc3M9XCJ0TmFtZVwiPjxzdHJvbmc+JHt0aGVUb2RvLmdldFRpdGxlfTwvc3Ryb25nPjwvcD5cbiAgICA8cCBjbGFzcz0ndERhdGUnPiR7bWFrZURhdGVTdHJpbmcodGhlVG9kby5nZXREdWVEYXRlKX1cbiAgICA8L3A+YDtcbiAgbGVmdC5hcHBlbmRDaGlsZCh0aXRsZVRvZG8pO1xuXG4gIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaWNvbjIuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaWNvbnMvcGVuY2lsLnBuZ1wiKTtcbiAgaWNvbjIuY2xhc3NMaXN0LmFkZChcImVkaXRcIik7XG4gIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGljb241LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImljb25zL3RyYXNoLnBuZ1wiKTtcbiAgaWNvbjUuY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiKTtcbiAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xuXG4gIHJldHVybiBhVG9kbztcbn1cblxuLy8gY2hhbmdlIHRvZG8gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aXRsZSkge1xuICBpZiAobGlzdE51bWJlciA9PT0gbnVsbCkge1xuICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgfVxuICB0b2RvSGVhZGVyLnNldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIsIGAke2xpc3ROdW1iZXJ9YCk7XG4gIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZTtcbn1cblxuLy8gc2hvdyBhbGwgdG9kb3Mgb2YgYSBwYXJ0aWN1bGFyIGxpc3RcbmV4cG9ydCBmdW5jdGlvbiBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbGlzdE51bWJlcikge1xuICBpZiAoYWxsVG9kb3MgPT09IG51bGwpIHJldHVybjtcbiAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgIGlmICh0b2RvLmdldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIpID09PSBsaXN0TnVtYmVyKSB7XG4gICAgICB0b2RvLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2RvLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiaGlkZVwiKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVJlbGF0ZWRUb2RvKGNvbnRhaW5lciwgYWxsVG9kb3MsIGxpc3ROdW1iZXIpIHtcbiAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgIGNvbnN0IGxpc3RfbnVtID0gdG9kby5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgICBpZiAobGlzdF9udW0gPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0UHJpb3JpdHlWYWx1ZShzZWxlY3RlZE9uZSwgcHJpb3JpdHlJbnB1dCkge1xuICBsZXQgaW5wdXQgPSBwcmlvcml0eUlucHV0LmZpcnN0RWxlbWVudENoaWxkO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgaWYgKGlucHV0LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpID09PSBzZWxlY3RlZE9uZSkge1xuICAgICAgaW5wdXQuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlucHV0ID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0VG9kbyhlbGVtZW50LCBlZGl0TW9kYWwsIGxpc3RzKSB7XG4gIGxldCBsaXN0TnVtYmVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgbGV0IHRvZG9OdW1iZXIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInRvZG8tbnVtYmVyXCIpO1xuICBsZXQgdGhlVG9kbyA9IGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvc1twYXJzZUludCh0b2RvTnVtYmVyKV07XG4gIGxldCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gIGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLnZhbHVlID0gdGhlVG9kby5nZXRUaXRsZTtcbiAgZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudmFsdWUgPVxuICAgIHRoZVRvZG8uZ2V0RHVlRGF0ZTtcbiAgY29uc3Qgc2VsZWN0ZWRPbmUgPSB0aGVUb2RvLmdldFByaW9yaXR5O1xuICBsZXQgcHJpb3JpdHlJbnB1dCA9XG4gICAgZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZ1xuICAgICAgLmxhc3RFbGVtZW50Q2hpbGQ7XG4gIHNldFByaW9yaXR5VmFsdWUoc2VsZWN0ZWRPbmUsIHByaW9yaXR5SW5wdXQpO1xuICBwcmlvcml0eUlucHV0LnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnZhbHVlID0gdGhlVG9kby5nZXREZXNjcmlwdGlvbjtcblxuICByZXR1cm4gdGhlVG9kbztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRvZG9ET00odGhlVG9kbywgdG9kb0RPTSkge1xuICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkXG4gIC5sYXN0RWxlbWVudENoaWxkXG4gIC5pbm5lckhUTUwgPSBgPHAgY2xhc3M9XCJ0TmFtZVwiPlxuICAgICAgICAgICAgICAgICAgPHN0cm9uZz4ke3RoZVRvZG8uZ2V0VGl0bGV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPSd0RGF0ZSc+JHttYWtlRGF0ZVN0cmluZyh0aGVUb2RvLmdldER1ZURhdGUpfTwvcD5gO1xuICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0RGVzY3JpcHRpb259YDtcbiAgdG9kb0RPTS5jbGFzc0xpc3QudG9nZ2xlKHRoZVRvZG8uZ2V0UHJpb3JpdHkpO1xufVxuIiwiaW1wb3J0IExpc3QgZnJvbSBcIi4vbGlzdFwiO1xuaW1wb3J0IFRvZG8gZnJvbSBcIi4vdG9kb1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVRvZG8oYW5BcnJheSwgbCkge1xuICBsZXQgdCA9IDA7XG4gIGZvciAobGV0IHRvZG8gb2YgYW5BcnJheSkge1xuICAgIGxldCB0aXRsZSA9IHRvZG8uZ2V0VGl0bGU7XG4gICAgbGV0IGRlc2NyaXB0aW9uID0gdG9kby5nZXREZXNjcmlwdGlvbjtcbiAgICBsZXQgZHVlRGF0ZSA9IHRvZG8uZHVlRGF0ZTtcbiAgICBsZXQgcHJpb3JpdHkgPSB0b2RvLmdldFByaW9yaXR5O1xuICAgIGxldCBsaXN0TnVtYmVyID0gdG9kby5nZXRMaXN0TnVtYmVyO1xuICAgIGxldCBjb21wbGV0ZWQgPSB0b2RvLmdldElzQ29tcGxldGVkO1xuICAgIGxldCB0b2RvTnVtYmVyID0gdG9kby5nZXRUb2RvTnVtYmVyO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgYGxpc3RfJHtsfV90b2RvXyR7dH1gLFxuICAgICAgYCR7dGl0bGV9LCR7ZGVzY3JpcHRpb259LCR7ZHVlRGF0ZX0sJHtwcmlvcml0eX0sJHtsaXN0TnVtYmVyfSwke2NvbXBsZXRlZH0sJHt0b2RvTnVtYmVyfWBcbiAgICApO1xuICAgIHQrKztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpIHtcbiAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gIGxldCBsID0gMDtcblxuICAvLyBzYXZlIGxpc3RzXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYWN0aXZlTGlzdE51bWJlclwiLCBhY3RpdmVMaXN0TnVtYmVyKTtcbiAgZm9yIChsZXQgZWxlbSBvZiBsaXN0cykge1xuICAgIGxldCBsaXN0VGl0bGUgPSBlbGVtLmdldFRpdGxlO1xuICAgIGxldCBsaXN0TnVtYmVyID0gZWxlbS5nZXRMaXN0TnVtYmVyO1xuICAgIGlmIChlbGVtLmdldElzRGVmYXVsdCA9PT0gMSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGxpc3RfJHtsfWAsIGAke2xpc3RUaXRsZX0sJHtsaXN0TnVtYmVyfSwxYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1gLCBgJHtsaXN0VGl0bGV9LCR7bGlzdE51bWJlcn1gKTtcbiAgICB9XG4gICAgc2F2ZVRvZG8oZWxlbS5nZXRUb2RvcywgbCk7XG4gICAgbCsrO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRBcnJheXMoYXJyYXlMaXN0cykge1xuICBjb25zdCBuZXdMaXN0cyA9IGFycmF5TGlzdHMuc29ydCgoYSwgYikgPT4ge1xuICAgIGlmIChhLmdldExpc3ROdW1iZXIgPiBiLmdldExpc3ROdW1iZXIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbmV3TGlzdHM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFRvZG9zVG9MaXN0cyhmaW5hbEFycmF5LCBhcnJheVRvZG9zKSB7XG4gIGZvciAobGV0IHRvZG8gb2YgYXJyYXlUb2Rvcykge1xuICAgIGZpbmFsQXJyYXlbdG9kby5nZXRMaXN0TnVtYmVyXS5nZXRUb2Rvcy5wdXNoKHRvZG8pO1xuICB9XG4gIC8vIHNvcnQgdGhlIHRvZG9zXG4gIGZvciAobGV0IGxpc3Qgb2YgZmluYWxBcnJheSkge1xuICAgIGNvbnN0IG5ld1RvZG8gPSBsaXN0LmdldFRvZG9zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhLmdldFRvZG9OdW1iZXIgPiBiLmdldFRvZG9OdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGlzdC5zZXRUb2RvcyA9IG5ld1RvZG87XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWREYXRhKCkge1xuICBsZXQgYXJyYXlMaXN0cyA9IFtdO1xuICBsZXQgYXJyYXlUb2RvcyA9IFtdO1xuICBmb3IgKGxldCBlbGVtIGluIGxvY2FsU3RvcmFnZSkge1xuICAgIGlmIChlbGVtLmluY2x1ZGVzKFwibGlzdFwiKSAmJiAhZWxlbS5pbmNsdWRlcyhcInRvZG9cIikpIHtcbiAgICAgIGNvbnN0IGxpc3REZXRhaWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbSkuc3BsaXQoXCIsXCIpO1xuICAgICAgY29uc3QgdGl0bGUgPSBsaXN0RGV0YWlsc1swXTtcbiAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludChsaXN0RGV0YWlsc1sxXSk7XG4gICAgICBpZiAobGlzdERldGFpbHMubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGNvbnN0IG5ld0xpc3QgPSBuZXcgTGlzdCh0aXRsZSwgW10sIGxpc3ROdW1iZXIsIDEpO1xuICAgICAgICBhcnJheUxpc3RzLnB1c2gobmV3TGlzdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExpc3QodGl0bGUsIFtdLCBsaXN0TnVtYmVyKTtcbiAgICAgICAgYXJyYXlMaXN0cy5wdXNoKG5ld0xpc3QpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZWxlbS5pbmNsdWRlcyhcInRvZG9cIikpIHtcbiAgICAgIGNvbnN0IHRvZG9EZXRhaWxzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZWxlbSkuc3BsaXQoXCIsXCIpO1xuICAgICAgY29uc3QgdGl0bGUgPSB0b2RvRGV0YWlsc1swXTtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdG9kb0RldGFpbHNbMV07XG4gICAgICBjb25zdCBkdWVEYXRlID0gdG9kb0RldGFpbHNbMl07XG4gICAgICBjb25zdCBwcmlvcml0eSA9IHRvZG9EZXRhaWxzWzNdO1xuICAgICAgY29uc3QgbGlzdE51bWJlciA9IHBhcnNlSW50KHRvZG9EZXRhaWxzWzRdKTtcbiAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IHBhcnNlSW50KHRvZG9EZXRhaWxzWzVdKTtcbiAgICAgIGNvbnN0IHRvZG9OdW1iZXIgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s2XSk7XG4gICAgICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG8oXG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgZHVlRGF0ZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIGxpc3ROdW1iZXIsXG4gICAgICAgIGNvbXBsZXRlZCxcbiAgICAgICAgdG9kb051bWJlclxuICAgICAgKTtcbiAgICAgIGFycmF5VG9kb3MucHVzaChuZXdUb2RvKTtcbiAgICB9XG4gIH1cbiAgbGV0IGZpbmFsQXJyYXkgPSBzb3J0QXJyYXlzKGFycmF5TGlzdHMpO1xuICBpbnNlcnRUb2Rvc1RvTGlzdHMoZmluYWxBcnJheSwgYXJyYXlUb2Rvcyk7XG4gIHJldHVybiBmaW5hbEFycmF5O1xufVxuIiwiaW1wb3J0IExpc3QgZnJvbSBcIi4vbGlzdFwiO1xuaW1wb3J0IFRvZG8gZnJvbSBcIi4vdG9kb1wiO1xuaW1wb3J0IHtcbiAgbGlzdHMsXG4gIGFkZE5ld0xpc3RJbnRlcmZhY2UsXG4gIHJlbW92ZUV4aXN0aW5nTWFya2VyLFxuICB1cGRhdGVMaXN0c0FuZFRvZG9zLFxuICB1cGRhdGVBcnJheUFuZFRvZG8sXG4gIGVkaXRMaXN0LFxuICB1bmRvQ2hhbmdlLFxufSBmcm9tIFwiLi9tYW5hZ2VMaXN0SW50ZXJmYWNlXCI7XG5pbXBvcnQge1xuICBhZGROZXdUb2RvSW50ZXJmYWNlLFxuICBjaGFuZ2VUb2RvSGVhZGVyLFxuICBzaG93TGlzdHNUb2RvcyxcbiAgZGVsZXRlUmVsYXRlZFRvZG8sXG4gIGVkaXRUb2RvLFxuICB1cGRhdGVUb2RvRE9NLFxufSBmcm9tIFwiLi9tYW5hZ2VUb2RvSW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBzYXZlRGF0YSwgbG9hZERhdGEgfSBmcm9tIFwiLi9zdG9yYWdlTWFuYWdlbWVudFwiO1xuXG5sZXQgYWN0aXZlTGlzdE51bWJlciA9IFwiMFwiO1xuXG5mdW5jdGlvbiBhZGRMaXN0KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgbGV0IG5ld0xpc3QgPSBuZXcgTGlzdChuZXdMaXN0aW5wdXQudmFsdWUsIFtdLCBsaXN0cy5sZW5ndGgpO1xuICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgY29uc3QgbmV3TGlzdERPTSA9IGFkZE5ld0xpc3RJbnRlcmZhY2UobmV3TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgbmV3TGlzdERPTS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFjdGl2ZS1saXN0XCIpO1xuICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hLXRvZG9cIikpO1xuXG4gIC8vIG1hbmFnZSB0b2RvIGludGVyZmFjZVxuICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG5ld0xpc3QuZ2V0TGlzdE51bWJlciwgbmV3TGlzdC5nZXRUaXRsZSk7XG4gIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBuZXdMaXN0LmdldExpc3ROdW1iZXIudG9TdHJpbmcoKSk7XG4gIGFjdGl2ZUxpc3ROdW1iZXIgPSBuZXdMaXN0LmdldExpc3ROdW1iZXIudG9TdHJpbmcoKTtcbiAgbmV3TGlzdERPTS5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG4gIGUudGFyZ2V0LnJlc2V0KCk7XG4gIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG4gIGFsbExpc3Quc2Nyb2xsVG8oMCwgYWxsTGlzdC5zY3JvbGxIZWlnaHQpO1xuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIGFkZF9hX1RvZG8oZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQodG9kb0hlYWRlci5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKSk7XG4gIGNvbnN0IHRvZG9OdW1iZXIgPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MubGVuZ3RoO1xuICBsZXQgbmV3VG9kbyA9IG5ldyBUb2RvKFxuICAgIHRvZG9OYW1lLnZhbHVlLFxuICAgIGRlc2NyaXB0aW9uLnZhbHVlLFxuICAgIGR1ZURhdGUudmFsdWUsXG4gICAgcHJpb3JpdHkudmFsdWUsXG4gICAgbGlzdE51bWJlcixcbiAgICAwLFxuICAgIHRvZG9OdW1iZXJcbiAgKTtcbiAgbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLnB1c2gobmV3VG9kbyk7XG5cbiAgLy8gYnJpbmcgdGhlIHRvZG8gaW50ZXJmYWNlXG4gIGNvbnN0IG5ld1RvZG9ET00gPSBhZGROZXdUb2RvSW50ZXJmYWNlKGFsbFRvZG8sIG5ld1RvZG8pO1xuICBuZXdUb2RvRE9NLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xuXG4gIC8vIGhpZGUgbW9kYWxcbiAgbmV3VG9kb01vZGFsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiaGlkZVwiKTtcbiAgYWxsVG9kby5zY3JvbGxUbygwLCBhbGxUb2RvLnNjcm9sbEhlaWdodCk7XG4gIGUudGFyZ2V0LnJlc2V0KCk7XG4gIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gc2F2ZUVkaXRlZExpc3QoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGxldCB0aGVMaXN0ID0gbGlzdHNbcGFyc2VJbnQoYWN0aXZlTGlzdE51bWJlcildO1xuICB0aGVMaXN0LnNldFRpdGxlID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gIGUudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPVxuICAgIGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlO1xuICBsZXQgbGlzdE51bWJlciA9IGFjdGl2ZUxpc3ROdW1iZXI7XG4gIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudmFsdWUpO1xuICB1bmRvQ2hhbmdlKGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7XG4gIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxpc3RBY3RpdmUoZSkge1xuICAvLyBoYW5kbGUgZGVsZXRlLCB1cCwgZG93biwgY29tcGxldGVcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJkZWxldGVcIikge1xuICAgIGRlbGV0ZUVsZW1lbnQodGhpcyk7XG4gIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImVkaXRcIikge1xuICAgIGNvbnN0IGxpc3ROYW1lRm9ybSA9IGVkaXRMaXN0KHRoaXMpO1xuICAgIGxpc3ROYW1lRm9ybS5vbnN1Ym1pdCA9IHNhdmVFZGl0ZWRMaXN0O1xuICB9IGVsc2Uge1xuICAgIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhY3RpdmUtbGlzdFwiKTtcblxuICAgIC8vIGdldCB0aGUgbGlzdE9iamVjdFxuICAgIGxldCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKFxuICAgICAgdG9kb0hlYWRlcixcbiAgICAgIGxpc3ROdW1iZXIsXG4gICAgICB0aGlzLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnRcbiAgICApO1xuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmEtdG9kb1wiKSk7XG4gICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIGxpc3ROdW1iZXIpO1xuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiYWN0aXZlTGlzdE51bWJlclwiKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImFjdGl2ZUxpc3ROdW1iZXJcIiwgYWN0aXZlTGlzdE51bWJlcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvd1JlbGF0ZWRUb2Rvcyh4LCBsaXN0Tm8pIHtcbiAgaWYgKGxpc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbnVsbCwgXCJBZGQgYSBMaXN0XCIpO1xuICB9IGVsc2UgaWYgKGxpc3RObyA9PT0gYDBgKSB7XG4gICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIwXCJdJyk7XG4gICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFjdGl2ZS1saXN0XCIpO1xuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1swXS5nZXRUaXRsZSk7XG4gICAgc2hvd0xpc3RzVG9kb3MoeCwgYDBgKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gXCIwXCI7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7cGFyc2VJbnQobGlzdE5vKSAtIDF9XCJdYFxuICAgICk7XG4gICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFjdGl2ZS1saXN0XCIpO1xuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1twYXJzZUludChsaXN0Tm8pIC0gMV0uZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKHgsIGAke3BhcnNlSW50KGxpc3RObykgLSAxfWApO1xuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBgJHtwYXJzZUludChsaXN0Tm8pIC0gMX1gO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QudmFsdWUgPT09IFwiYS1saXN0XCIpIHtcbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gICAgLy8gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgYWxsTGlzdC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICBjb25zdCBjb250YWluZXIgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYS1saXN0XCIpKTtcbiAgICBsZXQgeCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbGwtdG9kbyAuYS10b2RvXCIpKTtcbiAgICBkZWxldGVSZWxhdGVkVG9kbyhhbGxUb2RvLCB4LCBpbmRleCk7XG4gICAgeCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbGwtdG9kbyAuYS10b2RvXCIpKTtcbiAgICB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgaW5kZXgsIHgpO1xuICAgIGlmIChpbmRleCA9PT0gYWN0aXZlTGlzdE51bWJlcikge1xuICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7XG4gICAgfVxuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjYWN0aXZlLWxpc3RcIilcbiAgICAgIC5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgfVxuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUNoZWNrKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlRGF0YXModGhlVG9kbywgZSwgdG9kb0RPTSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIHRvZG9ET00uY2xhc3NMaXN0LnJlbW92ZSh0aGVUb2RvLmdldFByaW9yaXR5KTtcbiAgdGhlVG9kby5zZXRUaXRsZSA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlO1xuICB0aGVUb2RvLnNldER1ZURhdGUgPVxuICAgIGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlO1xuICB0aGVUb2RvLnNldFByaW9yaXR5ID1cbiAgICBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcubmV4dEVsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gIHRoZVRvZG8uc2V0RGVzY3JpcHRpb24gPVxuICAgIGUudGFyZ2V0Lmxhc3RFbGVtZW50Q2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZy52YWx1ZTtcbiAgZS50YXJnZXQucmVzZXQoKTtcbiAgZS50YXJnZXQucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG4gIHVwZGF0ZVRvZG9ET00odGhlVG9kbywgdG9kb0RPTSk7XG4gIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gbW9kaWZ5VG9kbyhlKSB7XG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09IFwiZGVsZXRlXCIpIHtcbiAgICBjb25zdCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgICBjb25zdCB0b2RvTnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0b2RvLW51bWJlclwiKTtcblxuICAgIC8vIGRlbGV0ZSB0b2RvIGZyb20gdGhlIGxpc3RzIEFycmF5IGFuZCB0aGUgZG9tXG4gICAgbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLnNwbGljZShwYXJzZUludCh0b2RvTnVtYmVyKSwgMSk7XG4gICAgYWxsVG9kby5yZW1vdmVDaGlsZCh0aGlzKTtcblxuICAgIC8vIHVwZGF0ZSB0b2RvIGFycmF5XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWxsLXRvZG8gLmEtdG9kb1wiKSk7XG4gICAgdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKTtcbiAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09IFwiZWRpdFwiKSB7XG4gICAgY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXRvZG8tbW9kYWxcIik7XG4gICAgZWRpdE1vZGFsLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICAgIGNvbnN0IHRoZVRvZG8gPSBlZGl0VG9kbyh0aGlzLCBlZGl0TW9kYWwsIGxpc3RzKTtcbiAgICBjb25zdCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5sYXN0RWxlbWVudENoaWxkO1xuICAgIGVkaXRGb3JtLm9uc3VibWl0ID0gKGUpID0+IHtcbiAgICAgIHVwZGF0ZURhdGFzKHRoZVRvZG8sIGUsIHRoaXMpO1xuICAgIH07XG4gICAgZWRpdEZvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICAgIGVkaXRNb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICBjaGFuZ2VDaGVjayhlLnRhcmdldCk7XG4gICAgfVxuICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIpO1xuICAgIGNvbnN0IHRvZG9OdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZShcInRvZG8tbnVtYmVyXCIpO1xuICAgIGxldCB0aGVMaXN0ID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildO1xuICAgIGxldCB0aGVUb2RvID0gdGhlTGlzdC5nZXRUb2Rvc1twYXJzZUludCh0b2RvTnVtYmVyKV07XG4gICAgdGhlVG9kby5jaGFuZ2VDb21wbGV0ZVN0YXR1cygpO1xuICAgIGNoYW5nZUNoZWNrKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICB9XG4gIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuZnVuY3Rpb24gbG9hZFBhZ2UoYW5BcnJheSkge1xuICBpZiAoYW5BcnJheS5sZW5ndGggPT09IDApIHJldHVybjtcbiAgZm9yIChsZXQgbGlzdCBvZiBhbkFycmF5KSB7XG4gICAgYWRkTmV3TGlzdEludGVyZmFjZShsaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwpO1xuICAgIGZvciAobGV0IHRvZG8gb2YgbGlzdC5nZXRUb2Rvcykge1xuICAgICAgYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCB0b2RvKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke2FjdGl2ZUxpc3ROdW1iZXJ9XCJdYFxuICApO1xuICAvLyByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgaWYgKGFjdGl2ZUxpc3QgIT09IG51bGwpIHtcbiAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWN0aXZlLWxpc3RcIik7XG4gIH1cbiAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYS10b2RvXCIpKTtcbiAgY2hhbmdlVG9kb0hlYWRlcihcbiAgICB0b2RvSGVhZGVyLFxuICAgIGFjdGl2ZUxpc3ROdW1iZXIsXG4gICAgbGlzdHNbcGFyc2VJbnQoYWN0aXZlTGlzdE51bWJlcildLmdldFRpdGxlXG4gICk7XG4gIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuLy8gIyMjIyMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjIyMjIyMjI1xuXG4vLyBBbGwgZ2xvYmFsIHZhcmlhYmxlcyBhbmQgZXZlbnRMaXN0ZW5lcnNcbmNvbnN0IGFsbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsbC1saXN0XCIpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0LW5hbWVcIik7XG5jb25zdCBsaXN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlzdC1mb3JtXCIpO1xuY29uc3QgYWRkTmV3TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLW5ldy1saXN0XCIpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctbGlzdC1tb2RhbFwiKTtcbmNvbnN0IGFkZFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10b2RvXCIpO1xuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kby1tb2RhbFwiKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIik7XG5jb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1uYW1lXCIpO1xuY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHVlLWRhdGVcIik7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5jb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG5jb25zdCBhbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtdG9kb1wiKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8taGVhZGVyXCIpO1xuXG4vLyBsb2FkaW5nIHRoZSBleGlzdGluZyBkYXRhXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhY3RpdmVMaXN0TnVtYmVyXCIpKSB7XG4gIGxldCBhbkFycmF5ID0gbG9hZERhdGEoKTtcbiAgYWN0aXZlTGlzdE51bWJlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYWN0aXZlTGlzdE51bWJlclwiKTtcbiAgbG9hZFBhZ2UoYW5BcnJheSk7XG59IGVsc2Uge1xuICAvLyBBZGRpbmcgZGVmYXVsdCBsaXN0XG4gIGxldCBkZWZhdWx0TGlzdCA9IG5ldyBMaXN0KFwiTXkgRGF5XCIsIFtdLCAwLCAxKTtcbiAgYWRkTmV3TGlzdEludGVyZmFjZShkZWZhdWx0TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBcIjBcIiwgXCJNeSBEYXlcIik7XG4gIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIGAuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiJHtkZWZhdWx0TGlzdC5nZXRMaXN0TnVtYmVyfVwiXWBcbiAgKTtcbiAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFjdGl2ZS1saXN0XCIpO1xuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmNvbnN0IGRlZmF1bHRMaXN0RE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbGwtbGlzdCAuYS1saXN0XCIpO1xuY29uc3QgYWxsVG9kb0RPTVMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFsbC10b2RvIC5hLXRvZG9cIik7XG5cbmFkZFRvZG8ub25jbGljayA9ICgpID0+IHtcbiAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xufTtcblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gIGFsbExpc3Quc2Nyb2xsVG8oMCwgYWxsTGlzdC5zY3JvbGxIZWlnaHQpO1xufSk7XG5cbmxpc3RGb3JtLm9uc3VibWl0ID0gYWRkTGlzdDtcbmxpc3RGb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG59O1xuXG50b2RvRm9ybS5vbnN1Ym1pdCA9IGFkZF9hX1RvZG87XG50b2RvRm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWRlXCIpO1xufTtcblxuZGVmYXVsdExpc3RET00uZm9yRWFjaCgobGlzdCkgPT4ge1xuICBsaXN0Lm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbn0pO1xuXG5hbGxUb2RvRE9NUy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gIHRvZG8ub25jbGljayA9IG1vZGlmeVRvZG87XG59KTtcbiJdLCJuYW1lcyI6WyJMaXN0IiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRvZG9zIiwibGlzdE51bWJlciIsImlzRGVmYXVsdCIsInRoaXMiLCJnZXRJc0RlZmF1bHQiLCJzZXRJc0RlZmF1bHQiLCJ2YWx1ZSIsImdldExpc3ROdW1iZXIiLCJzZXRMaXN0TnVtYmVyIiwiZ2V0VGl0bGUiLCJnZXRUb2RvcyIsInNldFRvZG9zIiwic2V0VGl0bGUiLCJhZGROZXdMaXN0IiwidGhlVG9kbyIsInB1c2giLCJUb2RvIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJ0b2RvTnVtYmVyIiwiZ2V0VG9kb051bWJlciIsInNldFRvZG9OdW1iZXIiLCJnZXRJc0NvbXBsZXRlZCIsImNoYW5nZUNvbXBsZXRlU3RhdHVzIiwiZ2V0RGVzY3JpcHRpb24iLCJnZXREdWVEYXRlIiwiZ2V0UHJpb3JpdHkiLCJzZXREZXNjcmlwdGlvbiIsInNldER1ZURhdGUiLCJzZXRQcmlvcml0eSIsImxpc3RzIiwiYWRkTmV3TGlzdEludGVyZmFjZSIsImxpc3RPYmplY3QiLCJjb250YWluZXIiLCJpbnNlcnRfYmVmb3JlIiwiYUxpc3QiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRCZWZvcmUiLCJsZWZ0IiwiYXBwZW5kQ2hpbGQiLCJyaWdodCIsImljb24xIiwibGlzdFRpdGxlIiwidGV4dENvbnRlbnQiLCJpY29uMiIsImljb241IiwicmVtb3ZlRXhpc3RpbmdNYXJrZXIiLCJsZW5ndGgiLCJmaXJzdExpc3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5leHRMaXN0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidXBkYXRlQXJyYXlBbmRUb2RvIiwiYWxsVG9kb3MiLCJhbGxUb2RvSW5kZXgiLCJpIiwidG9kb19ubyIsImxpc3Rfbm8iLCJ4IiwidGhlRE9NIiwibWFrZURhdGVTdHJpbmciLCJkYXRlVGV4dCIsImFEYXRlIiwiRGF0ZSIsInRvRGF0ZVN0cmluZyIsInNsaWNlIiwiYWRkTmV3VG9kb0ludGVyZmFjZSIsImFUb2RvIiwidG9nZ2xlIiwiY29sbGFwc2UiLCJjb2xsYXBzZUltZyIsImlucHV0MSIsImNoZWNrZWQiLCJ0aXRsZVRvZG8iLCJpbm5lckhUTUwiLCJjaGFuZ2VUb2RvSGVhZGVyIiwidG9kb0hlYWRlciIsInNob3dMaXN0c1RvZG9zIiwidG9kbyIsInNhdmVUb2RvIiwiYW5BcnJheSIsImwiLCJ0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInNhdmVEYXRhIiwiYWN0aXZlTGlzdE51bWJlciIsImNsZWFyIiwiZWxlbSIsInNhdmVFZGl0ZWRMaXN0IiwiZSIsImVsZW1lbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBhcnNlSW50IiwidGFyZ2V0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImxhc3RFbGVtZW50Q2hpbGQiLCJtYWtlTGlzdEFjdGl2ZSIsImluZGV4IiwiYWxsTGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkZWxldGVSZWxhdGVkVG9kbyIsImFsbFRvZG8iLCJzcGxpY2UiLCJsaXN0IiwidXBkYXRlTGlzdHNBbmRUb2RvcyIsImxpc3RObyIsInF1ZXJ5U2VsZWN0b3IiLCJzaG93UmVsYXRlZFRvZG9zIiwiZGVsZXRlRWxlbWVudCIsImxpc3ROYW1lSW5wdXQiLCJyZXF1aXJlZCIsImxpc3ROYW1lRm9ybSIsImVkaXRMaXN0Iiwib25zdWJtaXQiLCJyZW1vdmVJdGVtIiwiY2hhbmdlQ2hlY2siLCJtb2RpZnlUb2RvIiwiZWRpdE1vZGFsIiwiZWRpdEZvcm0iLCJzZWxlY3RlZE9uZSIsInByaW9yaXR5SW5wdXQiLCJpbnB1dCIsInNlbGVjdGVkIiwic2V0UHJpb3JpdHlWYWx1ZSIsImVkaXRUb2RvIiwidG9kb0RPTSIsInJlbW92ZSIsInJlc2V0IiwidXBkYXRlVG9kb0RPTSIsInVwZGF0ZURhdGFzIiwib25yZXNldCIsIm5ld0xpc3RpbnB1dCIsImxpc3RGb3JtIiwibmV3TGlzdE1vZGFsIiwiYWRkVG9kbyIsIm5ld1RvZG9Nb2RhbCIsInRvZG9Gb3JtIiwidG9kb05hbWUiLCJnZXRJdGVtIiwiYXJyYXlMaXN0cyIsImFycmF5VG9kb3MiLCJpbmNsdWRlcyIsImxpc3REZXRhaWxzIiwic3BsaXQiLCJuZXdMaXN0IiwidG9kb0RldGFpbHMiLCJuZXdUb2RvIiwiZmluYWxBcnJheSIsInNvcnQiLCJhIiwiYiIsInNvcnRBcnJheXMiLCJpbnNlcnRUb2Rvc1RvTGlzdHMiLCJsb2FkRGF0YSIsImFjdGl2ZUxpc3QiLCJsb2FkUGFnZSIsImRlZmF1bHRMaXN0IiwiZGVmYXVsdExpc3RET00iLCJhbGxUb2RvRE9NUyIsIm9uY2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsVG8iLCJzY3JvbGxIZWlnaHQiLCJuZXdMaXN0RE9NIiwidG9TdHJpbmciLCJmb3JFYWNoIl0sInNvdXJjZVJvb3QiOiIifQ==