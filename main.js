(()=>{"use strict";class t{constructor(t,e,i){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,l,s,o,n){this.title=t,this.description=e,this.dueDate=i,this.priority=l,this.listNumber=s,this.completed=o,this.todoNumber=n}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function l(t,e,l){i.push(t);const s=document.createElement("div");s.classList.add("a-list"),s.setAttribute("list-number",`${t.getListNumber}`),e.insertBefore(s,l);const o=document.createElement("div");o.classList.add("left"),s.appendChild(o);const n=document.createElement("div");n.classList.add("right"),s.appendChild(n);const r=document.createElement("img");r.classList.add("icon"),r.setAttribute("src","icons/plus.png"),o.appendChild(r);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,o.appendChild(d);const u=document.createElement("img");u.classList.add("edit"),u.setAttribute("src","icons/plus.png"),n.appendChild(u);const c=document.createElement("img");c.classList.add("icon"),c.setAttribute("src","icons/plus.png"),n.appendChild(c);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),n.appendChild(a);const m=document.createElement("img");return m.classList.add("delete"),m.setAttribute("src","icons/plus.png"),n.appendChild(m),s}function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function o(t){let e=0;for(let l=0;l<i.length;l++)if(i[l].setListNumber=l,0!==i[l].getTodos.length){let s=0;const o=i[l].getListNumber;for(let n of i[l].getTodos){n.setListNumber=l,n.setTodoNumber=s;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${o}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${s}`),s++,e++}}}let n=[];function r(t,e){n.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const l=document.createElement("div");l.classList.add("a-list"),i.appendChild(l);const s=document.createElement("div");s.classList.add("description"),s.textContent=e.getDescription,i.appendChild(s);const o=document.createElement("div");o.classList.add("collapse"),i.appendChild(o);const r=document.createElement("div");r.classList.add("left"),l.appendChild(r);const d=document.createElement("div");d.classList.add("right"),l.appendChild(d);const u=document.createElement("img");u.setAttribute("src","icons/plus.png"),u.setAttribute("alt","collapse icon"),o.appendChild(u);const c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("id","todo-checkbox"),c.setAttribute("name","todo-checkbox"),1===e.getIsCompleted&&(c.checked=!0),r.appendChild(c);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,r.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),m.classList.add("edit"),d.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),g.classList.add("icon"),d.appendChild(g);const b=document.createElement("img");b.setAttribute("src","icons/plus.png"),b.classList.add("icon"),d.appendChild(b);const h=document.createElement("img");return h.setAttribute("src","icons/plus.png"),h.classList.add("delete"),d.appendChild(h),i}function d(t,e,i){null===e&&(t.firstElementChild.textContent=i),t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function u(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function c(t,e){let i=0;for(let l of t){let t=l.getTitle,s=l.getDescription,o=l.dueDate,n=l.getPriority,r=l.getListNumber,d=l.getIsCompleted,u=l.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${s},${o},${n},${r},${d},${u}`),i++}}function a(t,e){localStorage.clear();let i=0;localStorage.setItem("activeListNumber",e);for(let e of t){let t=e.getTitle,l=e.getListNumber;localStorage.setItem(`list_${i}`,`${t},${l}`),c(e.getTodos,i),i++}}let m="0";function g(t){var e;t.preventDefault(),console.log(m),i[parseInt(m)].setTitle=t.target.firstElementChild.value,t.target.previousElementSibling.textContent=t.target.firstElementChild.value,(e=t.target.parentNode.parentNode).firstElementChild.removeChild(e.firstElementChild.lastElementChild),e.firstElementChild.lastElementChild.removeAttribute("id"),a(i,m)}function b(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");f.removeChild(t);const l=Array.from(document.querySelectorAll(".a-list"));let s=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let l of e)l.getAttribute("list-number")===i&&t.removeChild(l)}(q,s,e),s=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,l){i.splice(parseInt(e),1);let s=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${s}`),s++;o(l)}(l,e,s),e===m&&function(t,e){0===i.length?d(x,null,"Add a List"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),d(x,e,i[0].getTitle),u(t,"0"),m="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),d(x,e,i[parseInt(e)-1].getTitle),u(t,""+(parseInt(e)-1)),m=""+(parseInt(e)-1))}(s,e),m=e}a(i,m)}(this);else if("edit"===t.target.classList.value)(function(t){const e=t.firstElementChild.lastElementChild;e.setAttribute("id","hide");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("maxlength","30"),i.required=!0,i.value=e.textContent;const l=document.createElement("form");return l.setAttribute("action","#"),t.firstElementChild.appendChild(l),l.appendChild(i),console.log(t),l}(this)).onsubmit=g;else{s(f),this.setAttribute("id","active-list");let t=this.getAttribute("list-number");d(x,t,this.firstElementChild.lastElementChild.textContent),u(Array.from(document.querySelectorAll(".a-todo")),t),m=t,localStorage.removeItem("activeListNumber"),localStorage.setItem("activeListNumber",m)}console.log(i)}function h(t){!0===t.checked?t.checked=!1:t.checked=!0}function p(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.table(i),q.removeChild(this),o(Array.from(document.querySelectorAll(".all-todo .a-todo")))}else if("edit"===t.target.classList.value){const t=document.querySelector(".edit-todo-modal");t.removeAttribute("id");const e=function(t,e,i){let l=t.getAttribute("list-number"),s=t.getAttribute("todo-number"),o=i[parseInt(l)].getTodos[parseInt(s)];o.setTitle="hi there";let n=e.firstElementChild.nextElementSibling;n.firstElementChild.value=o.getTitle,n.firstElementChild.nextElementSibling.lastElementChild.value=o.getDueDate;const r=o.getPriority;let d=n.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild;return function(t,e){let i=e.firstElementChild;for(;;){if(i.getAttribute("value")===t){i.selected=!0;break}i=i.nextElementSibling}}(r,d),d.parentNode.nextElementSibling.value=o.getDescription,o}(this,t,i),l=t.lastElementChild;l.onsubmit=t=>{!function(t,e){e.preventDefault(),t.setTitle=e.target.firstElementChild.value,t.setDueDate=e.target.firstElementChild.nextElementSibling.lastElementChild.value,t.setPriority=e.target.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild.value,t.setDescription=e.target.lastElementChild.previousElementSibling.value,e.target.parentNode.setAttribute("id","hide"),function(t,e){e.firstElementChild.firstElementChild.lastElementChild.textContent=`${t.getTitle} (Due: ${t.getDueDate})`,e.firstElementChild.nextElementSibling.textContent=`${t.getDescription}`}(t,document.querySelector(`.all-todo div[todo-number="${t.getTodoNumber}"]`)),a(i,m)}(e,t)},l.onreset=()=>{t.setAttribute("id","hide")}}else{"checkbox"===t.target.getAttribute("type")&&h(t.target);const e=this.getAttribute("list-number"),l=this.getAttribute("todo-number");i[parseInt(e)].getTodos[parseInt(l)].changeCompleteStatus(),h(this.firstElementChild.firstElementChild.firstElementChild),console.log(this.firstElementChild.firstElementChild.firstElementChild)}a(i,m)}const f=document.querySelector(".all-list"),C=document.querySelector("#list-name"),A=document.querySelector(".list-form"),E=document.querySelector(".add-new-list"),v=document.querySelector(".new-list-modal"),S=document.querySelector(".add-todo"),y=document.querySelector(".new-todo-modal"),L=document.querySelector(".todo-form"),N=document.querySelector("#todo-name"),T=document.querySelector("#due-date"),I=document.querySelector("#priority"),D=document.querySelector("#description"),q=document.querySelector(".all-todo"),x=document.querySelector(".todo-header");if(localStorage.getItem("activeListNumber")){let s=function(){let i=[],l=[];for(let s in localStorage)if(s.includes("list")&&!s.includes("todo")){const e=localStorage.getItem(s).split(","),l=e[0],o=parseInt(e[1]),n=new t(l,[],o);i.push(n)}else if(s.includes("todo")){const t=localStorage.getItem(s).split(","),i=t[0],o=t[1],n=t[2],r=t[3],d=parseInt(t[4]),u=parseInt(t[5]),c=parseInt(t[6]),a=new e(i,o,n,r,d,u,c);l.push(a)}let s=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);return function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(s,l),s}();m=localStorage.getItem("activeListNumber"),function(t){if(0===t.length)return;for(let e of t){l(e,f,v);for(let t of e.getTodos)r(q,t)}const e=document.querySelector(`.all-list div[list-number="${m}"]`);null!==e&&e.setAttribute("id","active-list");const s=Array.from(document.querySelectorAll(".a-todo"));d(x,m,i[parseInt(m)].getTitle),u(s,m),console.log(i)}(s)}else{let e=new t("My Day",[],0);l(e,f,v),d(x,"0","My Day"),document.querySelector(`.all-list div[list-number="${e.getListNumber}"]`).setAttribute("id","active-list"),a(i,m)}const $=document.querySelectorAll(".all-list .a-list"),k=document.querySelectorAll(".all-todo .a-todo");S.onclick=()=>{y.removeAttribute("id")},E.addEventListener("click",(()=>{v.removeAttribute("id")})),A.onsubmit=function(e){console.log(e.target),e.preventDefault();let o=new t(C.value,[],i.length);s(f);const n=l(o,f,v);n.setAttribute("id","active-list");const r=Array.from(document.querySelectorAll(".a-todo"));d(x,o.getListNumber,o.getTitle),u(r,o.getListNumber.toString()),m=o.getListNumber.toString(),n.onclick=b,e.target.reset(),v.setAttribute("id","hide"),console.log(i),a(i,m)},A.onreset=()=>{v.setAttribute("id","hide")},L.onsubmit=function(t){t.preventDefault();const l=parseInt(x.getAttribute("list-number")),s=i[parseInt(l)].getTodos.length;let o=new e(N.value,D.value,T.value,I.value,l,0,s);i[parseInt(l)].getTodos.push(o),r(q,o).onclick=p,y.setAttribute("id","hide"),t.target.reset(),console.table(i),a(i,m)},L.onreset=()=>{y.setAttribute("id","hide")},$.forEach((t=>{t.onclick=b})),k.forEach((t=>{t.onclick=p}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBVXlGLEVBQVFsSixjQUFjb0ssWUFDL0NsRixFQUFtQmdFLEVBQVFsSixjQUFjb0ssV0FDekNELEVBQVdGLFFBQVVoRSxFQUNyQlgsRUFBRU0sT0FBT3lFLFFBQ1Q5QixFQUFhbkcsYUFBYSxLQUFNLFFBQ2hDcUQsUUFBUUMsSUFBSWhFLEdBQ1p1RCxFQUFTdkQsRUFBT3dELEVBQ3BCLEVBOE9Bb0QsRUFBU0YsUUFBVSxLQUNmRyxFQUFhbkcsYUFBYSxLQUFNLE9BQU8sRUFHM0NzRyxFQUFTdEIsU0EvT1QsU0FBb0I5QixHQUNoQkEsRUFBRUUsaUJBRUYsTUFBTTFGLEVBQWE2RixTQUFTbkIsRUFBV3BCLGFBQWEsZ0JBQzlDckMsRUFBYVcsRUFBTWlFLFNBQVM3RixJQUFhTSxTQUFTNkMsT0FDeEQsSUFBSW1HLEVBQVUsSUFBSTFJLEVBQUtpSSxFQUFTekksTUFBT1MsRUFBWVQsTUFBT1UsRUFBUVYsTUFBT1csRUFBU1gsTUFBT0osRUFBWSxFQUFHaUIsR0FDeEdXLEVBQU1pRSxTQUFTN0YsSUFBYU0sU0FBU0ssS0FBSzJJLEdBSXZCcEYsRUFBb0J3QyxFQUFTNEMsR0FDckNhLFFBQVUxQyxFQUdyQmtCLEVBQWFyRyxhQUFhLEtBQU0sUUFDaENrRCxFQUFFTSxPQUFPeUUsUUFDVDVFLFFBQVErQixNQUFNOUYsR0FDZHVELEVBQVN2RCxFQUFPd0QsRUFDcEIsRUE4TkF3RCxFQUFTTixRQUFVLEtBQ2ZLLEVBQWFyRyxhQUFhLEtBQU0sT0FBTyxFQUczQzJILEVBQWVPLFNBQVE1RCxJQUNuQkEsRUFBS3VELFFBQVVoRSxDQUFjLElBR2pDK0QsRUFBWU0sU0FBUTVGLElBQ2hCQSxFQUFLdUYsUUFBVTFDLENBQVUsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8vLi9zcmMvbGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tYW5hZ2VMaXN0SW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlVG9kb0ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3N0b3JhZ2VNYW5hZ2VtZW50LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB0b2RvcywgbGlzdE51bWJlcikge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMudG9kb3MgPSB0b2RvcztcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtyZXR1cm4gdGhpcy5saXN0TnVtYmVyfVxuXG4gICAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRpdGxlKCkge3JldHVybiB0aGlzLnRpdGxlfVxuXG4gICAgZ2V0IGdldFRvZG9zKCkge3JldHVybiB0aGlzLnRvZG9zfVxuXG4gICAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXRUb2Rvcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9zID0gdmFsdWU7XG4gICAgfVxuXG4gICAgYWRkTmV3TGlzdCh0aGVUb2RvKSB7XG4gICAgICAgIHRoaXMudG9kb3MucHVzaCh0aGVUb2RvKTtcbiAgICB9XG59IiwiXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9kbyB7XG5cbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBsaXN0TnVtYmVyLCBjb21wbGV0ZWQsIHRvZG9OdW1iZXIpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBjb21wbGV0ZWQ7XG4gICAgICAgIHRoaXMudG9kb051bWJlciA9IHRvZG9OdW1iZXI7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRvZG9OdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvZG9OdW1iZXI7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9OdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldElzQ29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZWQ7XG4gICAgfVxuXG4gICAgY2hhbmdlQ29tcGxldGVTdGF0dXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbXBsZXRlZCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGdldExpc3ROdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3ROdW1iZXI7XG4gICAgfVxuXG4gICAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aXRsZTtcbiAgICB9XG4gICAgZ2V0IGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IGdldER1ZURhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmR1ZURhdGU7XG4gICAgfVxuICAgIGdldCBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJpb3JpdHk7XG4gICAgfVxuXG4gICAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0RGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0RHVlRGF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0IHNldFByaW9yaXR5KHZhbHVlKSB7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSB2YWx1ZTtcbiAgICB9XG59IiwiXG5cbmV4cG9ydCBsZXQgbGlzdHMgPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld0xpc3RJbnRlcmZhY2UobGlzdE9iamVjdCwgY29udGFpbmVyLCBpbnNlcnRfYmVmb3JlKSB7XG5cbiAgICBsaXN0cy5wdXNoKGxpc3RPYmplY3QpO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhTGlzdC5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7bGlzdE9iamVjdC5nZXRMaXN0TnVtYmVyfWApO1xuICAgIC8vIGFMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGFMaXN0LCBpbnNlcnRfYmVmb3JlKTtcblxuXG4gICAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKGxlZnQpO1xuXG4gICAgY29uc3QgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByaWdodC5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKHJpZ2h0KTtcblxuICAgIGNvbnN0IGljb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjEuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChpY29uMSk7XG5cbiAgICBjb25zdCBsaXN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsaXN0VGl0bGUuY2xhc3NMaXN0LmFkZCgnbGlzdC10aXRsZScpO1xuICAgIGxpc3RUaXRsZS50ZXh0Q29udGVudCA9IGxpc3RPYmplY3QuZ2V0VGl0bGU7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChsaXN0VGl0bGUpO1xuXG4gICAgY29uc3QgaWNvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdlZGl0Jyk7XG4gICAgaWNvbjIuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMik7XG5cbiAgICBjb25zdCBpY29uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24zLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjQpO1xuXG4gICAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICBpY29uNS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb241KTtcblxuICAgIHJldHVybiBhTGlzdDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoY29udGFpbmVyKSB7XG4gICAgaWYgKGxpc3RzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGNvbnN0IGZpcnN0TGlzdCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBpZiAoZmlyc3RMaXN0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FjdGl2ZS1saXN0Jykge1xuICAgICAgICBmaXJzdExpc3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG5leHRMaXN0ID0gZmlyc3RMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpe1xuICAgICAgICAgICAgICAgIG5leHRMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRMaXN0ID0gbmV4dExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpIHtcbiAgICBsZXQgYWxsVG9kb0luZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpc3RzW2ldLnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICBpZiAobGlzdHNbaV0uZ2V0VG9kb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0b2RvX25vID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGxpc3Rfbm8gPSBsaXN0c1tpXS5nZXRMaXN0TnVtYmVyO1xuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiBsaXN0c1tpXS5nZXRUb2Rvcykge1xuICAgICAgICAgICAgICAgIHguc2V0TGlzdE51bWJlciA9IGk7XG4gICAgICAgICAgICAgICAgeC5zZXRUb2RvTnVtYmVyID0gdG9kb19ubztcbiAgICAgICAgICAgICAgICBsZXQgdGhlRE9NID0gYWxsVG9kb3NbYWxsVG9kb0luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGVET00ucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICAgICAgICAgIHRoZURPTS5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7bGlzdF9ub31gKTtcbiAgICAgICAgICAgICAgICB0aGVET00ucmVtb3ZlQXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuICAgICAgICAgICAgICAgIHRoZURPTS5zZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJywgYCR7dG9kb19ub31gKTtcbiAgICAgICAgICAgICAgICB0b2RvX25vKys7XG4gICAgICAgICAgICAgICAgYWxsVG9kb0luZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgbGlzdE51bWJlciwgYWxsVG9kb3MpIHtcblxuICAgIGxpc3RzLnNwbGljZShwYXJzZUludChsaXN0TnVtYmVyKSwgMSk7XG4gICAgLy8gIHVwZGF0ZSBkb21zXG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIGZvciAobGV0IGxpc3Qgb2YgY29udGFpbmVyKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBsaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtpbmRleH1gKTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgQXJyYXkgYW5kIHRvZG8gRE9NJ3NcbiAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0TGlzdChlbGVtZW50KSB7XG4gICAgY29uc3QgbGlzdFRpdGxlID0gZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkO1xuICAgIGxpc3RUaXRsZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcblxuICAgIC8vIGNyZWF0ZSBhbiBpbnB1dCBFbGVtZW50XG4gICAgY29uc3QgbGlzdE5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgbGlzdE5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgIGxpc3ROYW1lSW5wdXQuc2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnLCAnMzAnKTtcbiAgICBsaXN0TmFtZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcbiAgICBsaXN0TmFtZUlucHV0LnZhbHVlID0gbGlzdFRpdGxlLnRleHRDb250ZW50O1xuXG4gICAgLy8gY3JlYXRlIHRoZSBmb3JtXG4gICAgY29uc3QgbGlzdE5hbWVGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgIGxpc3ROYW1lRm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsICcjJyk7XG5cbiAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKGxpc3ROYW1lRm9ybSk7XG4gICAgbGlzdE5hbWVGb3JtLmFwcGVuZENoaWxkKGxpc3ROYW1lSW5wdXQpO1xuICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGxpc3ROYW1lRm9ybTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdW5kb0NoYW5nZShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59IiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFUb2RvLmNsYXNzTGlzdC5hZGQoJ2EtdG9kbycpO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2NvbGxhcHNlIGljb24nKTtcbiAgICBjb2xsYXBzZS5hcHBlbmRDaGlsZChjb2xsYXBzZUltZyk7XG5cbiAgICBjb25zdCBpbnB1dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgaWYgKHRoZVRvZG8uZ2V0SXNDb21wbGV0ZWQgPT09IDEpIHtcbiAgICAgICAgaW5wdXQxLmNoZWNrZWQgPSB0cnVlO1xuICAgIH1cbiAgICBsZWZ0LmFwcGVuZENoaWxkKGlucHV0MSk7XG5cbiAgICBjb25zdCB0aXRsZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZVRvZG8udGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKHRpdGxlVG9kbyk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjIuY2xhc3NMaXN0LmFkZCgnZWRpdCcpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICAgIGNvbnN0IGljb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjMuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uMy5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjMpO1xuXG4gICAgY29uc3QgaWNvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjUuY2xhc3NMaXN0LmFkZCgnZGVsZXRlJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xuXG4gICAgcmV0dXJuIGFUb2RvO1xufVxuXG5cbi8vIGNoYW5nZSB0b2RvIGhlYWRlclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGl0bGUpIHtcbiAgICBpZiAobGlzdE51bWJlciA9PT0gbnVsbCkge1xuICAgICAgICB0b2RvSGVhZGVyLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIHRvZG9IZWFkZXIuc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4gICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xufVxuXG4vLyBzaG93IGFsbCB0b2RvcyBvZiBhIHBhcnRpY3VsYXIgbGlzdFxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgaWYgKGFsbFRvZG9zID09PSBudWxsKSByZXR1cm5cbiAgICBmb3IgKGxldCB0b2RvIG9mIGFsbFRvZG9zKSB7XG4gICAgICAgIGlmICh0b2RvLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKSA9PT0gbGlzdE51bWJlcikge1xuICAgICAgICAgICAgdG9kby5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2RvLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZWxhdGVkVG9kbyhjb250YWluZXIsIGFsbFRvZG9zLCBsaXN0TnVtYmVyKXtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGFsbFRvZG9zKSB7XG4gICAgICAgIGNvbnN0IGxpc3RfbnVtID0gdG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGlmIChsaXN0X251bSA9PT0gbGlzdE51bWJlcikge1xuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHRvZG8pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHNldFByaW9yaXR5VmFsdWUoc2VsZWN0ZWRPbmUsIHByaW9yaXR5SW5wdXQpIHtcblxuICAgIGxldCBpbnB1dCA9IHByaW9yaXR5SW5wdXQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgaWYgKGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSA9PT0gc2VsZWN0ZWRPbmUpIHtcbiAgICAgICAgICAgIGlucHV0LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0ID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdFRvZG8oZWxlbWVudCwgZWRpdE1vZGFsLCBsaXN0cykge1xuICAgIGxldCBsaXN0TnVtYmVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgbGV0IHRvZG9OdW1iZXIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcbiAgICBsZXQgdGhlVG9kbyA9IGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvc1twYXJzZUludCh0b2RvTnVtYmVyKV07XG4gICAgdGhlVG9kby5zZXRUaXRsZSA9ICdoaSB0aGVyZSc7XG4gICAgbGV0IGVkaXRGb3JtID0gZWRpdE1vZGFsLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZztcbiAgICBlZGl0Rm9ybS5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZSA9IHRoZVRvZG8uZ2V0VGl0bGU7XG4gICAgZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudmFsdWUgPSB0aGVUb2RvLmdldER1ZURhdGU7XG4gICAgY29uc3Qgc2VsZWN0ZWRPbmUgPSB0aGVUb2RvLmdldFByaW9yaXR5O1xuICAgIGxldCBwcmlvcml0eUlucHV0ID0gZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkO1xuICAgIHNldFByaW9yaXR5VmFsdWUoc2VsZWN0ZWRPbmUsIHByaW9yaXR5SW5wdXQpO1xuICAgIHByaW9yaXR5SW5wdXQucGFyZW50Tm9kZS5uZXh0RWxlbWVudFNpYmxpbmcudmFsdWUgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuXG4gICAgcmV0dXJuIHRoZVRvZG87XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRvZG9ET00odGhlVG9kbywgdG9kb0RPTSkge1xuICAgIHRvZG9ET00uZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0VGl0bGV9IChEdWU6ICR7dGhlVG9kby5nZXREdWVEYXRlfSlgO1xuICAgIHRvZG9ET00uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gYCR7dGhlVG9kby5nZXREZXNjcmlwdGlvbn1gXG59IFxuXG5cblxuICAgICAgICAvLyA8ZGl2IGNsYXNzPVwiZWRpdC10b2RvLW1vZGFsXCIgaWQ9XCJoaWRlXCI+XG4gICAgICAgIC8vICAgICA8aDIgY2xhc3M9XCJ0b2RvLW1vZGFsLWhlYWRlclwiPkVkaXQgVGFzazwvaDI+XG5cbiAgICAgICAgLy8gICAgIDxmb3JtIGNsYXNzPVwiZWRpdC1mb3JtXCIgYWN0aW9uPVwiI1wiPlxuICAgICAgICAvLyAgICAgICAgIDxpbnB1dCBpZD1cInRvZG8tbmFtZVwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInRvZG8tbmFtZVwiIG1heGxlbmd0aD1cIjUwXCIgcGxhY2Vob2xkZXI9XCJUaXRsZVwiIHJlcXVpcmVkPlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJkdWUtZGF0ZVwiPlxuICAgICAgICAvLyAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZHVlLWRhdGVcIj5EdWUgRGF0ZTo8L2xhYmVsPlxuICAgICAgICAvLyAgICAgICAgICAgICA8aW5wdXQgaWQ9XCJkdWUtZGF0ZVwiIHR5cGU9XCJkYXRlXCIgbmFtZT1cImR1ZS1kYXRlXCI+XG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICAgICAgPGRpdiBjbGFzcz1cInByaW9yaXR5XCI+XG4gICAgICAgIC8vICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwcmlvcml0eVwiPlNlbGVjdCBQcmlvcml0eSAoT3B0aW9uYWwpPC9sYWJlbD5cbiAgICAgICAgLy8gICAgICAgICAgICAgPHNlbGVjdCBuYW1lPVwicHJpb3JpdHlcIiBpZD1cInByaW9yaXR5XCI+XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwibm9uZVwiIHNlbGVjdGVkPk5vbmU8L29wdGlvbj5cbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJoaWdoXCI+SGlnaDwvb3B0aW9uPlxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lZGl1bVwiPk1lZGl1bTwvb3B0aW9uPlxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm5vcm1hbFwiPk5vcm1hbDwvb3B0aW9uPlxuICAgICAgICAvLyAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgLy8gICAgICAgICA8L2Rpdj5cbiAgICAgICAgLy8gICAgICAgICA8dGV4dGFyZWEgbmFtZT1cImRlc2NyaXB0aW9uXCIgaWQ9XCJkZXNjcmlwdGlvblwiIGNvbHM9XCIzMFwiIHJvd3M9XCIxMFwiIG1heGxlbmd0aD1cIjMwMFwiIHBsYWNlaG9sZGVyPVwiZ2l2ZSBzb21lIGRlc2NyaXB0aW9uIChvcHRpb25hbClcIj48L3RleHRhcmVhPlxuICAgICAgICAvLyAgICAgICAgIDxkaXYgY2xhc3M9XCJhZGQtY2FuY2VsXCI+XG4gICAgICAgIC8vICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwibW9kYWwtdG9kb1wiPlNhdmU8L2J1dHRvbj5cbiAgICAgICAgLy8gICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwicmVzZXRcIiBjbGFzcz1cImNhbmNlbC10b2RvXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgIC8vICAgICAgICAgPC9kaXY+XG4gICAgICAgIC8vICAgICA8L2Zvcm0+XG4gICAgICAgIC8vIDwvZGl2PlxuXG4iLCJpbXBvcnQgTGlzdCBmcm9tICcuL2xpc3QnXG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8nXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVRvZG8oYW5BcnJheSwgbCkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGFuQXJyYXkpIHtcbiAgICAgICAgbGV0IHRpdGxlID0gdG9kby5nZXRUaXRsZTtcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gdG9kby5nZXREZXNjcmlwdGlvbjtcbiAgICAgICAgbGV0IGR1ZURhdGUgPSB0b2RvLmR1ZURhdGU7XG4gICAgICAgIGxldCBwcmlvcml0eSA9IHRvZG8uZ2V0UHJpb3JpdHk7XG4gICAgICAgIGxldCBsaXN0TnVtYmVyID0gdG9kby5nZXRMaXN0TnVtYmVyO1xuICAgICAgICBsZXQgY29tcGxldGVkID0gdG9kby5nZXRJc0NvbXBsZXRlZDtcbiAgICAgICAgbGV0IHRvZG9OdW1iZXIgPSB0b2RvLmdldFRvZG9OdW1iZXI7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1fdG9kb18ke3R9YCwgYCR7dGl0bGV9LCR7ZGVzY3JpcHRpb259LCR7ZHVlRGF0ZX0sJHtwcmlvcml0eX0sJHtsaXN0TnVtYmVyfSwke2NvbXBsZXRlZH0sJHt0b2RvTnVtYmVyfWApO1xuICAgICAgICB0Kys7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcikge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gICAgbGV0IGwgPSAwO1xuXG4gICAgLy8gc2F2ZSBsaXN0c1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVMaXN0TnVtYmVyJywgYWN0aXZlTGlzdE51bWJlcik7XG4gICAgZm9yIChsZXQgZWxlbSBvZiBsaXN0cykge1xuICAgICAgICBsZXQgbGlzdFRpdGxlID0gZWxlbS5nZXRUaXRsZTtcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSBlbGVtLmdldExpc3ROdW1iZXI7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1gLCBgJHtsaXN0VGl0bGV9LCR7bGlzdE51bWJlcn1gKTtcbiAgICAgICAgc2F2ZVRvZG8oZWxlbS5nZXRUb2RvcywgbCk7XG4gICAgICAgIGwrKztcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gc29ydEFycmF5cyhhcnJheUxpc3RzKSB7XG4gICAgY29uc3QgbmV3TGlzdHMgPSBhcnJheUxpc3RzLnNvcnQoKGEsYikgPT4ge1xuICAgICAgICBpZiAoYS5nZXRMaXN0TnVtYmVyID4gYi5nZXRMaXN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gbmV3TGlzdHM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFRvZG9zVG9MaXN0cyhmaW5hbEFycmF5LCBhcnJheVRvZG9zKSB7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhcnJheVRvZG9zKSB7XG4gICAgICAgIGZpbmFsQXJyYXlbdG9kby5nZXRMaXN0TnVtYmVyXS5nZXRUb2Rvcy5wdXNoKHRvZG8pO1xuICAgIH1cbiAgICAvLyBzb3J0IHRoZSB0b2Rvc1xuICAgIGZvciAobGV0IGxpc3Qgb2YgZmluYWxBcnJheSkge1xuICAgICAgICBjb25zdCBuZXdUb2RvID0gbGlzdC5nZXRUb2Rvcy5zb3J0KChhLGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmdldFRvZG9OdW1iZXIgPiBiLmdldFRvZG9OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgbGlzdC5zZXRUb2RvcyA9IG5ld1RvZG87XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRGF0YSgpIHtcbiAgICBsZXQgYXJyYXlMaXN0cyA9IFtdO1xuICAgIGxldCBhcnJheVRvZG9zID0gW107XG4gICAgZm9yIChsZXQgZWxlbSBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgaWYgKGVsZW0uaW5jbHVkZXMoJ2xpc3QnKSAmJiAhZWxlbS5pbmNsdWRlcygndG9kbycpKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0RGV0YWlscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGxpc3REZXRhaWxzWzBdO1xuICAgICAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IHBhcnNlSW50KGxpc3REZXRhaWxzWzFdKVxuICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IG5ldyBMaXN0KHRpdGxlLCBbXSwgbGlzdE51bWJlcik7XG4gICAgICAgICAgICBhcnJheUxpc3RzLnB1c2gobmV3TGlzdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZWxlbS5pbmNsdWRlcygndG9kbycpKSB7XG4gICAgICAgICAgICBjb25zdCB0b2RvRGV0YWlscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHRvZG9EZXRhaWxzWzBdO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSB0b2RvRGV0YWlsc1sxXTtcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSB0b2RvRGV0YWlsc1syXTtcbiAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5ID0gdG9kb0RldGFpbHNbM107XG4gICAgICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNF0pO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGVkID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNV0pO1xuICAgICAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHBhcnNlSW50KHRvZG9EZXRhaWxzWzZdKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1RvZG8gPSBuZXcgVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBsaXN0TnVtYmVyLCBjb21wbGV0ZWQsIHRvZG9OdW1iZXIpO1xuICAgICAgICAgICAgYXJyYXlUb2Rvcy5wdXNoKG5ld1RvZG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBmaW5hbEFycmF5ID0gc29ydEFycmF5cyhhcnJheUxpc3RzKTtcbiAgICBpbnNlcnRUb2Rvc1RvTGlzdHMoZmluYWxBcnJheSwgYXJyYXlUb2Rvcyk7XG4gICAgcmV0dXJuIGZpbmFsQXJyYXk7XG4gICAgY29uc29sZS5sb2coJ3ByaW50aW5nIHRoZSBjb252ZXJ0ZWQgYXJyYXknKVxuICAgIGNvbnNvbGUubG9nKGZpbmFsQXJyYXkpO1xufSIsImltcG9ydCBMaXN0IGZyb20gJy4vbGlzdCdcbmltcG9ydCBUb2RvIGZyb20gJy4vdG9kbydcbmltcG9ydCB7bGlzdHMsIGFkZE5ld0xpc3RJbnRlcmZhY2UsIHJlbW92ZUV4aXN0aW5nTWFya2VyLCB1cGRhdGVMaXN0c0FuZFRvZG9zLCB1cGRhdGVBcnJheUFuZFRvZG8sIGVkaXRMaXN0LCB1bmRvQ2hhbmdlfSBmcm9tICcuL21hbmFnZUxpc3RJbnRlcmZhY2UnXG5pbXBvcnQge2FkZE5ld1RvZG9JbnRlcmZhY2UsIGNoYW5nZVRvZG9IZWFkZXIsIHNob3dMaXN0c1RvZG9zLCBkZWxldGVSZWxhdGVkVG9kbywgZWRpdFRvZG8sIHVwZGF0ZVRvZG9ET019IGZyb20gJy4vbWFuYWdlVG9kb0ludGVyZmFjZSdcbmltcG9ydCB7c2F2ZURhdGEsIGxvYWREYXRhfSBmcm9tICcuL3N0b3JhZ2VNYW5hZ2VtZW50J1xuXG5sZXQgYWN0aXZlTGlzdE51bWJlciA9ICcwJztcblxuXG5mdW5jdGlvbiBhZGRMaXN0KGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLnRhcmdldCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbWFuYWdlIEFycmF5IG9mIGxpc3RzXG4gICAgbGV0IG5ld0xpc3QgPSBuZXcgTGlzdChuZXdMaXN0aW5wdXQudmFsdWUsIFtdLCBsaXN0cy5sZW5ndGgpO1xuICAgIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgIGNvbnN0IG5ld0xpc3RET00gPSBhZGROZXdMaXN0SW50ZXJmYWNlKG5ld0xpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gICAgbmV3TGlzdERPTS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG5cbiAgICAvLyBtYW5hZ2UgdG9kbyBpbnRlcmZhY2VcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG5ld0xpc3QuZ2V0TGlzdE51bWJlciwgbmV3TGlzdC5nZXRUaXRsZSk7XG4gICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIG5ld0xpc3QuZ2V0TGlzdE51bWJlci50b1N0cmluZygpKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gbmV3TGlzdC5nZXRMaXN0TnVtYmVyLnRvU3RyaW5nKCk7XG4gICAgbmV3TGlzdERPTS5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRfYV9Ub2RvKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQodG9kb0hlYWRlci5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykpO1xuICAgIGNvbnN0IHRvZG9OdW1iZXIgPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MubGVuZ3RoO1xuICAgIGxldCBuZXdUb2RvID0gbmV3IFRvZG8odG9kb05hbWUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlLCBwcmlvcml0eS52YWx1ZSwgbGlzdE51bWJlciwgMCwgdG9kb051bWJlcik7XG4gICAgbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLnB1c2gobmV3VG9kbyk7XG5cblxuICAgIC8vIGJyaW5nIHRoZSB0b2RvIGludGVyZmFjZVxuICAgIGNvbnN0IG5ld1RvZG9ET00gPSBhZGROZXdUb2RvSW50ZXJmYWNlKGFsbFRvZG8sIG5ld1RvZG8pO1xuICAgIG5ld1RvZG9ET00ub25jbGljayA9IG1vZGlmeVRvZG87XG5cbiAgICAvLyBoaWRlIG1vZGFsXG4gICAgbmV3VG9kb01vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgIGUudGFyZ2V0LnJlc2V0KCk7XG4gICAgY29uc29sZS50YWJsZShsaXN0cyk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIHNhdmVFZGl0ZWRMaXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coYWN0aXZlTGlzdE51bWJlcik7XG4gICAgbGV0IHRoZUxpc3QgPSBsaXN0c1twYXJzZUludChhY3RpdmVMaXN0TnVtYmVyKV07XG4gICAgdGhlTGlzdC5zZXRUaXRsZSA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlO1xuICAgIGUudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xuICAgIHVuZG9DaGFuZ2UoZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlKTtcbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuZnVuY3Rpb24gbWFrZUxpc3RBY3RpdmUoZSkge1xuICAgIC8vIGhhbmRsZSBkZWxldGUsIHVwLCBkb3duLCBjb21wbGV0ZVxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGRlbGV0ZUVsZW1lbnQodGhpcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgIGNvbnN0IGxpc3ROYW1lRm9ybSA9IGVkaXRMaXN0KHRoaXMpO1xuICAgICAgICBsaXN0TmFtZUZvcm0ub25zdWJtaXQgPSBzYXZlRWRpdGVkTGlzdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGdldCB0aGUgbGlzdE9iamVjdFxuICAgICAgICBsZXQgbGlzdE51bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3ROdW1iZXIsIHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCk7XG4gICAgICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuICAgICAgICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbGlzdE51bWJlcik7XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWN0aXZlTGlzdE51bWJlcicpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlTGlzdE51bWJlcicsIGFjdGl2ZUxpc3ROdW1iZXIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbn1cblxuXG5mdW5jdGlvbiBzaG93UmVsYXRlZFRvZG9zKHgsIGxpc3RObyl7XG4gICAgaWYgKGxpc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG51bGwsICdBZGQgYSBMaXN0Jyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxpc3RObyA9PT0gYDBgKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiMFwiXScpO1xuICAgICAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0Tm8sIGxpc3RzWzBdLmdldFRpdGxlKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoeCwgYDBgKTtcbiAgICAgICAgYWN0aXZlTGlzdE51bWJlciA9ICcwJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiJHtwYXJzZUludChsaXN0Tm8pLTF9XCJdYCk7XG4gICAgICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbcGFyc2VJbnQobGlzdE5vKS0xXS5nZXRUaXRsZSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKHgsIGAke3BhcnNlSW50KGxpc3RObyktMX1gKTtcbiAgICAgICAgYWN0aXZlTGlzdE51bWJlciA9IGAke3BhcnNlSW50KGxpc3RObyktMX1gO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBkZWxldGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QudmFsdWUgPT09ICdhLWxpc3QnKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIC8vIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgICAgICBhbGxMaXN0LnJlbW92ZUNoaWxkKGVsZW1lbnQpXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtbGlzdCcpKTtcbiAgICAgICAgbGV0IHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICBkZWxldGVSZWxhdGVkVG9kbyhhbGxUb2RvLCB4LCBpbmRleCk7XG4gICAgICAgIHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgaW5kZXgsIHgpO1xuICAgICAgICBpZiAoaW5kZXggPT09IGFjdGl2ZUxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHNob3dSZWxhdGVkVG9kb3MoeCwgaW5kZXgpO31cbiAgICAgICAgYWN0aXZlTGlzdE51bWJlciA9IGluZGV4O1xuICAgIH1cbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUNoZWNrKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gdXBkYXRlRGF0YXModGhlVG9kbywgZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGVUb2RvLnNldFRpdGxlID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgdGhlVG9kby5zZXREdWVEYXRlID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgdGhlVG9kby5zZXRQcmlvcml0eSA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICB0aGVUb2RvLnNldERlc2NyaXB0aW9uID0gZS50YXJnZXQubGFzdEVsZW1lbnRDaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnZhbHVlO1xuICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgY29uc3QgdG9kb0RPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtdG9kbyBkaXZbdG9kby1udW1iZXI9XCIke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1cIl1gKTtcbiAgICB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBtb2RpZnlUb2RvKGUpIHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSAnZGVsZXRlJykge1xuICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNvbnN0IHRvZG9OdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcblxuICAgICAgICAvLyBkZWxldGUgdG9kbyBmcm9tIHRoZSBsaXN0cyBBcnJheSBhbmQgdGhlIGRvbVxuICAgICAgICBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3Muc3BsaWNlKHBhcnNlSW50KHRvZG9OdW1iZXIpLCAxKTtcbiAgICAgICAgY29uc29sZS50YWJsZShsaXN0cyk7XG4gICAgICAgIGFsbFRvZG8ucmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRvZG8gYXJyYXlcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdlZGl0Jykge1xuICAgICAgICBjb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLW1vZGFsJyk7XG4gICAgICAgIGVkaXRNb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIGNvbnN0IHRoZVRvZG8gPSBlZGl0VG9kbyh0aGlzLCBlZGl0TW9kYWwsIGxpc3RzKTtcbiAgICAgICAgY29uc3QgZWRpdEZvcm0gPSBlZGl0TW9kYWwubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgZWRpdEZvcm0ub25zdWJtaXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlRGF0YXModGhlVG9kbywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWRpdEZvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICAgICAgICAgIGVkaXRNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICBjaGFuZ2VDaGVjayhlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBjb25zdCB0b2RvTnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJyk7XG4gICAgICAgIGxldCB0aGVMaXN0ID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildO1xuICAgICAgICBsZXQgdGhlVG9kbyA9IHRoZUxpc3QuZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICAgICAgICB0aGVUb2RvLmNoYW5nZUNvbXBsZXRlU3RhdHVzKCk7XG4gICAgICAgIGNoYW5nZUNoZWNrKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICB9XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIGxvYWRQYWdlKGFuQXJyYXkpIHtcbiAgICBpZiAoYW5BcnJheS5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBmb3IgKGxldCBsaXN0IG9mIGFuQXJyYXkpIHtcbiAgICAgICAgYWRkTmV3TGlzdEludGVyZmFjZShsaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwpO1xuICAgICAgICBmb3IgKGxldCB0b2RvIG9mIGxpc3QuZ2V0VG9kb3MpIHtcbiAgICAgICAgICAgIGFkZE5ld1RvZG9JbnRlcmZhY2UoYWxsVG9kbywgdG9kbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke2FjdGl2ZUxpc3ROdW1iZXJ9XCJdYCk7XG4gICAgLy8gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgaWYgKGFjdGl2ZUxpc3QgIT09IG51bGwpIHtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgYWN0aXZlTGlzdE51bWJlciwgbGlzdHNbcGFyc2VJbnQoYWN0aXZlTGlzdE51bWJlcildLmdldFRpdGxlKTtcbiAgICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgYWN0aXZlTGlzdE51bWJlcik7XG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xufVxuXG5cbi8vICMjIyMjIyMjIyMjIyMjIE1BSU4gRlVOQ1RJT04gIyMjIyMjIyMjIyMjIyMjIyNcblxuXG4vLyBBbGwgZ2xvYmFsIHZhcmlhYmxlcyBhbmQgZXZlbnRMaXN0ZW5lcnNcbmNvbnN0IGFsbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LW5hbWUnKTtcbmNvbnN0IGxpc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtZm9ybScpO1xuY29uc3QgYWRkTmV3TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtbmV3LWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctbGlzdC1tb2RhbCcpO1xuY29uc3QgYWRkVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLW1vZGFsJyk7XG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZvcm0nKTtcbmNvbnN0IHRvZG9OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG8tbmFtZScpO1xuY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkdWUtZGF0ZScpO1xuY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKTtcbmNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJyk7XG5jb25zdCBhbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC10b2RvJyk7XG5jb25zdCB0b2RvSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taGVhZGVyJyk7XG5cblxuXG4vLyBsb2FkaW5nIHRoZSBleGlzdGluZyBkYXRhXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInKSkge1xuICAgIGxldCBhbkFycmF5ID0gbG9hZERhdGEoKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInKTtcbiAgICBsb2FkUGFnZShhbkFycmF5KTtcbiAgICAvLyBsb2FkUGFnZShhbkFycmF5KTtcbn1cbmVsc2Uge1xuICAgIC8vIEFkZGluZyBkZWZhdWx0IGxpc3RcbiAgICBsZXQgZGVmYXVsdExpc3QgPSBuZXcgTGlzdCgnTXkgRGF5JywgW10sIDApO1xuICAgIGFkZE5ld0xpc3RJbnRlcmZhY2UoZGVmYXVsdExpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCAnMCcsICdNeSBEYXknKTtcbiAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7ZGVmYXVsdExpc3QuZ2V0TGlzdE51bWJlcn1cIl1gKTtcbiAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLWxpc3QgLmEtbGlzdCcpO1xuY29uc3QgYWxsVG9kb0RPTVMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpO1xuXG5hZGRUb2RvLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn1cblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufSlcblxuXG5saXN0Rm9ybS5vbnN1Ym1pdCA9IGFkZExpc3Q7XG5saXN0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxudG9kb0Zvcm0ub25zdWJtaXQgPSBhZGRfYV9Ub2RvO1xudG9kb0Zvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbmRlZmF1bHRMaXN0RE9NLmZvckVhY2gobGlzdCA9PiB7XG4gICAgbGlzdC5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG59KTtcblxuYWxsVG9kb0RPTVMuZm9yRWFjaCh0b2RvID0+IHtcbiAgICB0b2RvLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xufSk7Il0sIm5hbWVzIjpbIkxpc3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidG9kb3MiLCJsaXN0TnVtYmVyIiwidGhpcyIsImdldExpc3ROdW1iZXIiLCJzZXRMaXN0TnVtYmVyIiwidmFsdWUiLCJnZXRUaXRsZSIsImdldFRvZG9zIiwic2V0VG9kb3MiLCJzZXRUaXRsZSIsImFkZE5ld0xpc3QiLCJ0aGVUb2RvIiwicHVzaCIsIlRvZG8iLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsInRvZG9OdW1iZXIiLCJnZXRUb2RvTnVtYmVyIiwic2V0VG9kb051bWJlciIsImdldElzQ29tcGxldGVkIiwiY2hhbmdlQ29tcGxldGVTdGF0dXMiLCJnZXREZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldERlc2NyaXB0aW9uIiwic2V0RHVlRGF0ZSIsInNldFByaW9yaXR5IiwibGlzdHMiLCJhZGROZXdMaXN0SW50ZXJmYWNlIiwibGlzdE9iamVjdCIsImNvbnRhaW5lciIsImluc2VydF9iZWZvcmUiLCJhTGlzdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImluc2VydEJlZm9yZSIsImxlZnQiLCJhcHBlbmRDaGlsZCIsInJpZ2h0IiwiaWNvbjEiLCJsaXN0VGl0bGUiLCJ0ZXh0Q29udGVudCIsImljb24yIiwiaWNvbjMiLCJpY29uNCIsImljb241IiwicmVtb3ZlRXhpc3RpbmdNYXJrZXIiLCJsZW5ndGgiLCJmaXJzdExpc3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5leHRMaXN0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidXBkYXRlQXJyYXlBbmRUb2RvIiwiYWxsVG9kb3MiLCJhbGxUb2RvSW5kZXgiLCJpIiwidG9kb19ubyIsImxpc3Rfbm8iLCJ4IiwidGhlRE9NIiwiYWRkTmV3VG9kb0ludGVyZmFjZSIsImFUb2RvIiwiY29sbGFwc2UiLCJjb2xsYXBzZUltZyIsImlucHV0MSIsImNoZWNrZWQiLCJ0aXRsZVRvZG8iLCJjaGFuZ2VUb2RvSGVhZGVyIiwidG9kb0hlYWRlciIsInNob3dMaXN0c1RvZG9zIiwidG9kbyIsInNhdmVUb2RvIiwiYW5BcnJheSIsImwiLCJ0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInNhdmVEYXRhIiwiYWN0aXZlTGlzdE51bWJlciIsImNsZWFyIiwiZWxlbSIsInNhdmVFZGl0ZWRMaXN0IiwiZSIsImVsZW1lbnQiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZUludCIsInRhcmdldCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJsYXN0RWxlbWVudENoaWxkIiwibWFrZUxpc3RBY3RpdmUiLCJpbmRleCIsImFsbExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGVsZXRlUmVsYXRlZFRvZG8iLCJhbGxUb2RvIiwic3BsaWNlIiwibGlzdCIsInVwZGF0ZUxpc3RzQW5kVG9kb3MiLCJsaXN0Tm8iLCJxdWVyeVNlbGVjdG9yIiwic2hvd1JlbGF0ZWRUb2RvcyIsImRlbGV0ZUVsZW1lbnQiLCJsaXN0TmFtZUlucHV0IiwicmVxdWlyZWQiLCJsaXN0TmFtZUZvcm0iLCJlZGl0TGlzdCIsIm9uc3VibWl0IiwicmVtb3ZlSXRlbSIsImNoYW5nZUNoZWNrIiwibW9kaWZ5VG9kbyIsInRhYmxlIiwiZWRpdE1vZGFsIiwiZWRpdEZvcm0iLCJzZWxlY3RlZE9uZSIsInByaW9yaXR5SW5wdXQiLCJpbnB1dCIsInNlbGVjdGVkIiwic2V0UHJpb3JpdHlWYWx1ZSIsImVkaXRUb2RvIiwidG9kb0RPTSIsInVwZGF0ZVRvZG9ET00iLCJ1cGRhdGVEYXRhcyIsIm9ucmVzZXQiLCJuZXdMaXN0aW5wdXQiLCJsaXN0Rm9ybSIsIm5ld0xpc3RNb2RhbCIsImFkZFRvZG8iLCJuZXdUb2RvTW9kYWwiLCJ0b2RvRm9ybSIsInRvZG9OYW1lIiwiZ2V0SXRlbSIsImFycmF5TGlzdHMiLCJhcnJheVRvZG9zIiwiaW5jbHVkZXMiLCJsaXN0RGV0YWlscyIsInNwbGl0IiwibmV3TGlzdCIsInRvZG9EZXRhaWxzIiwibmV3VG9kbyIsImZpbmFsQXJyYXkiLCJzb3J0IiwiYSIsImIiLCJzb3J0QXJyYXlzIiwiaW5zZXJ0VG9kb3NUb0xpc3RzIiwibG9hZERhdGEiLCJhY3RpdmVMaXN0IiwibG9hZFBhZ2UiLCJkZWZhdWx0TGlzdCIsImRlZmF1bHRMaXN0RE9NIiwiYWxsVG9kb0RPTVMiLCJvbmNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5ld0xpc3RET00iLCJ0b1N0cmluZyIsInJlc2V0IiwiZm9yRWFjaCJdLCJzb3VyY2VSb290IjoiIn0=