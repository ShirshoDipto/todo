(()=>{"use strict";class t{constructor(t,e,i,l=0){this.title=t,this.todos=e,this.listNumber=i,this.isDefault=l}get getIsDefault(){return this.isDefault}set setIsDefault(t){this.isDefault=t}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,l,s,o,r){this.title=t,this.description=e,this.dueDate=i,this.priority=l,this.listNumber=s,this.completed=o,this.todoNumber=r}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function l(t,e,l){i.push(t);const s=document.createElement("div");s.classList.add("a-list"),s.setAttribute("list-number",`${t.getListNumber}`),e.insertBefore(s,l);const o=document.createElement("div");o.classList.add("left"),s.appendChild(o);const r=document.createElement("div");r.classList.add("right"),s.appendChild(r);const n=document.createElement("img");n.classList.add("icon"),1===t.getIsDefault?n.setAttribute("src","icons/weather-sunny.png"):n.setAttribute("src","icons/todo.png"),o.appendChild(n);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,o.appendChild(d);const u=document.createElement("img");u.classList.add("edit"),u.setAttribute("src","icons/pencil.png"),r.appendChild(u);const c=document.createElement("img");c.classList.add("up-arrow"),c.setAttribute("src","icons/arrow-up.png"),r.appendChild(c);const a=document.createElement("img");a.classList.add("down-arrow"),a.setAttribute("src","icons/arrow-down.png"),r.appendChild(a);const m=document.createElement("img");return m.classList.add("delete"),m.setAttribute("src","icons/trash.png"),r.appendChild(m),s}function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function o(t){let e=0;for(let l=0;l<i.length;l++)if(i[l].setListNumber=l,0!==i[l].getTodos.length){let s=0;const o=i[l].getListNumber;for(let r of i[l].getTodos){r.setListNumber=l,r.setTodoNumber=s;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${o}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${s}`),s++,e++}}}let r=[];function n(t,e){r.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const l=document.createElement("div");l.classList.add("a-list"),i.appendChild(l);const s=document.createElement("div");s.classList.add("description"),s.textContent=e.getDescription,i.appendChild(s);const o=document.createElement("div");o.classList.add("collapse"),i.appendChild(o);const n=document.createElement("div");n.classList.add("left"),l.appendChild(n);const d=document.createElement("div");d.classList.add("right"),l.appendChild(d);const u=document.createElement("img");u.setAttribute("src","icons/unfold.png"),u.setAttribute("alt","collapse icon"),o.appendChild(u);const c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("id","todo-checkbox"),c.setAttribute("name","todo-checkbox"),1===e.getIsCompleted&&(c.checked=!0),n.appendChild(c);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,n.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/pencil.png"),m.classList.add("edit"),d.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/arrow-up.png"),g.classList.add("up-arrow"),d.appendChild(g);const h=document.createElement("img");h.setAttribute("src","icons/arrow-down.png"),h.classList.add("down-arrow"),d.appendChild(h);const b=document.createElement("img");return b.setAttribute("src","icons/trash.png"),b.classList.add("delete"),d.appendChild(b),i}function d(t,e,i){null===e&&(t.firstElementChild.textContent=i),t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function u(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function c(t,e){let i=0;for(let l of t){let t=l.getTitle,s=l.getDescription,o=l.dueDate,r=l.getPriority,n=l.getListNumber,d=l.getIsCompleted,u=l.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${s},${o},${r},${n},${d},${u}`),i++}}function a(t,e){localStorage.clear();let i=0;localStorage.setItem("activeListNumber",e);for(let e of t){let t=e.getTitle,l=e.getListNumber;1===e.getIsDefault?localStorage.setItem(`list_${i}`,`${t},${l},1`):localStorage.setItem(`list_${i}`,`${t},${l}`),c(e.getTodos,i),i++}}let m="0";function g(t){var e;t.preventDefault(),console.log(m),i[parseInt(m)].setTitle=t.target.firstElementChild.value,t.target.previousElementSibling.textContent=t.target.firstElementChild.value,d($,m,t.target.firstElementChild.value),(e=t.target.parentNode.parentNode).firstElementChild.removeChild(e.firstElementChild.lastElementChild),e.firstElementChild.lastElementChild.removeAttribute("id"),a(i,m)}function h(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");f.removeChild(t);const l=Array.from(document.querySelectorAll(".a-list"));let s=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let l of e)l.getAttribute("list-number")===i&&t.removeChild(l)}(q,s,e),s=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,l){i.splice(parseInt(e),1);let s=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${s}`),s++;o(l)}(l,e,s),e===m&&function(t,e){0===i.length?d($,null,"Add a List"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),d($,e,i[0].getTitle),u(t,"0"),m="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),d($,e,i[parseInt(e)-1].getTitle),u(t,""+(parseInt(e)-1)),m=""+(parseInt(e)-1))}(s,e),m=document.querySelector("#active-list").getAttribute("list-number"),console.log(m)}a(i,m)}(this);else if("edit"===t.target.classList.value)(function(t){const e=t.firstElementChild.lastElementChild;e.setAttribute("id","hide");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("maxlength","30"),i.required=!0,i.value=e.textContent;const l=document.createElement("form");return l.setAttribute("action","#"),l.classList.add("edit-list-form"),t.firstElementChild.appendChild(l),l.appendChild(i),console.log(t),l}(this)).onsubmit=g;else{s(f),this.setAttribute("id","active-list");let t=this.getAttribute("list-number");d($,t,this.firstElementChild.lastElementChild.textContent),u(Array.from(document.querySelectorAll(".a-todo")),t),m=t,localStorage.removeItem("activeListNumber"),localStorage.setItem("activeListNumber",m)}console.log(i)}function b(t){!0===t.checked?t.checked=!1:t.checked=!0}function p(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.table(i),q.removeChild(this),o(Array.from(document.querySelectorAll(".all-todo .a-todo")))}else if("edit"===t.target.classList.value){const t=document.querySelector(".edit-todo-modal");t.removeAttribute("id");const e=function(t,e,i){let l=t.getAttribute("list-number"),s=t.getAttribute("todo-number"),o=i[parseInt(l)].getTodos[parseInt(s)];o.setTitle="hi there";let r=e.firstElementChild.nextElementSibling;r.firstElementChild.value=o.getTitle,r.firstElementChild.nextElementSibling.lastElementChild.value=o.getDueDate;const n=o.getPriority;let d=r.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild;return function(t,e){let i=e.firstElementChild;for(;;){if(i.getAttribute("value")===t){i.selected=!0;break}i=i.nextElementSibling}}(n,d),d.parentNode.nextElementSibling.value=o.getDescription,o}(this,t,i),l=t.lastElementChild;l.onsubmit=t=>{!function(t,e){e.preventDefault(),t.setTitle=e.target.firstElementChild.value,t.setDueDate=e.target.firstElementChild.nextElementSibling.lastElementChild.value,t.setPriority=e.target.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild.value,t.setDescription=e.target.lastElementChild.previousElementSibling.value,e.target.parentNode.setAttribute("id","hide"),function(t,e){e.firstElementChild.firstElementChild.lastElementChild.textContent=`${t.getTitle} (Due: ${t.getDueDate})`,e.firstElementChild.nextElementSibling.textContent=`${t.getDescription}`}(t,document.querySelector(`.all-todo div[todo-number="${t.getTodoNumber}"]`)),a(i,m)}(e,t)},l.onreset=()=>{t.setAttribute("id","hide")}}else{"checkbox"===t.target.getAttribute("type")&&b(t.target);const e=this.getAttribute("list-number"),l=this.getAttribute("todo-number");i[parseInt(e)].getTodos[parseInt(l)].changeCompleteStatus(),b(this.firstElementChild.firstElementChild.firstElementChild),console.log(this.firstElementChild.firstElementChild.firstElementChild)}a(i,m)}const f=document.querySelector(".all-list"),A=document.querySelector("#list-name"),C=document.querySelector(".list-form"),E=document.querySelector(".add-new-list"),v=document.querySelector(".new-list-modal"),S=document.querySelector(".add-todo"),y=document.querySelector(".new-todo-modal"),L=document.querySelector(".todo-form"),N=document.querySelector("#todo-name"),T=document.querySelector("#due-date"),D=document.querySelector("#priority"),I=document.querySelector("#description"),q=document.querySelector(".all-todo"),$=document.querySelector(".todo-header");if(localStorage.getItem("activeListNumber")){let s=function(){let i=[],l=[];for(let s in localStorage)if(s.includes("list")&&!s.includes("todo")){const e=localStorage.getItem(s).split(","),l=e[0],o=parseInt(e[1]);if(3===e.length){const e=new t(l,[],o,1);i.push(e)}else{const e=new t(l,[],o);i.push(e)}}else if(s.includes("todo")){const t=localStorage.getItem(s).split(","),i=t[0],o=t[1],r=t[2],n=t[3],d=parseInt(t[4]),u=parseInt(t[5]),c=parseInt(t[6]),a=new e(i,o,r,n,d,u,c);l.push(a)}let s=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);return function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(s,l),s}();m=localStorage.getItem("activeListNumber"),function(t){if(0===t.length)return;for(let e of t){l(e,f,v);for(let t of e.getTodos)n(q,t)}const e=document.querySelector(`.all-list div[list-number="${m}"]`);null!==e&&e.setAttribute("id","active-list");const s=Array.from(document.querySelectorAll(".a-todo"));d($,m,i[parseInt(m)].getTitle),u(s,m),console.log(i)}(s)}else{let e=new t("My Day",[],0,1);l(e,f,v),d($,"0","My Day"),document.querySelector(`.all-list div[list-number="${e.getListNumber}"]`).setAttribute("id","active-list"),a(i,m)}const x=document.querySelectorAll(".all-list .a-list"),w=document.querySelectorAll(".all-todo .a-todo");S.onclick=()=>{y.removeAttribute("id")},E.addEventListener("click",(()=>{v.removeAttribute("id"),f.scrollTo(0,f.scrollHeight)})),C.onsubmit=function(e){console.log(e.target),e.preventDefault();let o=new t(A.value,[],i.length);s(f);const r=l(o,f,v);r.setAttribute("id","active-list");const n=Array.from(document.querySelectorAll(".a-todo"));d($,o.getListNumber,o.getTitle),u(n,o.getListNumber.toString()),m=o.getListNumber.toString(),r.onclick=h,e.target.reset(),v.setAttribute("id","hide"),f.scrollTo(0,f.scrollHeight),console.log(i),a(i,m)},C.onreset=()=>{v.setAttribute("id","hide")},L.onsubmit=function(t){t.preventDefault();const l=parseInt($.getAttribute("list-number")),s=i[parseInt(l)].getTodos.length;let o=new e(N.value,I.value,T.value,D.value,l,0,s);i[parseInt(l)].getTodos.push(o),n(q,o).onclick=p,y.setAttribute("id","hide"),q.scrollTo(0,q.scrollHeight),t.target.reset(),console.table(i),a(i,m)},L.onreset=()=>{y.setAttribute("id","hide")},x.forEach((t=>{t.onclick=h})),w.forEach((t=>{t.onclick=p}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtpSSxFQUFTM0ksTUFBT1csRUFBWVgsTUFBT1ksRUFBUVosTUFBT2EsRUFBU2IsTUFBT0wsRUFBWSxFQUFHb0IsR0FDeEdXLEVBQU1pRSxTQUFTaEcsSUFBYVMsU0FBU0ssS0FBSzJJLEdBSXZCcEYsRUFBb0J3QyxFQUFTNEMsR0FDckNhLFFBQVUxQyxFQUdyQmtCLEVBQWFyRyxhQUFhLEtBQU0sUUFDaENvRSxFQUFRMkQsU0FBUyxFQUFHM0QsRUFBUTRELGNBQzVCOUUsRUFBRU0sT0FBTzJFLFFBQ1Q5RSxRQUFRK0IsTUFBTTlGLEdBQ2R1RCxFQUFTdkQsRUFBT3dELEVBQ3BCLEVBcU9Bd0QsRUFBU04sUUFBVSxLQUNmSyxFQUFhckcsYUFBYSxLQUFNLE9BQU8sRUFHM0MySCxFQUFlUyxTQUFROUQsSUFDbkJBLEVBQUt1RCxRQUFVaEUsQ0FBYyxJQUdqQytELEVBQVlRLFNBQVE5RixJQUNoQkEsRUFBS3VGLFFBQVUxQyxDQUFVLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlTGlzdEludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZVRvZG9JbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9zdG9yYWdlTWFuYWdlbWVudC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdG9kb3MsIGxpc3ROdW1iZXIsIGlzRGVmYXVsdD0wKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b2RvcyA9IHRvZG9zO1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICB0aGlzLmlzRGVmYXVsdCA9IGlzRGVmYXVsdDtcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0RlZmF1bHQ7XG4gICAgfVxuXG4gICAgc2V0IHNldElzRGVmYXVsdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmlzRGVmYXVsdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRMaXN0TnVtYmVyKCkge3JldHVybiB0aGlzLmxpc3ROdW1iZXJ9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7cmV0dXJuIHRoaXMudGl0bGV9XG5cbiAgICBnZXQgZ2V0VG9kb3MoKSB7cmV0dXJuIHRoaXMudG9kb3N9XG5cbiAgICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGROZXdMaXN0KHRoZVRvZG8pIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRoZVRvZG8pO1xuICAgIH1cbn0iLCJcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3ROdW1iZXIsIGNvbXBsZXRlZCwgdG9kb051bWJlcikge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VG9kb051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb051bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNDb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICBjaGFuZ2VDb21wbGV0ZVN0YXR1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdE51bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICB9XG4gICAgZ2V0IGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUpIHtcblxuICAgIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0T2JqZWN0LmdldExpc3ROdW1iZXJ9YCk7XG4gICAgLy8gYUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYUxpc3QsIGluc2VydF9iZWZvcmUpO1xuXG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgaWNvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWYgKGxpc3RPYmplY3QuZ2V0SXNEZWZhdWx0ID09PSAxKSB7XG4gICAgICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3dlYXRoZXItc3VubnkucG5nJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpY29uMS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy90b2RvLnBuZycpO1xuICAgIH1cbiAgICBsZWZ0LmFwcGVuZENoaWxkKGljb24xKTtcblxuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RUaXRsZS5jbGFzc0xpc3QuYWRkKCdsaXN0LXRpdGxlJyk7XG4gICAgbGlzdFRpdGxlLnRleHRDb250ZW50ID0gbGlzdE9iamVjdC5nZXRUaXRsZTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGxpc3RUaXRsZSk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2VkaXQnKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wZW5jaWwucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5jbGFzc0xpc3QuYWRkKCd1cC1hcnJvdycpO1xuICAgIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL2Fycm93LXVwLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuY2xhc3NMaXN0LmFkZCgnZG93bi1hcnJvdycpO1xuICAgIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL2Fycm93LWRvd24ucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjQpO1xuXG4gICAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICBpY29uNS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy90cmFzaC5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgICByZXR1cm4gYUxpc3Q7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4aXN0aW5nTWFya2VyKGNvbnRhaW5lcikge1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBmaXJzdExpc3QgPSBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgaWYgKGZpcnN0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpIHtcbiAgICAgICAgZmlyc3RMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBuZXh0TGlzdCA9IGZpcnN0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAobmV4dExpc3QuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWN0aXZlLWxpc3QnKXtcbiAgICAgICAgICAgICAgICBuZXh0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0TGlzdCA9IG5leHRMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKSB7XG4gICAgbGV0IGFsbFRvZG9JbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0c1tpXS5zZXRMaXN0TnVtYmVyID0gaTtcbiAgICAgICAgaWYgKGxpc3RzW2ldLmdldFRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdG9kb19ubyA9IDA7XG4gICAgICAgICAgICBjb25zdCBsaXN0X25vID0gbGlzdHNbaV0uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgICAgIGZvciAobGV0IHggb2YgbGlzdHNbaV0uZ2V0VG9kb3MpIHtcbiAgICAgICAgICAgICAgICB4LnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICAgICAgICAgIHguc2V0VG9kb051bWJlciA9IHRvZG9fbm87XG4gICAgICAgICAgICAgICAgbGV0IHRoZURPTSA9IGFsbFRvZG9zW2FsbFRvZG9JbmRleF07XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3Rfbm99YCk7XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RvZG9fbm99YCk7XG4gICAgICAgICAgICAgICAgdG9kb19ubysrO1xuICAgICAgICAgICAgICAgIGFsbFRvZG9JbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGxpc3ROdW1iZXIsIGFsbFRvZG9zKSB7XG5cbiAgICBsaXN0cy5zcGxpY2UocGFyc2VJbnQobGlzdE51bWJlciksIDEpO1xuICAgIC8vICB1cGRhdGUgZG9tc1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICBmb3IgKGxldCBsaXN0IG9mIGNvbnRhaW5lcikge1xuICAgICAgICBsaXN0LnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgbGlzdC5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7aW5kZXh9YCk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIEFycmF5IGFuZCB0b2RvIERPTSdzXG4gICAgdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdExpc3QoZWxlbWVudCkge1xuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBsaXN0VGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG5cbiAgICAvLyBjcmVhdGUgYW4gaW5wdXQgRWxlbWVudFxuICAgIGNvbnN0IGxpc3ROYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGxpc3ROYW1lSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICBsaXN0TmFtZUlucHV0LnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzMwJyk7XG4gICAgbGlzdE5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG4gICAgbGlzdE5hbWVJbnB1dC52YWx1ZSA9IGxpc3RUaXRsZS50ZXh0Q29udGVudDtcblxuICAgIC8vIGNyZWF0ZSB0aGUgZm9ybVxuICAgIGNvbnN0IGxpc3ROYW1lRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBsaXN0TmFtZUZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnIycpO1xuICAgIGxpc3ROYW1lRm9ybS5jbGFzc0xpc3QuYWRkKCdlZGl0LWxpc3QtZm9ybScpXG5cbiAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKGxpc3ROYW1lRm9ybSk7XG4gICAgbGlzdE5hbWVGb3JtLmFwcGVuZENoaWxkKGxpc3ROYW1lSW5wdXQpO1xuICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGxpc3ROYW1lRm9ybTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdW5kb0NoYW5nZShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59IiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFUb2RvLmNsYXNzTGlzdC5hZGQoJ2EtdG9kbycpO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy91bmZvbGQucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnY29sbGFwc2UgaWNvbicpO1xuICAgIGNvbGxhcHNlLmFwcGVuZENoaWxkKGNvbGxhcHNlSW1nKTtcblxuICAgIGNvbnN0IGlucHV0MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvZG8tY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RvZG8tY2hlY2tib3gnKTtcbiAgICBpZiAodGhlVG9kby5nZXRJc0NvbXBsZXRlZCA9PT0gMSkge1xuICAgICAgICBpbnB1dDEuY2hlY2tlZCA9IHRydWU7XG4gICAgfVxuICAgIGxlZnQuYXBwZW5kQ2hpbGQoaW5wdXQxKTtcblxuICAgIGNvbnN0IHRpdGxlVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRpdGxlVG9kby50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0VGl0bGV9IChEdWU6ICR7dGhlVG9kby5nZXREdWVEYXRlfSlgO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQodGl0bGVUb2RvKTtcblxuICAgIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjIuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGVuY2lsLnBuZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2VkaXQnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMik7XG5cbiAgICBjb25zdCBpY29uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL2Fycm93LXVwLnBuZycpO1xuICAgIGljb24zLmNsYXNzTGlzdC5hZGQoJ3VwLWFycm93Jyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjMpO1xuXG4gICAgY29uc3QgaWNvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9hcnJvdy1kb3duLnBuZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2Rvd24tYXJyb3cnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3RyYXNoLnBuZycpO1xuICAgIGljb241LmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZScpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb241KTtcblxuICAgIHJldHVybiBhVG9kbztcbn1cblxuXG4vLyBjaGFuZ2UgdG9kbyBoZWFkZXJcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3ROdW1iZXIsIHRpdGxlKSB7XG4gICAgaWYgKGxpc3ROdW1iZXIgPT09IG51bGwpIHtcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIH1cbiAgICB0b2RvSGVhZGVyLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0TnVtYmVyfWApO1xuICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZTtcbn1cblxuLy8gc2hvdyBhbGwgdG9kb3Mgb2YgYSBwYXJ0aWN1bGFyIGxpc3RcbmV4cG9ydCBmdW5jdGlvbiBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbGlzdE51bWJlcikge1xuICAgIGlmIChhbGxUb2RvcyA9PT0gbnVsbCkgcmV0dXJuXG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBpZiAodG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykgPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHRvZG8ucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9kby5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUmVsYXRlZFRvZG8oY29udGFpbmVyLCBhbGxUb2RvcywgbGlzdE51bWJlcil7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBjb25zdCBsaXN0X251bSA9IHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBpZiAobGlzdF9udW0gPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KSB7XG5cbiAgICBsZXQgaW5wdXQgPSBwcmlvcml0eUlucHV0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPT09IHNlbGVjdGVkT25lKSB7XG4gICAgICAgICAgICBpbnB1dC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRUb2RvKGVsZW1lbnQsIGVkaXRNb2RhbCwgbGlzdHMpIHtcbiAgICBsZXQgbGlzdE51bWJlciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgIGxldCB0b2RvTnVtYmVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJyk7XG4gICAgbGV0IHRoZVRvZG8gPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICAgIHRoZVRvZG8uc2V0VGl0bGUgPSAnaGkgdGhlcmUnO1xuICAgIGxldCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQudmFsdWUgPSB0aGVUb2RvLmdldFRpdGxlO1xuICAgIGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlID0gdGhlVG9kby5nZXREdWVEYXRlO1xuICAgIGNvbnN0IHNlbGVjdGVkT25lID0gdGhlVG9kby5nZXRQcmlvcml0eTtcbiAgICBsZXQgcHJpb3JpdHlJbnB1dCA9IGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KTtcbiAgICBwcmlvcml0eUlucHV0LnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnZhbHVlID0gdGhlVG9kby5nZXREZXNjcmlwdGlvbjtcblxuICAgIHJldHVybiB0aGVUb2RvO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pIHtcbiAgICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0RGVzY3JpcHRpb259YFxufSIsImltcG9ydCBMaXN0IGZyb20gJy4vbGlzdCdcbmltcG9ydCBUb2RvIGZyb20gJy4vdG9kbydcblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlVG9kbyhhbkFycmF5LCBsKSB7XG4gICAgbGV0IHQgPSAwO1xuICAgIGZvciAobGV0IHRvZG8gb2YgYW5BcnJheSkge1xuICAgICAgICBsZXQgdGl0bGUgPSB0b2RvLmdldFRpdGxlO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSB0b2RvLmdldERlc2NyaXB0aW9uO1xuICAgICAgICBsZXQgZHVlRGF0ZSA9IHRvZG8uZHVlRGF0ZTtcbiAgICAgICAgbGV0IHByaW9yaXR5ID0gdG9kby5nZXRQcmlvcml0eTtcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSB0b2RvLmdldExpc3ROdW1iZXI7XG4gICAgICAgIGxldCBjb21wbGV0ZWQgPSB0b2RvLmdldElzQ29tcGxldGVkO1xuICAgICAgICBsZXQgdG9kb051bWJlciA9IHRvZG8uZ2V0VG9kb051bWJlcjtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGxpc3RfJHtsfV90b2RvXyR7dH1gLCBgJHt0aXRsZX0sJHtkZXNjcmlwdGlvbn0sJHtkdWVEYXRlfSwke3ByaW9yaXR5fSwke2xpc3ROdW1iZXJ9LCR7Y29tcGxldGVkfSwke3RvZG9OdW1iZXJ9YCk7XG4gICAgICAgIHQrKztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKSB7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKClcbiAgICBsZXQgbCA9IDA7XG5cbiAgICAvLyBzYXZlIGxpc3RzXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInLCBhY3RpdmVMaXN0TnVtYmVyKTtcbiAgICBmb3IgKGxldCBlbGVtIG9mIGxpc3RzKSB7XG4gICAgICAgIGxldCBsaXN0VGl0bGUgPSBlbGVtLmdldFRpdGxlO1xuICAgICAgICBsZXQgbGlzdE51bWJlciA9IGVsZW0uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgaWYgKGVsZW0uZ2V0SXNEZWZhdWx0ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGxpc3RfJHtsfWAsIGAke2xpc3RUaXRsZX0sJHtsaXN0TnVtYmVyfSwxYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGlzdF8ke2x9YCwgYCR7bGlzdFRpdGxlfSwke2xpc3ROdW1iZXJ9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc2F2ZVRvZG8oZWxlbS5nZXRUb2RvcywgbCk7XG4gICAgICAgIGwrKztcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gc29ydEFycmF5cyhhcnJheUxpc3RzKSB7XG4gICAgY29uc3QgbmV3TGlzdHMgPSBhcnJheUxpc3RzLnNvcnQoKGEsYikgPT4ge1xuICAgICAgICBpZiAoYS5nZXRMaXN0TnVtYmVyID4gYi5nZXRMaXN0TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gbmV3TGlzdHM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFRvZG9zVG9MaXN0cyhmaW5hbEFycmF5LCBhcnJheVRvZG9zKSB7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhcnJheVRvZG9zKSB7XG4gICAgICAgIGZpbmFsQXJyYXlbdG9kby5nZXRMaXN0TnVtYmVyXS5nZXRUb2Rvcy5wdXNoKHRvZG8pO1xuICAgIH1cbiAgICAvLyBzb3J0IHRoZSB0b2Rvc1xuICAgIGZvciAobGV0IGxpc3Qgb2YgZmluYWxBcnJheSkge1xuICAgICAgICBjb25zdCBuZXdUb2RvID0gbGlzdC5nZXRUb2Rvcy5zb3J0KChhLGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmdldFRvZG9OdW1iZXIgPiBiLmdldFRvZG9OdW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgbGlzdC5zZXRUb2RvcyA9IG5ld1RvZG87XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRGF0YSgpIHtcbiAgICBsZXQgYXJyYXlMaXN0cyA9IFtdO1xuICAgIGxldCBhcnJheVRvZG9zID0gW107XG4gICAgZm9yIChsZXQgZWxlbSBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgaWYgKGVsZW0uaW5jbHVkZXMoJ2xpc3QnKSAmJiAhZWxlbS5pbmNsdWRlcygndG9kbycpKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0RGV0YWlscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGxpc3REZXRhaWxzWzBdO1xuICAgICAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IHBhcnNlSW50KGxpc3REZXRhaWxzWzFdKTtcbiAgICAgICAgICAgIGlmIChsaXN0RGV0YWlscy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExpc3QodGl0bGUsIFtdLCBsaXN0TnVtYmVyLCAxKTtcbiAgICAgICAgICAgICAgICBhcnJheUxpc3RzLnB1c2gobmV3TGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExpc3QodGl0bGUsIFtdLCBsaXN0TnVtYmVyKTtcbiAgICAgICAgICAgICAgICBhcnJheUxpc3RzLnB1c2gobmV3TGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZWxlbS5pbmNsdWRlcygndG9kbycpKSB7XG4gICAgICAgICAgICBjb25zdCB0b2RvRGV0YWlscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHRvZG9EZXRhaWxzWzBdO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSB0b2RvRGV0YWlsc1sxXTtcbiAgICAgICAgICAgIGNvbnN0IGR1ZURhdGUgPSB0b2RvRGV0YWlsc1syXTtcbiAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5ID0gdG9kb0RldGFpbHNbM107XG4gICAgICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNF0pO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGVkID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNV0pO1xuICAgICAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHBhcnNlSW50KHRvZG9EZXRhaWxzWzZdKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1RvZG8gPSBuZXcgVG9kbyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBsaXN0TnVtYmVyLCBjb21wbGV0ZWQsIHRvZG9OdW1iZXIpO1xuICAgICAgICAgICAgYXJyYXlUb2Rvcy5wdXNoKG5ld1RvZG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBmaW5hbEFycmF5ID0gc29ydEFycmF5cyhhcnJheUxpc3RzKTtcbiAgICBpbnNlcnRUb2Rvc1RvTGlzdHMoZmluYWxBcnJheSwgYXJyYXlUb2Rvcyk7XG4gICAgcmV0dXJuIGZpbmFsQXJyYXk7XG4gICAgY29uc29sZS5sb2coJ3ByaW50aW5nIHRoZSBjb252ZXJ0ZWQgYXJyYXknKVxuICAgIGNvbnNvbGUubG9nKGZpbmFsQXJyYXkpO1xufSIsImltcG9ydCBMaXN0IGZyb20gJy4vbGlzdCdcbmltcG9ydCBUb2RvIGZyb20gJy4vdG9kbydcbmltcG9ydCB7bGlzdHMsIGFkZE5ld0xpc3RJbnRlcmZhY2UsIHJlbW92ZUV4aXN0aW5nTWFya2VyLCB1cGRhdGVMaXN0c0FuZFRvZG9zLCB1cGRhdGVBcnJheUFuZFRvZG8sIGVkaXRMaXN0LCB1bmRvQ2hhbmdlfSBmcm9tICcuL21hbmFnZUxpc3RJbnRlcmZhY2UnXG5pbXBvcnQge2FkZE5ld1RvZG9JbnRlcmZhY2UsIGNoYW5nZVRvZG9IZWFkZXIsIHNob3dMaXN0c1RvZG9zLCBkZWxldGVSZWxhdGVkVG9kbywgZWRpdFRvZG8sIHVwZGF0ZVRvZG9ET019IGZyb20gJy4vbWFuYWdlVG9kb0ludGVyZmFjZSdcbmltcG9ydCB7c2F2ZURhdGEsIGxvYWREYXRhfSBmcm9tICcuL3N0b3JhZ2VNYW5hZ2VtZW50J1xuXG5sZXQgYWN0aXZlTGlzdE51bWJlciA9ICcwJztcblxuXG5mdW5jdGlvbiBhZGRMaXN0KGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLnRhcmdldCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbWFuYWdlIEFycmF5IG9mIGxpc3RzXG4gICAgbGV0IG5ld0xpc3QgPSBuZXcgTGlzdChuZXdMaXN0aW5wdXQudmFsdWUsIFtdLCBsaXN0cy5sZW5ndGgpO1xuICAgIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgIGNvbnN0IG5ld0xpc3RET00gPSBhZGROZXdMaXN0SW50ZXJmYWNlKG5ld0xpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gICAgbmV3TGlzdERPTS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG5cbiAgICAvLyBtYW5hZ2UgdG9kbyBpbnRlcmZhY2VcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG5ld0xpc3QuZ2V0TGlzdE51bWJlciwgbmV3TGlzdC5nZXRUaXRsZSk7XG4gICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIG5ld0xpc3QuZ2V0TGlzdE51bWJlci50b1N0cmluZygpKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gbmV3TGlzdC5nZXRMaXN0TnVtYmVyLnRvU3RyaW5nKCk7XG4gICAgbmV3TGlzdERPTS5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgYWxsTGlzdC5zY3JvbGxUbygwLCBhbGxMaXN0LnNjcm9sbEhlaWdodCk7XG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRfYV9Ub2RvKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQodG9kb0hlYWRlci5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykpO1xuICAgIGNvbnN0IHRvZG9OdW1iZXIgPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MubGVuZ3RoO1xuICAgIGxldCBuZXdUb2RvID0gbmV3IFRvZG8odG9kb05hbWUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlLCBwcmlvcml0eS52YWx1ZSwgbGlzdE51bWJlciwgMCwgdG9kb051bWJlcik7XG4gICAgbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLnB1c2gobmV3VG9kbyk7XG5cblxuICAgIC8vIGJyaW5nIHRoZSB0b2RvIGludGVyZmFjZVxuICAgIGNvbnN0IG5ld1RvZG9ET00gPSBhZGROZXdUb2RvSW50ZXJmYWNlKGFsbFRvZG8sIG5ld1RvZG8pO1xuICAgIG5ld1RvZG9ET00ub25jbGljayA9IG1vZGlmeVRvZG87XG5cbiAgICAvLyBoaWRlIG1vZGFsXG4gICAgbmV3VG9kb01vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgIGFsbFRvZG8uc2Nyb2xsVG8oMCwgYWxsVG9kby5zY3JvbGxIZWlnaHQpO1xuICAgIGUudGFyZ2V0LnJlc2V0KCk7XG4gICAgY29uc29sZS50YWJsZShsaXN0cyk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIHNhdmVFZGl0ZWRMaXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coYWN0aXZlTGlzdE51bWJlcik7XG4gICAgbGV0IHRoZUxpc3QgPSBsaXN0c1twYXJzZUludChhY3RpdmVMaXN0TnVtYmVyKV07XG4gICAgdGhlTGlzdC5zZXRUaXRsZSA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlO1xuICAgIGUudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xuICAgIGxldCBsaXN0TnVtYmVyID0gYWN0aXZlTGlzdE51bWJlcjtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3ROdW1iZXIsIGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlKTtcbiAgICB1bmRvQ2hhbmdlKGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIG1ha2VMaXN0QWN0aXZlKGUpIHtcbiAgICAvLyBoYW5kbGUgZGVsZXRlLCB1cCwgZG93biwgY29tcGxldGVcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSAnZGVsZXRlJykge1xuICAgICAgICBkZWxldGVFbGVtZW50KHRoaXMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdlZGl0Jykge1xuICAgICAgICBjb25zdCBsaXN0TmFtZUZvcm0gPSBlZGl0TGlzdCh0aGlzKTtcbiAgICAgICAgbGlzdE5hbWVGb3JtLm9uc3VibWl0ID0gc2F2ZUVkaXRlZExpc3Q7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgdGhlIGxpc3RPYmplY3RcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aGlzLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtdG9kbycpKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIGxpc3ROdW1iZXIpO1xuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInLCBhY3RpdmVMaXN0TnVtYmVyKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gc2hvd1JlbGF0ZWRUb2Rvcyh4LCBsaXN0Tm8pe1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBudWxsLCAnQWRkIGEgTGlzdCcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChsaXN0Tm8gPT09IGAwYCkge1xuICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIjBcIl0nKTtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1swXS5nZXRUaXRsZSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKHgsIGAwYCk7XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSAnMCc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7cGFyc2VJbnQobGlzdE5vKS0xfVwiXWApO1xuICAgICAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0Tm8sIGxpc3RzW3BhcnNlSW50KGxpc3RObyktMV0uZ2V0VGl0bGUpO1xuICAgICAgICBzaG93TGlzdHNUb2Rvcyh4LCBgJHtwYXJzZUludChsaXN0Tm8pLTF9YCk7XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBgJHtwYXJzZUludChsaXN0Tm8pLTF9YDtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gZGVsZXRlRWxlbWVudChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LnZhbHVlID09PSAnYS1saXN0Jykge1xuICAgICAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICAvLyByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgYWxsTGlzdC5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLWxpc3QnKSk7XG4gICAgICAgIGxldCB4ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpKTtcbiAgICAgICAgZGVsZXRlUmVsYXRlZFRvZG8oYWxsVG9kbywgeCwgaW5kZXgpO1xuICAgICAgICB4ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpKTtcbiAgICAgICAgdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGluZGV4LCB4KTtcbiAgICAgICAgaWYgKGluZGV4ID09PSBhY3RpdmVMaXN0TnVtYmVyKSB7XG4gICAgICAgICAgICBzaG93UmVsYXRlZFRvZG9zKHgsIGluZGV4KTt9XG4gICAgICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWN0aXZlLWxpc3QnKS5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGFjdGl2ZUxpc3ROdW1iZXIpO1xuICAgIH1cbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUNoZWNrKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gdXBkYXRlRGF0YXModGhlVG9kbywgZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGVUb2RvLnNldFRpdGxlID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgdGhlVG9kby5zZXREdWVEYXRlID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLmxhc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgdGhlVG9kby5zZXRQcmlvcml0eSA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICB0aGVUb2RvLnNldERlc2NyaXB0aW9uID0gZS50YXJnZXQubGFzdEVsZW1lbnRDaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnZhbHVlO1xuICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgY29uc3QgdG9kb0RPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtdG9kbyBkaXZbdG9kby1udW1iZXI9XCIke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1cIl1gKTtcbiAgICB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBtb2RpZnlUb2RvKGUpIHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSAnZGVsZXRlJykge1xuICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNvbnN0IHRvZG9OdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcblxuICAgICAgICAvLyBkZWxldGUgdG9kbyBmcm9tIHRoZSBsaXN0cyBBcnJheSBhbmQgdGhlIGRvbVxuICAgICAgICBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3Muc3BsaWNlKHBhcnNlSW50KHRvZG9OdW1iZXIpLCAxKTtcbiAgICAgICAgY29uc29sZS50YWJsZShsaXN0cyk7XG4gICAgICAgIGFsbFRvZG8ucmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRvZG8gYXJyYXlcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdlZGl0Jykge1xuICAgICAgICBjb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10b2RvLW1vZGFsJyk7XG4gICAgICAgIGVkaXRNb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIGNvbnN0IHRoZVRvZG8gPSBlZGl0VG9kbyh0aGlzLCBlZGl0TW9kYWwsIGxpc3RzKTtcbiAgICAgICAgY29uc3QgZWRpdEZvcm0gPSBlZGl0TW9kYWwubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgZWRpdEZvcm0ub25zdWJtaXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlRGF0YXModGhlVG9kbywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWRpdEZvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICAgICAgICAgIGVkaXRNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICBjaGFuZ2VDaGVjayhlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBjb25zdCB0b2RvTnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJyk7XG4gICAgICAgIGxldCB0aGVMaXN0ID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildO1xuICAgICAgICBsZXQgdGhlVG9kbyA9IHRoZUxpc3QuZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICAgICAgICB0aGVUb2RvLmNoYW5nZUNvbXBsZXRlU3RhdHVzKCk7XG4gICAgICAgIGNoYW5nZUNoZWNrKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICB9XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIGxvYWRQYWdlKGFuQXJyYXkpIHtcbiAgICBpZiAoYW5BcnJheS5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBmb3IgKGxldCBsaXN0IG9mIGFuQXJyYXkpIHtcbiAgICAgICAgYWRkTmV3TGlzdEludGVyZmFjZShsaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwpO1xuICAgICAgICBmb3IgKGxldCB0b2RvIG9mIGxpc3QuZ2V0VG9kb3MpIHtcbiAgICAgICAgICAgIGFkZE5ld1RvZG9JbnRlcmZhY2UoYWxsVG9kbywgdG9kbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke2FjdGl2ZUxpc3ROdW1iZXJ9XCJdYCk7XG4gICAgLy8gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgaWYgKGFjdGl2ZUxpc3QgIT09IG51bGwpIHtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgYWN0aXZlTGlzdE51bWJlciwgbGlzdHNbcGFyc2VJbnQoYWN0aXZlTGlzdE51bWJlcildLmdldFRpdGxlKTtcbiAgICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgYWN0aXZlTGlzdE51bWJlcik7XG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xufVxuXG5cbi8vICMjIyMjIyMjIyMjIyMjIE1BSU4gRlVOQ1RJT04gIyMjIyMjIyMjIyMjIyMjIyNcblxuXG4vLyBBbGwgZ2xvYmFsIHZhcmlhYmxlcyBhbmQgZXZlbnRMaXN0ZW5lcnNcbmNvbnN0IGFsbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LW5hbWUnKTtcbmNvbnN0IGxpc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtZm9ybScpO1xuY29uc3QgYWRkTmV3TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtbmV3LWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctbGlzdC1tb2RhbCcpO1xuY29uc3QgYWRkVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLW1vZGFsJyk7XG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZvcm0nKTtcbmNvbnN0IHRvZG9OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG8tbmFtZScpO1xuY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkdWUtZGF0ZScpO1xuY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKTtcbmNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJyk7XG5jb25zdCBhbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC10b2RvJyk7XG5jb25zdCB0b2RvSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taGVhZGVyJyk7XG5cblxuXG4vLyBsb2FkaW5nIHRoZSBleGlzdGluZyBkYXRhXG5pZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInKSkge1xuICAgIGxldCBhbkFycmF5ID0gbG9hZERhdGEoKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZUxpc3ROdW1iZXInKTtcbiAgICBsb2FkUGFnZShhbkFycmF5KTtcbiAgICAvLyBsb2FkUGFnZShhbkFycmF5KTtcbn1cbmVsc2Uge1xuICAgIC8vIEFkZGluZyBkZWZhdWx0IGxpc3RcbiAgICBsZXQgZGVmYXVsdExpc3QgPSBuZXcgTGlzdCgnTXkgRGF5JywgW10sIDAsIDEpO1xuICAgIGFkZE5ld0xpc3RJbnRlcmZhY2UoZGVmYXVsdExpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCAnMCcsICdNeSBEYXknKTtcbiAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7ZGVmYXVsdExpc3QuZ2V0TGlzdE51bWJlcn1cIl1gKTtcbiAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAvLyBhY3RpdmVMaXN0LmNsYXNzTGlzdC50b2dnbGUoJ2RlZmF1bHQtbGlzdCcpO1xuICAgIC8vIGFjdGl2ZUxpc3QucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcbiAgICAvLyBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3dlYXRoZXItc3VubnkucG5nJyk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmNvbnN0IGRlZmF1bHRMaXN0RE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC1saXN0IC5hLWxpc3QnKTtcbmNvbnN0IGFsbFRvZG9ET01TID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKTtcblxuYWRkVG9kby5vbmNsaWNrID0gKCkgPT4ge1xuICAgIG5ld1RvZG9Nb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59XG5cbmFkZE5ld0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbmV3TGlzdE1vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICBhbGxMaXN0LnNjcm9sbFRvKDAsIGFsbExpc3Quc2Nyb2xsSGVpZ2h0KTtcbn0pXG5cblxubGlzdEZvcm0ub25zdWJtaXQgPSBhZGRMaXN0O1xubGlzdEZvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbnRvZG9Gb3JtLm9uc3VibWl0ID0gYWRkX2FfVG9kbztcbnRvZG9Gb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xufVxuXG5kZWZhdWx0TGlzdERPTS5mb3JFYWNoKGxpc3QgPT4ge1xuICAgIGxpc3Qub25jbGljayA9IG1ha2VMaXN0QWN0aXZlO1xufSk7XG5cbmFsbFRvZG9ET01TLmZvckVhY2godG9kbyA9PiB7XG4gICAgdG9kby5vbmNsaWNrID0gbW9kaWZ5VG9kbztcbn0pOyJdLCJuYW1lcyI6WyJMaXN0IiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRvZG9zIiwibGlzdE51bWJlciIsImlzRGVmYXVsdCIsInRoaXMiLCJnZXRJc0RlZmF1bHQiLCJzZXRJc0RlZmF1bHQiLCJ2YWx1ZSIsImdldExpc3ROdW1iZXIiLCJzZXRMaXN0TnVtYmVyIiwiZ2V0VGl0bGUiLCJnZXRUb2RvcyIsInNldFRvZG9zIiwic2V0VGl0bGUiLCJhZGROZXdMaXN0IiwidGhlVG9kbyIsInB1c2giLCJUb2RvIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZWQiLCJ0b2RvTnVtYmVyIiwiZ2V0VG9kb051bWJlciIsInNldFRvZG9OdW1iZXIiLCJnZXRJc0NvbXBsZXRlZCIsImNoYW5nZUNvbXBsZXRlU3RhdHVzIiwiZ2V0RGVzY3JpcHRpb24iLCJnZXREdWVEYXRlIiwiZ2V0UHJpb3JpdHkiLCJzZXREZXNjcmlwdGlvbiIsInNldER1ZURhdGUiLCJzZXRQcmlvcml0eSIsImxpc3RzIiwiYWRkTmV3TGlzdEludGVyZmFjZSIsImxpc3RPYmplY3QiLCJjb250YWluZXIiLCJpbnNlcnRfYmVmb3JlIiwiYUxpc3QiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRCZWZvcmUiLCJsZWZ0IiwiYXBwZW5kQ2hpbGQiLCJyaWdodCIsImljb24xIiwibGlzdFRpdGxlIiwidGV4dENvbnRlbnQiLCJpY29uMiIsImljb24zIiwiaWNvbjQiLCJpY29uNSIsInJlbW92ZUV4aXN0aW5nTWFya2VyIiwibGVuZ3RoIiwiZmlyc3RMaXN0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJuZXh0TGlzdCIsIm5leHRFbGVtZW50U2libGluZyIsInVwZGF0ZUFycmF5QW5kVG9kbyIsImFsbFRvZG9zIiwiYWxsVG9kb0luZGV4IiwiaSIsInRvZG9fbm8iLCJsaXN0X25vIiwieCIsInRoZURPTSIsImFkZE5ld1RvZG9JbnRlcmZhY2UiLCJhVG9kbyIsImNvbGxhcHNlIiwiY29sbGFwc2VJbWciLCJpbnB1dDEiLCJjaGVja2VkIiwidGl0bGVUb2RvIiwiY2hhbmdlVG9kb0hlYWRlciIsInRvZG9IZWFkZXIiLCJzaG93TGlzdHNUb2RvcyIsInRvZG8iLCJzYXZlVG9kbyIsImFuQXJyYXkiLCJsIiwidCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJzYXZlRGF0YSIsImFjdGl2ZUxpc3ROdW1iZXIiLCJjbGVhciIsImVsZW0iLCJzYXZlRWRpdGVkTGlzdCIsImUiLCJlbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwicGFyc2VJbnQiLCJ0YXJnZXQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsIm1ha2VMaXN0QWN0aXZlIiwiaW5kZXgiLCJhbGxMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImRlbGV0ZVJlbGF0ZWRUb2RvIiwiYWxsVG9kbyIsInNwbGljZSIsImxpc3QiLCJ1cGRhdGVMaXN0c0FuZFRvZG9zIiwibGlzdE5vIiwicXVlcnlTZWxlY3RvciIsInNob3dSZWxhdGVkVG9kb3MiLCJkZWxldGVFbGVtZW50IiwibGlzdE5hbWVJbnB1dCIsInJlcXVpcmVkIiwibGlzdE5hbWVGb3JtIiwiZWRpdExpc3QiLCJvbnN1Ym1pdCIsInJlbW92ZUl0ZW0iLCJjaGFuZ2VDaGVjayIsIm1vZGlmeVRvZG8iLCJ0YWJsZSIsImVkaXRNb2RhbCIsImVkaXRGb3JtIiwic2VsZWN0ZWRPbmUiLCJwcmlvcml0eUlucHV0IiwiaW5wdXQiLCJzZWxlY3RlZCIsInNldFByaW9yaXR5VmFsdWUiLCJlZGl0VG9kbyIsInRvZG9ET00iLCJ1cGRhdGVUb2RvRE9NIiwidXBkYXRlRGF0YXMiLCJvbnJlc2V0IiwibmV3TGlzdGlucHV0IiwibGlzdEZvcm0iLCJuZXdMaXN0TW9kYWwiLCJhZGRUb2RvIiwibmV3VG9kb01vZGFsIiwidG9kb0Zvcm0iLCJ0b2RvTmFtZSIsImdldEl0ZW0iLCJhcnJheUxpc3RzIiwiYXJyYXlUb2RvcyIsImluY2x1ZGVzIiwibGlzdERldGFpbHMiLCJzcGxpdCIsIm5ld0xpc3QiLCJ0b2RvRGV0YWlscyIsIm5ld1RvZG8iLCJmaW5hbEFycmF5Iiwic29ydCIsImEiLCJiIiwic29ydEFycmF5cyIsImluc2VydFRvZG9zVG9MaXN0cyIsImxvYWREYXRhIiwiYWN0aXZlTGlzdCIsImxvYWRQYWdlIiwiZGVmYXVsdExpc3QiLCJkZWZhdWx0TGlzdERPTSIsImFsbFRvZG9ET01TIiwib25jbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJzY3JvbGxUbyIsInNjcm9sbEhlaWdodCIsIm5ld0xpc3RET00iLCJ0b1N0cmluZyIsInJlc2V0IiwiZm9yRWFjaCJdLCJzb3VyY2VSb290IjoiIn0=