(()=>{"use strict";class t{constructor(t,e,i,l=0){this.title=t,this.todos=e,this.listNumber=i,this.isDefault=l}get getIsDefault(){return this.isDefault}set setIsDefault(t){this.isDefault=t}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,l,s,o,r){this.title=t,this.description=e,this.dueDate=i,this.priority=l,this.listNumber=s,this.completed=o,this.todoNumber=r}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function l(t,e,l){i.push(t);const s=document.createElement("div");s.classList.add("a-list"),s.setAttribute("list-number",`${t.getListNumber}`),e.insertBefore(s,l);const o=document.createElement("div");o.classList.add("left"),s.appendChild(o);const r=document.createElement("div");r.classList.add("right"),s.appendChild(r);const n=document.createElement("img");n.classList.add("icon"),1===t.getIsDefault?n.setAttribute("src","icons/weather-sunny.png"):n.setAttribute("src","icons/todo.png"),o.appendChild(n);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,o.appendChild(d);const u=document.createElement("img");u.classList.add("edit"),u.setAttribute("src","icons/pencil.png"),r.appendChild(u);const c=document.createElement("img");return c.classList.add("delete"),c.setAttribute("src","icons/trash.png"),r.appendChild(c),s}function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function o(t){let e=0;for(let l=0;l<i.length;l++)if(i[l].setListNumber=l,0!==i[l].getTodos.length){let s=0;const o=i[l].getListNumber;for(let r of i[l].getTodos){r.setListNumber=l,r.setTodoNumber=s;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${o}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${s}`),s++,e++}}}let r=[];function n(t,e){r.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),"none"===e.getPriority?i.classList.toggle("none"):"medium"===e.getPriority?i.classList.toggle("medium"):"high"===e.getPriority?i.classList.toggle("high"):"normal"===e.getPriority&&i.classList.toggle("normal"),t.appendChild(i);const l=document.createElement("div");l.classList.add("a-list"),i.appendChild(l);const s=document.createElement("div");s.classList.add("description"),s.textContent=e.getDescription,i.appendChild(s);const o=document.createElement("div");o.classList.add("collapse"),i.appendChild(o);const n=document.createElement("div");n.classList.add("left"),l.appendChild(n);const d=document.createElement("div");d.classList.add("right"),l.appendChild(d);const u=document.createElement("img");u.setAttribute("src","icons/unfold.png"),u.setAttribute("alt","collapse icon"),u.setAttribute("id","hide"),o.appendChild(u);const c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("id","todo-checkbox"),c.setAttribute("name","todo-checkbox"),1===e.getIsCompleted&&(c.checked=!0),n.appendChild(c);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,n.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/pencil.png"),m.classList.add("edit"),d.appendChild(m);const g=document.createElement("img");return g.setAttribute("src","icons/trash.png"),g.classList.add("delete"),d.appendChild(g),i}function d(t,e,i){null===e&&(t.firstElementChild.textContent=i),t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function u(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function c(t,e){let i=0;for(let l of t){let t=l.getTitle,s=l.getDescription,o=l.dueDate,r=l.getPriority,n=l.getListNumber,d=l.getIsCompleted,u=l.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${s},${o},${r},${n},${d},${u}`),i++}}function a(t,e){localStorage.clear();let i=0;localStorage.setItem("activeListNumber",e);for(let e of t){let t=e.getTitle,l=e.getListNumber;1===e.getIsDefault?localStorage.setItem(`list_${i}`,`${t},${l},1`):localStorage.setItem(`list_${i}`,`${t},${l}`),c(e.getTodos,i),i++}}let m="0";function g(t){var e;t.preventDefault(),console.log(m),i[parseInt(m)].setTitle=t.target.firstElementChild.value,t.target.previousElementSibling.textContent=t.target.firstElementChild.value,d($,m,t.target.firstElementChild.value),(e=t.target.parentNode.parentNode).firstElementChild.removeChild(e.firstElementChild.lastElementChild),e.firstElementChild.lastElementChild.removeAttribute("id"),a(i,m)}function h(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");p.removeChild(t);const l=Array.from(document.querySelectorAll(".a-list"));let s=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let l of e)l.getAttribute("list-number")===i&&t.removeChild(l)}(q,s,e),s=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,l){i.splice(parseInt(e),1);let s=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${s}`),s++;o(l)}(l,e,s),e===m&&function(t,e){0===i.length?d($,null,"Add a List"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),d($,e,i[0].getTitle),u(t,"0"),m="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),d($,e,i[parseInt(e)-1].getTitle),u(t,""+(parseInt(e)-1)),m=""+(parseInt(e)-1))}(s,e),m=document.querySelector("#active-list").getAttribute("list-number"),console.log(m)}a(i,m)}(this);else if("edit"===t.target.classList.value)(function(t){const e=t.firstElementChild.lastElementChild;e.setAttribute("id","hide");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("maxlength","30"),i.required=!0,i.value=e.textContent;const l=document.createElement("form");return l.setAttribute("action","#"),l.classList.add("edit-list-form"),t.firstElementChild.appendChild(l),l.appendChild(i),console.log(t),l}(this)).onsubmit=g;else{s(p),this.setAttribute("id","active-list");let t=this.getAttribute("list-number");d($,t,this.firstElementChild.lastElementChild.textContent),u(Array.from(document.querySelectorAll(".a-todo")),t),m=t,localStorage.removeItem("activeListNumber"),localStorage.setItem("activeListNumber",m)}console.log(i)}function b(t){!0===t.checked?t.checked=!1:t.checked=!0}function f(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.table(i),q.removeChild(this),o(Array.from(document.querySelectorAll(".all-todo .a-todo")))}else if("edit"===t.target.classList.value){const t=document.querySelector(".edit-todo-modal");t.removeAttribute("id");const e=function(t,e,i){let l=t.getAttribute("list-number"),s=t.getAttribute("todo-number"),o=i[parseInt(l)].getTodos[parseInt(s)],r=e.firstElementChild.nextElementSibling;r.firstElementChild.value=o.getTitle,r.firstElementChild.nextElementSibling.lastElementChild.value=o.getDueDate;const n=o.getPriority;let d=r.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild;return function(t,e){let i=e.firstElementChild;for(;;){if(i.getAttribute("value")===t){i.selected=!0;break}i=i.nextElementSibling}}(n,d),d.parentNode.nextElementSibling.value=o.getDescription,o}(this,t,i),l=t.lastElementChild;l.onsubmit=t=>{!function(t,e,l){e.preventDefault(),l.classList.remove(t.getPriority),t.setTitle=e.target.firstElementChild.value,t.setDueDate=e.target.firstElementChild.nextElementSibling.lastElementChild.value,t.setPriority=e.target.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild.value,t.setDescription=e.target.lastElementChild.previousElementSibling.value,e.target.reset(),e.target.parentNode.setAttribute("id","hide"),function(t,e){e.firstElementChild.firstElementChild.lastElementChild.textContent=`${t.getTitle} (Due: ${t.getDueDate})`,e.firstElementChild.nextElementSibling.textContent=`${t.getDescription}`,e.classList.toggle(t.getPriority)}(t,l),a(i,m)}(e,t,this)},l.onreset=()=>{t.setAttribute("id","hide")}}else{"checkbox"===t.target.getAttribute("type")&&b(t.target);const e=this.getAttribute("list-number"),l=this.getAttribute("todo-number");i[parseInt(e)].getTodos[parseInt(l)].changeCompleteStatus(),b(this.firstElementChild.firstElementChild.firstElementChild),console.log(this.firstElementChild.firstElementChild.firstElementChild)}a(i,m)}const p=document.querySelector(".all-list"),A=document.querySelector("#list-name"),C=document.querySelector(".list-form"),E=document.querySelector(".add-new-list"),v=document.querySelector(".new-list-modal"),y=document.querySelector(".add-todo"),S=document.querySelector(".new-todo-modal"),L=document.querySelector(".todo-form"),N=document.querySelector("#todo-name"),T=document.querySelector("#due-date"),D=document.querySelector("#priority"),I=document.querySelector("#description"),q=document.querySelector(".all-todo"),$=document.querySelector(".todo-header");if(localStorage.getItem("activeListNumber")){let s=function(){let i=[],l=[];for(let s in localStorage)if(s.includes("list")&&!s.includes("todo")){const e=localStorage.getItem(s).split(","),l=e[0],o=parseInt(e[1]);if(3===e.length){const e=new t(l,[],o,1);i.push(e)}else{const e=new t(l,[],o);i.push(e)}}else if(s.includes("todo")){const t=localStorage.getItem(s).split(","),i=t[0],o=t[1],r=t[2],n=t[3],d=parseInt(t[4]),u=parseInt(t[5]),c=parseInt(t[6]),a=new e(i,o,r,n,d,u,c);l.push(a)}let s=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);return function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(s,l),s}();m=localStorage.getItem("activeListNumber"),function(t){if(0===t.length)return;for(let e of t){l(e,p,v);for(let t of e.getTodos)n(q,t)}const e=document.querySelector(`.all-list div[list-number="${m}"]`);null!==e&&e.setAttribute("id","active-list");const s=Array.from(document.querySelectorAll(".a-todo"));d($,m,i[parseInt(m)].getTitle),u(s,m),console.log(i)}(s)}else{let e=new t("My Day",[],0,1);l(e,p,v),d($,"0","My Day"),document.querySelector(`.all-list div[list-number="${e.getListNumber}"]`).setAttribute("id","active-list"),a(i,m)}const x=document.querySelectorAll(".all-list .a-list"),k=document.querySelectorAll(".all-todo .a-todo");y.onclick=()=>{S.removeAttribute("id")},E.addEventListener("click",(()=>{v.removeAttribute("id"),p.scrollTo(0,p.scrollHeight)})),C.onsubmit=function(e){console.log(e.target),e.preventDefault();let o=new t(A.value,[],i.length);s(p);const r=l(o,p,v);r.setAttribute("id","active-list");const n=Array.from(document.querySelectorAll(".a-todo"));d($,o.getListNumber,o.getTitle),u(n,o.getListNumber.toString()),m=o.getListNumber.toString(),r.onclick=h,e.target.reset(),v.setAttribute("id","hide"),p.scrollTo(0,p.scrollHeight),console.log(i),a(i,m)},C.onreset=()=>{v.setAttribute("id","hide")},L.onsubmit=function(t){t.preventDefault();const l=parseInt($.getAttribute("list-number")),s=i[parseInt(l)].getTodos.length;let o=new e(N.value,I.value,T.value,D.value,l,0,s);i[parseInt(l)].getTodos.push(o),n(q,o).onclick=f,S.setAttribute("id","hide"),q.scrollTo(0,q.scrollHeight),t.target.reset(),console.table(i),a(i,m)},L.onreset=()=>{S.setAttribute("id","hide")},x.forEach((t=>{t.onclick=h})),k.forEach((t=>{t.onclick=f}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDckNhLFFBQVU1QyxFQUdyQm9CLEVBQWF0RyxhQUFhLEtBQU0sUUFDaENtRSxFQUFRNkQsU0FBUyxFQUFHN0QsRUFBUThELGNBQzVCaEYsRUFBRU0sT0FBT3VDLFFBQ1QxQyxRQUFRK0IsTUFBTTdGLEdBQ2RzRCxFQUFTdEQsRUFBT3VELEVBQ3BCLEVBc09BMEQsRUFBU04sUUFBVSxLQUNmSyxFQUFhdEcsYUFBYSxLQUFNLE9BQU8sRUFHM0M0SCxFQUFlUSxTQUFRL0QsSUFDbkJBLEVBQUt5RCxRQUFVbEUsQ0FBYyxJQUdqQ2lFLEVBQVlPLFNBQVEvRixJQUNoQkEsRUFBS3lGLFFBQVU1QyxDQUFVLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlTGlzdEludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZVRvZG9JbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9zdG9yYWdlTWFuYWdlbWVudC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdG9kb3MsIGxpc3ROdW1iZXIsIGlzRGVmYXVsdD0wKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b2RvcyA9IHRvZG9zO1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICB0aGlzLmlzRGVmYXVsdCA9IGlzRGVmYXVsdDtcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0RlZmF1bHQ7XG4gICAgfVxuXG4gICAgc2V0IHNldElzRGVmYXVsdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmlzRGVmYXVsdCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRMaXN0TnVtYmVyKCkge3JldHVybiB0aGlzLmxpc3ROdW1iZXJ9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7cmV0dXJuIHRoaXMudGl0bGV9XG5cbiAgICBnZXQgZ2V0VG9kb3MoKSB7cmV0dXJuIHRoaXMudG9kb3N9XG5cbiAgICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGROZXdMaXN0KHRoZVRvZG8pIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRoZVRvZG8pO1xuICAgIH1cbn0iLCJcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGxpc3ROdW1iZXIsIGNvbXBsZXRlZCwgdG9kb051bWJlcikge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VG9kb051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb051bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNDb21wbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlZDtcbiAgICB9XG5cbiAgICBjaGFuZ2VDb21wbGV0ZVN0YXR1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdE51bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICB9XG4gICAgZ2V0IGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUpIHtcblxuICAgIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0T2JqZWN0LmdldExpc3ROdW1iZXJ9YCk7XG4gICAgLy8gYUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYUxpc3QsIGluc2VydF9iZWZvcmUpO1xuXG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgaWNvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWYgKGxpc3RPYmplY3QuZ2V0SXNEZWZhdWx0ID09PSAxKSB7XG4gICAgICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3dlYXRoZXItc3VubnkucG5nJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpY29uMS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy90b2RvLnBuZycpO1xuICAgIH1cbiAgICBsZWZ0LmFwcGVuZENoaWxkKGljb24xKTtcblxuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RUaXRsZS5jbGFzc0xpc3QuYWRkKCdsaXN0LXRpdGxlJyk7XG4gICAgbGlzdFRpdGxlLnRleHRDb250ZW50ID0gbGlzdE9iamVjdC5nZXRUaXRsZTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGxpc3RUaXRsZSk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2VkaXQnKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wZW5jaWwucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgLy8gY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAvLyBpY29uMy5jbGFzc0xpc3QuYWRkKCd1cC1hcnJvdycpO1xuICAgIC8vIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL2Fycm93LXVwLnBuZycpO1xuICAgIC8vIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIC8vIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgLy8gaWNvbjQuY2xhc3NMaXN0LmFkZCgnZG93bi1hcnJvdycpO1xuICAgIC8vIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL2Fycm93LWRvd24ucG5nJyk7XG4gICAgLy8gcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjQpO1xuXG4gICAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICBpY29uNS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy90cmFzaC5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgICByZXR1cm4gYUxpc3Q7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4aXN0aW5nTWFya2VyKGNvbnRhaW5lcikge1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICBjb25zdCBmaXJzdExpc3QgPSBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgaWYgKGZpcnN0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpIHtcbiAgICAgICAgZmlyc3RMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBuZXh0TGlzdCA9IGZpcnN0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAobmV4dExpc3QuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWN0aXZlLWxpc3QnKXtcbiAgICAgICAgICAgICAgICBuZXh0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0TGlzdCA9IG5leHRMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKSB7XG4gICAgbGV0IGFsbFRvZG9JbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0c1tpXS5zZXRMaXN0TnVtYmVyID0gaTtcbiAgICAgICAgaWYgKGxpc3RzW2ldLmdldFRvZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdG9kb19ubyA9IDA7XG4gICAgICAgICAgICBjb25zdCBsaXN0X25vID0gbGlzdHNbaV0uZ2V0TGlzdE51bWJlcjtcbiAgICAgICAgICAgIGZvciAobGV0IHggb2YgbGlzdHNbaV0uZ2V0VG9kb3MpIHtcbiAgICAgICAgICAgICAgICB4LnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICAgICAgICAgIHguc2V0VG9kb051bWJlciA9IHRvZG9fbm87XG4gICAgICAgICAgICAgICAgbGV0IHRoZURPTSA9IGFsbFRvZG9zW2FsbFRvZG9JbmRleF07XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3Rfbm99YCk7XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RvZG9fbm99YCk7XG4gICAgICAgICAgICAgICAgdG9kb19ubysrO1xuICAgICAgICAgICAgICAgIGFsbFRvZG9JbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGxpc3ROdW1iZXIsIGFsbFRvZG9zKSB7XG5cbiAgICBsaXN0cy5zcGxpY2UocGFyc2VJbnQobGlzdE51bWJlciksIDEpO1xuICAgIC8vICB1cGRhdGUgZG9tc1xuICAgIGxldCBpbmRleCA9IDA7XG5cbiAgICBmb3IgKGxldCBsaXN0IG9mIGNvbnRhaW5lcikge1xuICAgICAgICBsaXN0LnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgbGlzdC5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7aW5kZXh9YCk7XG4gICAgICAgIGluZGV4Kys7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIEFycmF5IGFuZCB0b2RvIERPTSdzXG4gICAgdXBkYXRlQXJyYXlBbmRUb2RvKGFsbFRvZG9zKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdExpc3QoZWxlbWVudCkge1xuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBsaXN0VGl0bGUuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG5cbiAgICAvLyBjcmVhdGUgYW4gaW5wdXQgRWxlbWVudFxuICAgIGNvbnN0IGxpc3ROYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGxpc3ROYW1lSW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICBsaXN0TmFtZUlucHV0LnNldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJywgJzMwJyk7XG4gICAgbGlzdE5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG4gICAgbGlzdE5hbWVJbnB1dC52YWx1ZSA9IGxpc3RUaXRsZS50ZXh0Q29udGVudDtcblxuICAgIC8vIGNyZWF0ZSB0aGUgZm9ybVxuICAgIGNvbnN0IGxpc3ROYW1lRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICBsaXN0TmFtZUZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCAnIycpO1xuICAgIGxpc3ROYW1lRm9ybS5jbGFzc0xpc3QuYWRkKCdlZGl0LWxpc3QtZm9ybScpXG5cbiAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKGxpc3ROYW1lRm9ybSk7XG4gICAgbGlzdE5hbWVGb3JtLmFwcGVuZENoaWxkKGxpc3ROYW1lSW5wdXQpO1xuICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGxpc3ROYW1lRm9ybTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdW5kb0NoYW5nZShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59IiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFUb2RvLmNsYXNzTGlzdC5hZGQoJ2EtdG9kbycpO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBpZiAodGhlVG9kby5nZXRQcmlvcml0eSA9PT0gJ25vbmUnKSB7XG4gICAgICAgIGFUb2RvLmNsYXNzTGlzdC50b2dnbGUoJ25vbmUnKVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGVUb2RvLmdldFByaW9yaXR5ID09PSAnbWVkaXVtJykge1xuICAgICAgICBhVG9kby5jbGFzc0xpc3QudG9nZ2xlKCdtZWRpdW0nKVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGVUb2RvLmdldFByaW9yaXR5ID09PSAnaGlnaCcpIHtcbiAgICAgICAgYVRvZG8uY2xhc3NMaXN0LnRvZ2dsZSgnaGlnaCcpXG4gICAgfVxuICAgIGVsc2UgaWYgKHRoZVRvZG8uZ2V0UHJpb3JpdHkgPT09ICdub3JtYWwnKSB7XG4gICAgICAgIGFUb2RvLmNsYXNzTGlzdC50b2dnbGUoJ25vcm1hbCcpXG4gICAgfVxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhVG9kbyk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGFMaXN0KTtcblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgnZGVzY3JpcHRpb24nKTtcbiAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoZVRvZG8uZ2V0RGVzY3JpcHRpb247XG4gICAgYVRvZG8uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gICAgY29uc3QgY29sbGFwc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb2xsYXBzZS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGNvbGxhcHNlKTtcblxuICAgIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICBjb25zdCBjb2xsYXBzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3VuZm9sZC5wbmcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdjb2xsYXBzZSBpY29uJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgY29sbGFwc2UuYXBwZW5kQ2hpbGQoY29sbGFwc2VJbWcpO1xuXG4gICAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2NoZWNrYm94Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnaWQnLCAndG9kby1jaGVja2JveCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndG9kby1jaGVja2JveCcpO1xuICAgIGlmICh0aGVUb2RvLmdldElzQ29tcGxldGVkID09PSAxKSB7XG4gICAgICAgIGlucHV0MS5jaGVja2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgbGVmdC5hcHBlbmRDaGlsZChpbnB1dDEpO1xuXG4gICAgY29uc3QgdGl0bGVUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGVUb2RvLnRleHRDb250ZW50ID0gYCR7dGhlVG9kby5nZXRUaXRsZX0gKER1ZTogJHt0aGVUb2RvLmdldER1ZURhdGV9KWA7XG4gICAgbGVmdC5hcHBlbmRDaGlsZCh0aXRsZVRvZG8pO1xuXG4gICAgY29uc3QgaWNvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wZW5jaWwucG5nJyk7XG4gICAgaWNvbjIuY2xhc3NMaXN0LmFkZCgnZWRpdCcpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICAgIC8vIGNvbnN0IGljb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgLy8gaWNvbjMuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvYXJyb3ctdXAucG5nJyk7XG4gICAgLy8gaWNvbjMuY2xhc3NMaXN0LmFkZCgndXAtYXJyb3cnKTtcbiAgICAvLyByaWdodC5hcHBlbmRDaGlsZChpY29uMyk7XG5cbiAgICAvLyBjb25zdCBpY29uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIC8vIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL2Fycm93LWRvd24ucG5nJyk7XG4gICAgLy8gaWNvbjQuY2xhc3NMaXN0LmFkZCgnZG93bi1hcnJvdycpO1xuICAgIC8vIHJpZ2h0LmFwcGVuZENoaWxkKGljb240KTtcblxuICAgIGNvbnN0IGljb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvdHJhc2gucG5nJyk7XG4gICAgaWNvbjUuY2xhc3NMaXN0LmFkZCgnZGVsZXRlJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xuXG4gICAgcmV0dXJuIGFUb2RvO1xufVxuXG5cbi8vIGNoYW5nZSB0b2RvIGhlYWRlclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGl0bGUpIHtcbiAgICBpZiAobGlzdE51bWJlciA9PT0gbnVsbCkge1xuICAgICAgICB0b2RvSGVhZGVyLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIHRvZG9IZWFkZXIuc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4gICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xufVxuXG4vLyBzaG93IGFsbCB0b2RvcyBvZiBhIHBhcnRpY3VsYXIgbGlzdFxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgaWYgKGFsbFRvZG9zID09PSBudWxsKSByZXR1cm5cbiAgICBmb3IgKGxldCB0b2RvIG9mIGFsbFRvZG9zKSB7XG4gICAgICAgIGlmICh0b2RvLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKSA9PT0gbGlzdE51bWJlcikge1xuICAgICAgICAgICAgdG9kby5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b2RvLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZWxhdGVkVG9kbyhjb250YWluZXIsIGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBjb25zdCBsaXN0X251bSA9IHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBpZiAobGlzdF9udW0gPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KSB7XG5cbiAgICBsZXQgaW5wdXQgPSBwcmlvcml0eUlucHV0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPT09IHNlbGVjdGVkT25lKSB7XG4gICAgICAgICAgICBpbnB1dC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRUb2RvKGVsZW1lbnQsIGVkaXRNb2RhbCwgbGlzdHMpIHtcbiAgICBsZXQgbGlzdE51bWJlciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgIGxldCB0b2RvTnVtYmVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJyk7XG4gICAgbGV0IHRoZVRvZG8gPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICAgIGxldCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgZWRpdEZvcm0uZmlyc3RFbGVtZW50Q2hpbGQudmFsdWUgPSB0aGVUb2RvLmdldFRpdGxlO1xuICAgIGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlID0gdGhlVG9kby5nZXREdWVEYXRlO1xuICAgIGNvbnN0IHNlbGVjdGVkT25lID0gdGhlVG9kby5nZXRQcmlvcml0eTtcbiAgICBsZXQgcHJpb3JpdHlJbnB1dCA9IGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KTtcbiAgICBwcmlvcml0eUlucHV0LnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnZhbHVlID0gdGhlVG9kby5nZXREZXNjcmlwdGlvbjtcblxuICAgIHJldHVybiB0aGVUb2RvO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pIHtcbiAgICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICB0b2RvRE9NLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0RGVzY3JpcHRpb259YFxuICAgIHRvZG9ET00uY2xhc3NMaXN0LnRvZ2dsZSh0aGVUb2RvLmdldFByaW9yaXR5KTtcbn0iLCJpbXBvcnQgTGlzdCBmcm9tICcuL2xpc3QnXG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8nXG5cblxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVRvZG8oYW5BcnJheSwgbCkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGFuQXJyYXkpIHtcbiAgICAgICAgbGV0IHRpdGxlID0gdG9kby5nZXRUaXRsZTtcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gdG9kby5nZXREZXNjcmlwdGlvbjtcbiAgICAgICAgbGV0IGR1ZURhdGUgPSB0b2RvLmR1ZURhdGU7XG4gICAgICAgIGxldCBwcmlvcml0eSA9IHRvZG8uZ2V0UHJpb3JpdHk7XG4gICAgICAgIGxldCBsaXN0TnVtYmVyID0gdG9kby5nZXRMaXN0TnVtYmVyO1xuICAgICAgICBsZXQgY29tcGxldGVkID0gdG9kby5nZXRJc0NvbXBsZXRlZDtcbiAgICAgICAgbGV0IHRvZG9OdW1iZXIgPSB0b2RvLmdldFRvZG9OdW1iZXI7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1fdG9kb18ke3R9YCwgYCR7dGl0bGV9LCR7ZGVzY3JpcHRpb259LCR7ZHVlRGF0ZX0sJHtwcmlvcml0eX0sJHtsaXN0TnVtYmVyfSwke2NvbXBsZXRlZH0sJHt0b2RvTnVtYmVyfWApO1xuICAgICAgICB0Kys7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcikge1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpXG4gICAgbGV0IGwgPSAwO1xuXG4gICAgLy8gc2F2ZSBsaXN0c1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVMaXN0TnVtYmVyJywgYWN0aXZlTGlzdE51bWJlcik7XG4gICAgZm9yIChsZXQgZWxlbSBvZiBsaXN0cykge1xuICAgICAgICBsZXQgbGlzdFRpdGxlID0gZWxlbS5nZXRUaXRsZTtcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSBlbGVtLmdldExpc3ROdW1iZXI7XG4gICAgICAgIGlmIChlbGVtLmdldElzRGVmYXVsdCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1gLCBgJHtsaXN0VGl0bGV9LCR7bGlzdE51bWJlcn0sMWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGxpc3RfJHtsfWAsIGAke2xpc3RUaXRsZX0sJHtsaXN0TnVtYmVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHNhdmVUb2RvKGVsZW0uZ2V0VG9kb3MsIGwpO1xuICAgICAgICBsKys7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHNvcnRBcnJheXMoYXJyYXlMaXN0cykge1xuICAgIGNvbnN0IG5ld0xpc3RzID0gYXJyYXlMaXN0cy5zb3J0KChhLGIpID0+IHtcbiAgICAgICAgaWYgKGEuZ2V0TGlzdE51bWJlciA+IGIuZ2V0TGlzdE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG5ld0xpc3RzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRUb2Rvc1RvTGlzdHMoZmluYWxBcnJheSwgYXJyYXlUb2Rvcykge1xuICAgIGZvciAobGV0IHRvZG8gb2YgYXJyYXlUb2Rvcykge1xuICAgICAgICBmaW5hbEFycmF5W3RvZG8uZ2V0TGlzdE51bWJlcl0uZ2V0VG9kb3MucHVzaCh0b2RvKTtcbiAgICB9XG4gICAgLy8gc29ydCB0aGUgdG9kb3NcbiAgICBmb3IgKGxldCBsaXN0IG9mIGZpbmFsQXJyYXkpIHtcbiAgICAgICAgY29uc3QgbmV3VG9kbyA9IGxpc3QuZ2V0VG9kb3Muc29ydCgoYSxiKSA9PiB7XG4gICAgICAgICAgICBpZiAoYS5nZXRUb2RvTnVtYmVyID4gYi5nZXRUb2RvTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGxpc3Quc2V0VG9kb3MgPSBuZXdUb2RvO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gICAgbGV0IGFycmF5TGlzdHMgPSBbXTtcbiAgICBsZXQgYXJyYXlUb2RvcyA9IFtdO1xuICAgIGZvciAobGV0IGVsZW0gaW4gbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIGlmIChlbGVtLmluY2x1ZGVzKCdsaXN0JykgJiYgIWVsZW0uaW5jbHVkZXMoJ3RvZG8nKSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdERldGFpbHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShlbGVtKS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBsaXN0RGV0YWlsc1swXTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludChsaXN0RGV0YWlsc1sxXSk7XG4gICAgICAgICAgICBpZiAobGlzdERldGFpbHMubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IG5ldyBMaXN0KHRpdGxlLCBbXSwgbGlzdE51bWJlciwgMSk7XG4gICAgICAgICAgICAgICAgYXJyYXlMaXN0cy5wdXNoKG5ld0xpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IG5ldyBMaXN0KHRpdGxlLCBbXSwgbGlzdE51bWJlcik7XG4gICAgICAgICAgICAgICAgYXJyYXlMaXN0cy5wdXNoKG5ld0xpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVsZW0uaW5jbHVkZXMoJ3RvZG8nKSkge1xuICAgICAgICAgICAgY29uc3QgdG9kb0RldGFpbHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShlbGVtKS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0b2RvRGV0YWlsc1swXTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdG9kb0RldGFpbHNbMV07XG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gdG9kb0RldGFpbHNbMl07XG4gICAgICAgICAgICBjb25zdCBwcmlvcml0eSA9IHRvZG9EZXRhaWxzWzNdO1xuICAgICAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IHBhcnNlSW50KHRvZG9EZXRhaWxzWzRdKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZCA9IHBhcnNlSW50KHRvZG9EZXRhaWxzWzVdKTtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9OdW1iZXIgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s2XSk7XG4gICAgICAgICAgICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG8odGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgbGlzdE51bWJlciwgY29tcGxldGVkLCB0b2RvTnVtYmVyKTtcbiAgICAgICAgICAgIGFycmF5VG9kb3MucHVzaChuZXdUb2RvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgZmluYWxBcnJheSA9IHNvcnRBcnJheXMoYXJyYXlMaXN0cyk7XG4gICAgaW5zZXJ0VG9kb3NUb0xpc3RzKGZpbmFsQXJyYXksIGFycmF5VG9kb3MpO1xuICAgIHJldHVybiBmaW5hbEFycmF5O1xuICAgIGNvbnNvbGUubG9nKCdwcmludGluZyB0aGUgY29udmVydGVkIGFycmF5JylcbiAgICBjb25zb2xlLmxvZyhmaW5hbEFycmF5KTtcbn0iLCJpbXBvcnQgTGlzdCBmcm9tICcuL2xpc3QnXG5pbXBvcnQgVG9kbyBmcm9tICcuL3RvZG8nXG5pbXBvcnQge2xpc3RzLCBhZGROZXdMaXN0SW50ZXJmYWNlLCByZW1vdmVFeGlzdGluZ01hcmtlciwgdXBkYXRlTGlzdHNBbmRUb2RvcywgdXBkYXRlQXJyYXlBbmRUb2RvLCBlZGl0TGlzdCwgdW5kb0NoYW5nZX0gZnJvbSAnLi9tYW5hZ2VMaXN0SW50ZXJmYWNlJ1xuaW1wb3J0IHthZGROZXdUb2RvSW50ZXJmYWNlLCBjaGFuZ2VUb2RvSGVhZGVyLCBzaG93TGlzdHNUb2RvcywgZGVsZXRlUmVsYXRlZFRvZG8sIGVkaXRUb2RvLCB1cGRhdGVUb2RvRE9NfSBmcm9tICcuL21hbmFnZVRvZG9JbnRlcmZhY2UnXG5pbXBvcnQge3NhdmVEYXRhLCBsb2FkRGF0YX0gZnJvbSAnLi9zdG9yYWdlTWFuYWdlbWVudCdcblxubGV0IGFjdGl2ZUxpc3ROdW1iZXIgPSAnMCc7XG5cblxuZnVuY3Rpb24gYWRkTGlzdChlKSB7XG4gICAgY29uc29sZS5sb2coZS50YXJnZXQpO1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICAgIGxldCBuZXdMaXN0ID0gbmV3IExpc3QobmV3TGlzdGlucHV0LnZhbHVlLCBbXSwgbGlzdHMubGVuZ3RoKTtcbiAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICBjb25zdCBuZXdMaXN0RE9NID0gYWRkTmV3TGlzdEludGVyZmFjZShuZXdMaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwpO1xuICAgIG5ld0xpc3RET00uc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuXG4gICAgLy8gbWFuYWdlIHRvZG8gaW50ZXJmYWNlXG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBuZXdMaXN0LmdldExpc3ROdW1iZXIsIG5ld0xpc3QuZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBuZXdMaXN0LmdldExpc3ROdW1iZXIudG9TdHJpbmcoKSk7XG4gICAgYWN0aXZlTGlzdE51bWJlciA9IG5ld0xpc3QuZ2V0TGlzdE51bWJlci50b1N0cmluZygpO1xuICAgIG5ld0xpc3RET00ub25jbGljayA9IG1ha2VMaXN0QWN0aXZlO1xuICAgIGUudGFyZ2V0LnJlc2V0KCk7XG4gICAgbmV3TGlzdE1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgIGFsbExpc3Quc2Nyb2xsVG8oMCwgYWxsTGlzdC5zY3JvbGxIZWlnaHQpO1xuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuZnVuY3Rpb24gYWRkX2FfVG9kbyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbWFuYWdlIEFycmF5IG9mIGxpc3RzXG4gICAgY29uc3QgbGlzdE51bWJlciA9IHBhcnNlSW50KHRvZG9IZWFkZXIuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpKTtcbiAgICBjb25zdCB0b2RvTnVtYmVyID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLmxlbmd0aDtcbiAgICBsZXQgbmV3VG9kbyA9IG5ldyBUb2RvKHRvZG9OYW1lLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZHVlRGF0ZS52YWx1ZSwgcHJpb3JpdHkudmFsdWUsIGxpc3ROdW1iZXIsIDAsIHRvZG9OdW1iZXIpO1xuICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5wdXNoKG5ld1RvZG8pO1xuXG5cbiAgICAvLyBicmluZyB0aGUgdG9kbyBpbnRlcmZhY2VcbiAgICBjb25zdCBuZXdUb2RvRE9NID0gYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCBuZXdUb2RvKTtcbiAgICBuZXdUb2RvRE9NLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xuXG4gICAgLy8gaGlkZSBtb2RhbFxuICAgIG5ld1RvZG9Nb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBhbGxUb2RvLnNjcm9sbFRvKDAsIGFsbFRvZG8uc2Nyb2xsSGVpZ2h0KTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIGNvbnNvbGUudGFibGUobGlzdHMpO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBzYXZlRWRpdGVkTGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKGFjdGl2ZUxpc3ROdW1iZXIpO1xuICAgIGxldCB0aGVMaXN0ID0gbGlzdHNbcGFyc2VJbnQoYWN0aXZlTGlzdE51bWJlcildO1xuICAgIHRoZUxpc3Quc2V0VGl0bGUgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudmFsdWU7XG4gICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlKTtcbiAgICBsZXQgbGlzdE51bWJlciA9IGFjdGl2ZUxpc3ROdW1iZXI7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZSk7XG4gICAgdW5kb0NoYW5nZShlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xuICAgIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuXG5mdW5jdGlvbiBtYWtlTGlzdEFjdGl2ZShlKSB7XG4gICAgLy8gaGFuZGxlIGRlbGV0ZSwgdXAsIGRvd24sIGNvbXBsZXRlXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgZGVsZXRlRWxlbWVudCh0aGlzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSAnZWRpdCcpIHtcbiAgICAgICAgY29uc3QgbGlzdE5hbWVGb3JtID0gZWRpdExpc3QodGhpcyk7XG4gICAgICAgIGxpc3ROYW1lRm9ybS5vbnN1Ym1pdCA9IHNhdmVFZGl0ZWRMaXN0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gZ2V0IHRoZSBsaXN0T2JqZWN0XG4gICAgICAgIGxldCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICAgICAgYWN0aXZlTGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY3RpdmVMaXN0TnVtYmVyJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVMaXN0TnVtYmVyJywgYWN0aXZlTGlzdE51bWJlcik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIHNob3dSZWxhdGVkVG9kb3MoeCwgbGlzdE5vKXtcbiAgICBpZiAobGlzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbnVsbCwgJ0FkZCBhIExpc3QnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGlzdE5vID09PSBgMGApIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIwXCJdJyk7XG4gICAgICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbMF0uZ2V0VGl0bGUpO1xuICAgICAgICBzaG93TGlzdHNUb2Rvcyh4LCBgMGApO1xuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gJzAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke3BhcnNlSW50KGxpc3RObyktMX1cIl1gKTtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1twYXJzZUludChsaXN0Tm8pLTFdLmdldFRpdGxlKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoeCwgYCR7cGFyc2VJbnQobGlzdE5vKS0xfWApO1xuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gYCR7cGFyc2VJbnQobGlzdE5vKS0xfWA7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIGRlbGV0ZUVsZW1lbnQoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2EtbGlzdCcpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgLy8gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgICAgIGFsbExpc3QucmVtb3ZlQ2hpbGQoZWxlbWVudClcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS1saXN0JykpO1xuICAgICAgICBsZXQgeCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIGRlbGV0ZVJlbGF0ZWRUb2RvKGFsbFRvZG8sIHgsIGluZGV4KTtcbiAgICAgICAgeCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIHVwZGF0ZUxpc3RzQW5kVG9kb3MoY29udGFpbmVyLCBpbmRleCwgeCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gYWN0aXZlTGlzdE51bWJlcikge1xuICAgICAgICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7fVxuICAgICAgICBhY3RpdmVMaXN0TnVtYmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FjdGl2ZS1saXN0JykuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBjb25zb2xlLmxvZyhhY3RpdmVMaXN0TnVtYmVyKTtcbiAgICB9XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VDaGVjayhlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHVwZGF0ZURhdGFzKHRoZVRvZG8sIGUsIHRvZG9ET00pIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdG9kb0RPTS5jbGFzc0xpc3QucmVtb3ZlKHRoZVRvZG8uZ2V0UHJpb3JpdHkpO1xuICAgIHRoZVRvZG8uc2V0VGl0bGUgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICB0aGVUb2RvLnNldER1ZURhdGUgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgICB0aGVUb2RvLnNldFByaW9yaXR5ID0gZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlO1xuICAgIHRoZVRvZG8uc2V0RGVzY3JpcHRpb24gPSBlLnRhcmdldC5sYXN0RWxlbWVudENoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudmFsdWU7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBlLnRhcmdldC5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgIHVwZGF0ZVRvZG9ET00odGhlVG9kbywgdG9kb0RPTSk7XG4gICAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5cbmZ1bmN0aW9uIG1vZGlmeVRvZG8oZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSB0b2RvIGZyb20gdGhlIGxpc3RzIEFycmF5IGFuZCB0aGUgZG9tXG4gICAgICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5zcGxpY2UocGFyc2VJbnQodG9kb051bWJlciksIDEpO1xuICAgICAgICBjb25zb2xlLnRhYmxlKGxpc3RzKTtcbiAgICAgICAgYWxsVG9kby5yZW1vdmVDaGlsZCh0aGlzKTtcblxuICAgICAgICAvLyB1cGRhdGUgdG9kbyBhcnJheVxuICAgICAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFsbC10b2RvIC5hLXRvZG8nKSk7XG4gICAgICAgIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAgIGNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXRvZG8tbW9kYWwnKTtcbiAgICAgICAgZWRpdE1vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgY29uc3QgdGhlVG9kbyA9IGVkaXRUb2RvKHRoaXMsIGVkaXRNb2RhbCwgbGlzdHMpO1xuICAgICAgICBjb25zdCBlZGl0Rm9ybSA9IGVkaXRNb2RhbC5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICBlZGl0Rm9ybS5vbnN1Ym1pdCA9IChlKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhcyh0aGVUb2RvLCBlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlZGl0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZWRpdE1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgIGNoYW5nZUNoZWNrKGUudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNvbnN0IHRvZG9OdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgndG9kby1udW1iZXInKTtcbiAgICAgICAgbGV0IHRoZUxpc3QgPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV07XG4gICAgICAgIGxldCB0aGVUb2RvID0gdGhlTGlzdC5nZXRUb2Rvc1twYXJzZUludCh0b2RvTnVtYmVyKV07XG4gICAgICAgIHRoZVRvZG8uY2hhbmdlQ29tcGxldGVTdGF0dXMoKTtcbiAgICAgICAgY2hhbmdlQ2hlY2sodGhpcy5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICAgIH1cbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuZnVuY3Rpb24gbG9hZFBhZ2UoYW5BcnJheSkge1xuICAgIGlmIChhbkFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGZvciAobGV0IGxpc3Qgb2YgYW5BcnJheSkge1xuICAgICAgICBhZGROZXdMaXN0SW50ZXJmYWNlKGxpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gICAgICAgIGZvciAobGV0IHRvZG8gb2YgbGlzdC5nZXRUb2Rvcykge1xuICAgICAgICAgICAgYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCB0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3RpdmVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFsbC1saXN0IGRpdltsaXN0LW51bWJlcj1cIiR7YWN0aXZlTGlzdE51bWJlcn1cIl1gKTtcbiAgICAvLyByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICBpZiAoYWN0aXZlTGlzdCAhPT0gbnVsbCkge1xuICAgICAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICB9XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBhY3RpdmVMaXN0TnVtYmVyLCBsaXN0c1twYXJzZUludChhY3RpdmVMaXN0TnVtYmVyKV0uZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBhY3RpdmVMaXN0TnVtYmVyKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuLy8gIyMjIyMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjIyMjIyMjI1xuXG5cbi8vIEFsbCBnbG9iYWwgdmFyaWFibGVzIGFuZCBldmVudExpc3RlbmVyc1xuY29uc3QgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCcpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtbmFtZScpO1xuY29uc3QgbGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1mb3JtJyk7XG5jb25zdCBhZGROZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1uZXctbGlzdCcpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1saXN0LW1vZGFsJyk7XG5jb25zdCBhZGRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tbW9kYWwnKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybScpO1xuY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1uYW1lJyk7XG5jb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZS1kYXRlJyk7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbmNvbnN0IGFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRvZG8nKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1oZWFkZXInKTtcblxuXG5cbi8vIGxvYWRpbmcgdGhlIGV4aXN0aW5nIGRhdGFcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlTGlzdE51bWJlcicpKSB7XG4gICAgbGV0IGFuQXJyYXkgPSBsb2FkRGF0YSgpO1xuICAgIGFjdGl2ZUxpc3ROdW1iZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWN0aXZlTGlzdE51bWJlcicpO1xuICAgIGxvYWRQYWdlKGFuQXJyYXkpO1xuICAgIC8vIGxvYWRQYWdlKGFuQXJyYXkpO1xufVxuZWxzZSB7XG4gICAgLy8gQWRkaW5nIGRlZmF1bHQgbGlzdFxuICAgIGxldCBkZWZhdWx0TGlzdCA9IG5ldyBMaXN0KCdNeSBEYXknLCBbXSwgMCwgMSk7XG4gICAgYWRkTmV3TGlzdEludGVyZmFjZShkZWZhdWx0TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsICcwJywgJ015IERheScpO1xuICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiJHtkZWZhdWx0TGlzdC5nZXRMaXN0TnVtYmVyfVwiXWApO1xuICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIC8vIGFjdGl2ZUxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnZGVmYXVsdC1saXN0Jyk7XG4gICAgLy8gYWN0aXZlTGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuICAgIC8vIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvd2VhdGhlci1zdW5ueS5wbmcnKTtcbiAgICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLWxpc3QgLmEtbGlzdCcpO1xuY29uc3QgYWxsVG9kb0RPTVMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpO1xuXG5hZGRUb2RvLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn1cblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIGFsbExpc3Quc2Nyb2xsVG8oMCwgYWxsTGlzdC5zY3JvbGxIZWlnaHQpO1xufSlcblxuXG5saXN0Rm9ybS5vbnN1Ym1pdCA9IGFkZExpc3Q7XG5saXN0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxudG9kb0Zvcm0ub25zdWJtaXQgPSBhZGRfYV9Ub2RvO1xudG9kb0Zvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbmRlZmF1bHRMaXN0RE9NLmZvckVhY2gobGlzdCA9PiB7XG4gICAgbGlzdC5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG59KTtcblxuYWxsVG9kb0RPTVMuZm9yRWFjaCh0b2RvID0+IHtcbiAgICB0b2RvLm9uY2xpY2sgPSBtb2RpZnlUb2RvO1xufSk7Il0sIm5hbWVzIjpbIkxpc3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidG9kb3MiLCJsaXN0TnVtYmVyIiwiaXNEZWZhdWx0IiwidGhpcyIsImdldElzRGVmYXVsdCIsInNldElzRGVmYXVsdCIsInZhbHVlIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJnZXRUaXRsZSIsImdldFRvZG9zIiwic2V0VG9kb3MiLCJzZXRUaXRsZSIsImFkZE5ld0xpc3QiLCJ0aGVUb2RvIiwicHVzaCIsIlRvZG8iLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsInRvZG9OdW1iZXIiLCJnZXRUb2RvTnVtYmVyIiwic2V0VG9kb051bWJlciIsImdldElzQ29tcGxldGVkIiwiY2hhbmdlQ29tcGxldGVTdGF0dXMiLCJnZXREZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldERlc2NyaXB0aW9uIiwic2V0RHVlRGF0ZSIsInNldFByaW9yaXR5IiwibGlzdHMiLCJhZGROZXdMaXN0SW50ZXJmYWNlIiwibGlzdE9iamVjdCIsImNvbnRhaW5lciIsImluc2VydF9iZWZvcmUiLCJhTGlzdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImluc2VydEJlZm9yZSIsImxlZnQiLCJhcHBlbmRDaGlsZCIsInJpZ2h0IiwiaWNvbjEiLCJsaXN0VGl0bGUiLCJ0ZXh0Q29udGVudCIsImljb24yIiwiaWNvbjUiLCJyZW1vdmVFeGlzdGluZ01hcmtlciIsImxlbmd0aCIsImZpcnN0TGlzdCIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwibmV4dExpc3QiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ1cGRhdGVBcnJheUFuZFRvZG8iLCJhbGxUb2RvcyIsImFsbFRvZG9JbmRleCIsImkiLCJ0b2RvX25vIiwibGlzdF9ubyIsIngiLCJ0aGVET00iLCJhZGROZXdUb2RvSW50ZXJmYWNlIiwiYVRvZG8iLCJ0b2dnbGUiLCJjb2xsYXBzZSIsImNvbGxhcHNlSW1nIiwiaW5wdXQxIiwiY2hlY2tlZCIsInRpdGxlVG9kbyIsImNoYW5nZVRvZG9IZWFkZXIiLCJ0b2RvSGVhZGVyIiwic2hvd0xpc3RzVG9kb3MiLCJ0b2RvIiwic2F2ZVRvZG8iLCJhbkFycmF5IiwibCIsInQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2F2ZURhdGEiLCJhY3RpdmVMaXN0TnVtYmVyIiwiY2xlYXIiLCJlbGVtIiwic2F2ZUVkaXRlZExpc3QiLCJlIiwiZWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwiY29uc29sZSIsImxvZyIsInBhcnNlSW50IiwidGFyZ2V0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImxhc3RFbGVtZW50Q2hpbGQiLCJtYWtlTGlzdEFjdGl2ZSIsImluZGV4IiwiYWxsTGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkZWxldGVSZWxhdGVkVG9kbyIsImFsbFRvZG8iLCJzcGxpY2UiLCJsaXN0IiwidXBkYXRlTGlzdHNBbmRUb2RvcyIsImxpc3RObyIsInF1ZXJ5U2VsZWN0b3IiLCJzaG93UmVsYXRlZFRvZG9zIiwiZGVsZXRlRWxlbWVudCIsImxpc3ROYW1lSW5wdXQiLCJyZXF1aXJlZCIsImxpc3ROYW1lRm9ybSIsImVkaXRMaXN0Iiwib25zdWJtaXQiLCJyZW1vdmVJdGVtIiwiY2hhbmdlQ2hlY2siLCJtb2RpZnlUb2RvIiwidGFibGUiLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybSIsInNlbGVjdGVkT25lIiwicHJpb3JpdHlJbnB1dCIsImlucHV0Iiwic2VsZWN0ZWQiLCJzZXRQcmlvcml0eVZhbHVlIiwiZWRpdFRvZG8iLCJ0b2RvRE9NIiwicmVtb3ZlIiwicmVzZXQiLCJ1cGRhdGVUb2RvRE9NIiwidXBkYXRlRGF0YXMiLCJvbnJlc2V0IiwibmV3TGlzdGlucHV0IiwibGlzdEZvcm0iLCJuZXdMaXN0TW9kYWwiLCJhZGRUb2RvIiwibmV3VG9kb01vZGFsIiwidG9kb0Zvcm0iLCJ0b2RvTmFtZSIsImdldEl0ZW0iLCJhcnJheUxpc3RzIiwiYXJyYXlUb2RvcyIsImluY2x1ZGVzIiwibGlzdERldGFpbHMiLCJzcGxpdCIsIm5ld0xpc3QiLCJ0b2RvRGV0YWlscyIsIm5ld1RvZG8iLCJmaW5hbEFycmF5Iiwic29ydCIsImEiLCJiIiwic29ydEFycmF5cyIsImluc2VydFRvZG9zVG9MaXN0cyIsImxvYWREYXRhIiwiYWN0aXZlTGlzdCIsImxvYWRQYWdlIiwiZGVmYXVsdExpc3QiLCJkZWZhdWx0TGlzdERPTSIsImFsbFRvZG9ET01TIiwib25jbGljayIsImFkZEV2ZW50TGlzdGVuZXIiLCJzY3JvbGxUbyIsInNjcm9sbEhlaWdodCIsIm5ld0xpc3RET00iLCJ0b1N0cmluZyIsImZvckVhY2giXSwic291cmNlUm9vdCI6IiJ9