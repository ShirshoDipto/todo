(()=>{"use strict";class t{constructor(t,e,i,s){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,n){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.todoNumber=n}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t){const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function n(t,e,i){t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function o(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function c(t){s(d),this.setAttribute("id","active-list");let e=t.target.getAttribute("list-number");n(v,e,this.firstElementChild.lastElementChild.textContent),o(Array.from(document.querySelectorAll(".a-todo")),e),console.log(i)}let r=new t("My Day",[],0);i.push(r);const d=document.querySelector(".all-list"),l=document.querySelector("#list-name"),u=document.querySelector(".list-form"),a=document.querySelector(".add-new-list"),m=document.querySelector(".new-list-modal"),p=document.querySelector(".add-todo"),g=document.querySelector(".new-todo-modal"),h=document.querySelector(".todo-form"),b=document.querySelector("#todo-name"),A=document.querySelector("#due-date"),C=document.querySelector("#priority"),E=document.querySelector("#description"),f=document.querySelector(".todos"),v=document.querySelector(".todo-header"),L=document.querySelector(".all-list .a-list");p.onclick=()=>{g.removeAttribute("id")},a.addEventListener("click",(()=>{m.removeAttribute("id")})),u.onsubmit=function(e){e.preventDefault();let r=new t(l.value,[],i.length);!function(t,e,n,o){i.push(t),s(e);const c=document.createElement("div");c.classList.add("a-list"),c.setAttribute("list-number",`${t.getListNumber}`),c.setAttribute("id","active-list"),e.insertBefore(c,n);const r=document.createElement("div");r.classList.add("left"),c.appendChild(r);const d=document.createElement("div");d.classList.add("right"),c.appendChild(d);const l=document.createElement("img");l.classList.add("icon"),l.setAttribute("src","icons/plus.png"),r.appendChild(l);const u=document.createElement("div");u.classList.add("list-title"),u.textContent=t.getTitle,r.appendChild(u);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),d.appendChild(a);const m=document.createElement("img");m.classList.add("icon"),m.setAttribute("src","icons/plus.png"),d.appendChild(m);const p=document.createElement("img");p.classList.add("icon"),p.setAttribute("src","icons/plus.png"),d.appendChild(p);const g=document.createElement("img");g.classList.add("icon"),g.setAttribute("src","icons/plus.png"),d.appendChild(g)}(r,d,m),n(v,r.getListNumber,r.getTitle),o(Array.from(document.querySelectorAll(".a-todo")),r.getListNumber),document.getElementById("active-list").onclick=c,e.target.reset(),m.setAttribute("id","hide"),console.log(r)},u.onreset=()=>{m.setAttribute("id","hide")},h.onsubmit=function(t){t.preventDefault();const s=v.getAttribute("list-number");let n=new e(b.value,E.value,A.value,C.value,s);!function(t,e){console.log(i);for(let s of i)s.getListNumber===parseInt(e)&&s.addNewList(t)}(n,s),function(t,e){const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getTodoNumber}`),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const n=document.createElement("div");n.classList.add("description"),n.textContent=e.getDescription,i.appendChild(n);const o=document.createElement("div");o.classList.add("collapse"),i.appendChild(o);const c=document.createElement("div");c.classList.add("left"),s.appendChild(c);const r=document.createElement("div");r.classList.add("right"),s.appendChild(r);const d=document.createElement("img");d.setAttribute("src","icons/plus.png"),d.setAttribute("alt","collapse icon"),o.appendChild(d);const l=document.createElement("img");l.setAttribute("src","icons/plus.png"),d.setAttribute("alt","icon img"),l.classList.add("icon"),c.appendChild(l);const u=document.createElement("div");u.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,c.appendChild(u);const a=document.createElement("img");a.setAttribute("src","icons/plus.png"),d.setAttribute("alt","icon img"),a.classList.add("icon"),r.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),d.setAttribute("alt","icon img"),m.classList.add("icon"),r.appendChild(m);const p=document.createElement("img");p.setAttribute("src","icons/plus.png"),d.setAttribute("alt","icon img"),p.classList.add("icon"),r.appendChild(p);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),d.setAttribute("alt","icon img"),g.classList.add("icon"),r.appendChild(g)}(f,n),g.setAttribute("id","hide"),t.target.reset()},h.onreset=()=>{g.setAttribute("id","hide")},L.onclick=c})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVkzRCxhQUFhLE1BQU8sWUFDaEMyQyxFQUFNTixVQUFVQyxJQUFJLFFBQ3BCRSxFQUFLQyxZQUFZRSxHQUVqQixNQUFNaUIsRUFBWWhELFNBQVN3QixjQUFjLE9BQ3pDd0IsRUFBVTNELFlBQWMsR0FBRzNCLEVBQVFMLGtCQUFrQkssRUFBUVUsY0FDN0R3RCxFQUFLQyxZQUFZbUIsR0FFakIsTUFBTWYsRUFBUWpDLFNBQVN3QixjQUFjLE9BQ3JDUyxFQUFNN0MsYUFBYSxNQUFPLGtCQUMxQjJELEVBQVkzRCxhQUFhLE1BQU8sWUFDaEM2QyxFQUFNUixVQUFVQyxJQUFJLFFBQ3BCSSxFQUFNRCxZQUFZSSxHQUVsQixNQUFNQyxFQUFRbEMsU0FBU3dCLGNBQWMsT0FDckNVLEVBQU05QyxhQUFhLE1BQU8sa0JBQzFCMkQsRUFBWTNELGFBQWEsTUFBTyxZQUNoQzhDLEVBQU1ULFVBQVVDLElBQUksUUFDcEJJLEVBQU1ELFlBQVlLLEdBRWxCLE1BQU1DLEVBQVFuQyxTQUFTd0IsY0FBYyxPQUNyQ1csRUFBTS9DLGFBQWEsTUFBTyxrQkFDMUIyRCxFQUFZM0QsYUFBYSxNQUFPLFlBQ2hDK0MsRUFBTVYsVUFBVUMsSUFBSSxRQUNwQkksRUFBTUQsWUFBWU0sR0FFbEIsTUFBTUMsRUFBUXBDLFNBQVN3QixjQUFjLE9BQ3JDWSxFQUFNaEQsYUFBYSxNQUFPLGtCQUMxQjJELEVBQVkzRCxhQUFhLE1BQU8sWUFDaENnRCxFQUFNWCxVQUFVQyxJQUFJLFFBQ3BCSSxFQUFNRCxZQUFZTyxFQUN0QixDQ3BDSWEsQ0FBb0JwQyxFQUFTNEIsR0FDN0IvQixFQUFhdEIsYUFBYSxLQUFNLFFBQ2hDTSxFQUFFRSxPQUFPMkMsT0FDYixFQTJEQTVCLEVBQVM2QixRQUFVLEtBQ2Y5QixFQUFhdEIsYUFBYSxLQUFNLE9BQU8sRUFRM0MwQixFQUFlQyxRQUFVdEIsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8vLi9zcmMvbGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL3RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tYW5hZ2VMaXN0SW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlVG9kb0ludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdG9kb3MsIGxpc3ROdW1iZXIsIGFjdGl2ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMudG9kb3MgPSB0b2RvcztcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICAgICAgLy8gdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgLy8gdGhpcy5hY3RpdmUgPSBhY3RpdmU7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGdldEFjdGl2ZSgpIHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICAgIC8vIH1cbiAgICAvLyBzZXQgc2V0QWN0aXZlKHZhbHVlKSB7XG4gICAgLy8gICAgIHRoaXMuYWN0aXZlID0gdmFsdWU7XG4gICAgLy8gfVxuXG4gICAgLy8gZ2V0IGdldER1ZURhdGUoKSB7XG4gICAgLy8gICAgIHJldHVybiB0aGlzLmR1ZURhdGU7XG4gICAgLy8gfVxuXG4gICAgLy8gc2V0IHNldER1ZURhdGUodmFsdWUpIHtcbiAgICAvLyAgICAgdGhpcy5kdWVEYXRlID0gdmFsdWU7XG4gICAgLy8gfVxuXG4gICAgZ2V0IGdldExpc3ROdW1iZXIoKSB7cmV0dXJuIHRoaXMubGlzdE51bWJlcn1cblxuICAgIHNldCBzZXRMaXN0TnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRUaXRsZSgpIHtyZXR1cm4gdGhpcy50aXRsZX1cblxuICAgIGdldCBnZXRUb2RvcygpIHtyZXR1cm4gdGhpcy50b2Rvc31cblxuICAgIHNldCBzZXRUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGROZXdMaXN0KHRoZVRvZG8pIHtcbiAgICAgICAgdGhpcy50b2Rvcy5wdXNoKHRoZVRvZG8pO1xuICAgIH1cbn0iLCJcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHRvZG9OdW1iZXIpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy50b2RvTnVtYmVyID0gdG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VG9kb051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9kb051bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb051bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICB9XG4gICAgZ2V0IGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUsIHRvZG9IZWFkZXIpIHtcblxuICAgIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgICByZW1vcmVFeGlzdGluZ01hcmtlcihjb250YWluZXIpO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhTGlzdC5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7bGlzdE9iamVjdC5nZXRMaXN0TnVtYmVyfWApO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKGFMaXN0LCBpbnNlcnRfYmVmb3JlKTtcblxuXG4gICAgY29uc3QgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnbGVmdCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKGxlZnQpO1xuXG4gICAgY29uc3QgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICByaWdodC5jbGFzc0xpc3QuYWRkKCdyaWdodCcpO1xuICAgIGFMaXN0LmFwcGVuZENoaWxkKHJpZ2h0KTtcblxuICAgIGNvbnN0IGljb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjEuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChpY29uMSk7XG5cbiAgICBjb25zdCBsaXN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsaXN0VGl0bGUuY2xhc3NMaXN0LmFkZCgnbGlzdC10aXRsZScpO1xuICAgIGxpc3RUaXRsZS50ZXh0Q29udGVudCA9IGxpc3RPYmplY3QuZ2V0VGl0bGU7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChsaXN0VGl0bGUpO1xuXG4gICAgY29uc3QgaWNvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjIuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMik7XG5cbiAgICBjb25zdCBpY29uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24zLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjQpO1xuXG4gICAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW9yZUV4aXN0aW5nTWFya2VyKGNvbnRhaW5lcikge1xuICAgIGNvbnN0IGZpcnN0TGlzdCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBpZiAoZmlyc3RMaXN0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FjdGl2ZS1saXN0Jykge1xuICAgICAgICBmaXJzdExpc3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IG5leHRMaXN0ID0gZmlyc3RMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpe1xuICAgICAgICAgICAgICAgIG5leHRMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHRMaXN0ID0gbmV4dExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8vIDxkaXYgY2xhc3M9XCJhLWxpc3RcIj5cbi8vICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuLy8gICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwicGljXCI+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LXRpdGxlXCI+TXkgRGF5PC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJFXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJVXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEZWxcIj5cbi8vICAgICA8L2Rpdj5cbi8vIDwvZGl2PlxuIiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIGNvbnN0IGFUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYVRvZG8uY2xhc3NMaXN0LmFkZCgnYS10b2RvJyk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2NvbGxhcHNlIGljb24nKTtcbiAgICBjb2xsYXBzZS5hcHBlbmRDaGlsZChjb2xsYXBzZUltZyk7XG5cbiAgICBjb25zdCBpY29uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24xLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uMS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgbGVmdC5hcHBlbmRDaGlsZChpY29uMSk7XG5cbiAgICBjb25zdCB0aXRsZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZVRvZG8udGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKHRpdGxlVG9kbyk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2ljb24gaW1nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdpY29uIGltZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xufVxuXG5cbi8vIGNoYW5nZSB0b2RvIGhlYWRlclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGl0bGUpIHtcbiAgICB0b2RvSGVhZGVyLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0TnVtYmVyfWApO1xuICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSB0aXRsZTtcbn1cblxuLy8gc2hvdyBhbGwgdG9kb3Mgb2YgYSBwYXJ0aWN1bGFyIGxpc3RcbmV4cG9ydCBmdW5jdGlvbiBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbGlzdE51bWJlcikge1xuICAgIC8vIG1ldGhvZCBkZXNjcmlwdGlvbiBnb2VzIGhlcmVcbiAgICBpZiAoYWxsVG9kb3MgPT09IG51bGwpIHJldHVyblxuICAgIGZvciAobGV0IHRvZG8gb2YgYWxsVG9kb3MpIHtcbiAgICAgICAgaWYgKHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpID09PSBsaXN0TnVtYmVyKSB7XG4gICAgICAgICAgICB0b2RvLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvZG8uc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG59XG5cblxuXG4vLyA8ZGl2IGNsYXNzPVwiYS10b2RvXCI+XG4vLyAgICAgPGRpdiBjbGFzcz1cImEtbGlzdFwiPlxuLy8gICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIlwiPlxuLy8gICAgICAgICAgICAgPGRpdj5uYW1lIG9mIHRoZSB0b2RvPC9kaXY+XG4vLyAgICAgICAgIDwvZGl2PlxuLy8gICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJFXCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiVVwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEZWxcIj5cbi8vICAgICAgICAgPC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uXCIgaWQ9XCJoaWRlXCI+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2ljaW5nIGVsaXQuIEVzc2UgaXBzYW0gZnVnaWF0IGV1bSBoaWMgaXBzdW0gZG9sb3J1bSBibGFuZGl0aWlzIGl1c3RvIGRlbGVuaXRpIHBlcmZlcmVuZGlzIGVuaW0gbmlzaSBhZGlwaXNjaSBpdXJlIG5hdHVzIGFkIG1heGltZSwgYW1ldCwgY29ycG9yaXMgcXVpYnVzZGFtIGFsaXF1YW0hPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cImNvbGxhcHNlXCI+XG4vLyAgICAgICAgIDxpbWcgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJjb2xsYXBzZSBpY29uXCI+XG4vLyAgICAgPC9kaXY+XG4vLyA8L2Rpdj5cblxuIiwiaW1wb3J0IExpc3QgZnJvbSAnLi9saXN0J1xuaW1wb3J0IFRvZG8gZnJvbSAnLi90b2RvJ1xuaW1wb3J0IHtsaXN0cywgYWRkTmV3TGlzdEludGVyZmFjZSwgcmVtb3JlRXhpc3RpbmdNYXJrZXJ9IGZyb20gJy4vbWFuYWdlTGlzdEludGVyZmFjZSdcbmltcG9ydCB7YWRkTmV3VG9kb0ludGVyZmFjZSwgY2hhbmdlVG9kb0hlYWRlciwgc2hvd0xpc3RzVG9kb3N9IGZyb20gJy4vbWFuYWdlVG9kb0ludGVyZmFjZSdcblxuXG5cbmZ1bmN0aW9uIGFkZFRvZG9Ub0xpc3QodGhlVG9kbywgbGlzdE51bWJlcikge1xuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbiAgICBmb3IgKGxldCBsaXN0IG9mIGxpc3RzKSB7XG4gICAgICAgIGlmIChsaXN0LmdldExpc3ROdW1iZXIgPT09IHBhcnNlSW50KGxpc3ROdW1iZXIpKSB7XG4gICAgICAgICAgICBsaXN0LmFkZE5ld0xpc3QodGhlVG9kbyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZnVuY3Rpb24gYWRkTGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbGV0IG5ld0xpc3QgPSBuZXcgTGlzdChuZXdMaXN0aW5wdXQudmFsdWUsIFtdLCBsaXN0cy5sZW5ndGgpO1xuICAgIGFkZE5ld0xpc3RJbnRlcmZhY2UobmV3TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsLCB0b2RvSGVhZGVyKTtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG5ld0xpc3QuZ2V0TGlzdE51bWJlciwgbmV3TGlzdC5nZXRUaXRsZSk7XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIG5ld0xpc3QuZ2V0TGlzdE51bWJlcik7XG4gICAgY29uc3QgbmV3TGlzdERPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmUtbGlzdCcpO1xuICAgIG5ld0xpc3RET00ub25jbGljayA9IG1ha2VMaXN0QWN0aXZlO1xuICAgIGUudGFyZ2V0LnJlc2V0KCk7XG4gICAgbmV3TGlzdE1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgIGNvbnNvbGUubG9nKG5ld0xpc3QpO1xufVxuXG5cbmZ1bmN0aW9uIGFkZF9hX1RvZG8oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0b2RvSGVhZGVyLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICBsZXQgbmV3VG9kbyA9IG5ldyBUb2RvKHRvZG9OYW1lLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZHVlRGF0ZS52YWx1ZSwgcHJpb3JpdHkudmFsdWUsIGxpc3ROdW1iZXIpO1xuICAgIGFkZFRvZG9Ub0xpc3QobmV3VG9kbywgbGlzdE51bWJlcik7XG4gICAgYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCBuZXdUb2RvKTtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbn1cblxuXG5cbi8vIHdoZW4gY2xpY2tlZCBvbiB0aGUgZGl2OlxuLy8gIHNlbmQgYWxsIHRoZSBsaXN0cyBpbnRvIHRoZSBtYW5hZ2VJbnRlcmZhY2UgbW9kdWxlXG4vLyAgcmVtb3ZlIHRoZSBleGlzdGluZyBib3JkZXJcbi8vICBzZXQgdGhlIGJvcmRlciB0byB0aGUgdGhpbmcgdGhhdCBpcyBzZWxlY3RlZFxuXG5mdW5jdGlvbiBtYWtlTGlzdEFjdGl2ZShlKSB7XG4gICAgcmVtb3JlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgXG4gICAgLy8gZ2V0IHRoZSBsaXN0T2JqZWN0XG4gICAgbGV0IGxpc3ROdW1iZXIgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aGlzLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQpO1xuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYS10b2RvJykpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuLy8gQWRkaW5nIGRlZmF1bHQgbGlzdFxubGV0IGRlZmF1bHRMaXN0ID0gbmV3IExpc3QoJ015IERheScsIFtdLCAwKTtcbmxpc3RzLnB1c2goZGVmYXVsdExpc3QpO1xuXG4vLyBBbGwgZ2xvYmFsIHZhcmlhYmxlcyBhbmQgZXZlbnRMaXN0ZW5lcnNcbmNvbnN0IGFsbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LW5hbWUnKTtcbmNvbnN0IGxpc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtZm9ybScpO1xuY29uc3QgYWRkTmV3TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtbmV3LWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctbGlzdC1tb2RhbCcpO1xuY29uc3QgYWRkVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLW1vZGFsJyk7XG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZvcm0nKTtcbmNvbnN0IHRvZG9OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG8tbmFtZScpO1xuY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkdWUtZGF0ZScpO1xuY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKTtcbmNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJyk7XG5jb25zdCBhbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG9zJyk7XG5jb25zdCB0b2RvSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taGVhZGVyJyk7XG5cbmNvbnN0IGRlZmF1bHRMaXN0RE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC1saXN0IC5hLWxpc3QnKTtcblxuYWRkVG9kby5vbmNsaWNrID0gKCkgPT4ge1xuICAgIG5ld1RvZG9Nb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59XG5cbmFkZE5ld0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbmV3TGlzdE1vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn0pXG5cblxubGlzdEZvcm0ub25zdWJtaXQgPSBhZGRMaXN0O1xubGlzdEZvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbnRvZG9Gb3JtLm9uc3VibWl0ID0gYWRkX2FfVG9kbztcbnRvZG9Gb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xufVxuXG4vLyBhbGwgbGlzdCBldmVudCBsaXN0ZW5lclxuLy8gZGVmYXVsdExpc3RET01DaGlsZHJlbi5mb3JFYWNoKHRoZUxpc3QgPT4ge1xuLy8gICAgIHRoZUxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBtYWtlTGlzdEFjdGl2ZSwge2NhcHR1cmU6dHJ1ZX0pO1xuLy8gfSk7XG5cbmRlZmF1bHRMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTsiXSwibmFtZXMiOlsiTGlzdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJ0b2RvcyIsImxpc3ROdW1iZXIiLCJhY3RpdmUiLCJ0aGlzIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJ2YWx1ZSIsImdldFRpdGxlIiwiZ2V0VG9kb3MiLCJzZXRUaXRsZSIsInNldFRvZG9zIiwiYWRkTmV3TGlzdCIsInRoZVRvZG8iLCJwdXNoIiwiVG9kbyIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwidG9kb051bWJlciIsImdldFRvZG9OdW1iZXIiLCJzZXRUb2RvTnVtYmVyIiwiZ2V0RGVzY3JpcHRpb24iLCJnZXREdWVEYXRlIiwiZ2V0UHJpb3JpdHkiLCJzZXREZXNjcmlwdGlvbiIsInNldER1ZURhdGUiLCJzZXRQcmlvcml0eSIsImxpc3RzIiwicmVtb3JlRXhpc3RpbmdNYXJrZXIiLCJjb250YWluZXIiLCJmaXJzdExpc3QiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIm5leHRMaXN0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiY2hhbmdlVG9kb0hlYWRlciIsInRvZG9IZWFkZXIiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsInNob3dMaXN0c1RvZG9zIiwiYWxsVG9kb3MiLCJ0b2RvIiwibWFrZUxpc3RBY3RpdmUiLCJlIiwiYWxsTGlzdCIsInRhcmdldCIsImxhc3RFbGVtZW50Q2hpbGQiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb25zb2xlIiwibG9nIiwiZGVmYXVsdExpc3QiLCJxdWVyeVNlbGVjdG9yIiwibmV3TGlzdGlucHV0IiwibGlzdEZvcm0iLCJuZXdMaXN0TW9kYWwiLCJhZGRUb2RvIiwibmV3VG9kb01vZGFsIiwidG9kb0Zvcm0iLCJ0b2RvTmFtZSIsImFsbFRvZG8iLCJkZWZhdWx0TGlzdERPTSIsIm9uY2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwib25zdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsIm5ld0xpc3QiLCJsZW5ndGgiLCJsaXN0T2JqZWN0IiwiaW5zZXJ0X2JlZm9yZSIsImFMaXN0IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImluc2VydEJlZm9yZSIsImxlZnQiLCJhcHBlbmRDaGlsZCIsInJpZ2h0IiwiaWNvbjEiLCJsaXN0VGl0bGUiLCJpY29uMiIsImljb24zIiwiaWNvbjQiLCJpY29uNSIsImFkZE5ld0xpc3RJbnRlcmZhY2UiLCJnZXRFbGVtZW50QnlJZCIsInJlc2V0Iiwib25yZXNldCIsIm5ld1RvZG8iLCJsaXN0IiwicGFyc2VJbnQiLCJhZGRUb2RvVG9MaXN0IiwiYVRvZG8iLCJjb2xsYXBzZSIsImNvbGxhcHNlSW1nIiwidGl0bGVUb2RvIiwiYWRkTmV3VG9kb0ludGVyZmFjZSJdLCJzb3VyY2VSb290IjoiIn0=