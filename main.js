(()=>{"use strict";class t{constructor(t,e,i){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,n,o,l){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.listNumber=n,this.completed=o,this.todoNumber=l}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){!0===this.completed?this.completed=!1:this.completed=!0}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t){const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}let n=[];function o(t,e,i){t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function l(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function r(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");u.removeChild(t);const s=Array.from(document.querySelectorAll(".a-list"));let n=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let s of e)s.getAttribute("list-number")===i&&t.removeChild(s)}(L,n,e),n=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,s){i.splice(parseInt(e),1);let n=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${n}`),n++;let o=0;for(let t=0;t<i.length;t++)if(i[t].setListNumber=t,0!==i[t].getTodos.length){const e=i[t].getListNumber;for(let n of i[t].getTodos){n.setListNumber=t;let i=s[o];i.removeAttribute("list-number"),i.setAttribute("list-number",`${e}`),o++}}}(s,e,n),d(n,e),E.getAttribute("list-number")===e&&d(n,e)}}(this);else{s(u),this.setAttribute("id","active-list");let e=t.target.getAttribute("list-number");o(E,e,this.firstElementChild.lastElementChild.textContent),l(Array.from(document.querySelectorAll(".a-todo")),e)}console.log(i)}function d(t,e){0===i.length?(E.firstElementChild.textContent="Add a List",E.firstElementChild.nextElementSibling.textContent=""):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),o(E,e,i[0].getTitle),l(t,"0")):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),o(E,e,i[parseInt(e)-1].getTitle),l(t,""+(parseInt(e)-1)))}let c=new t("My Day",[],0);i.push(c);const u=document.querySelector(".all-list"),a=document.querySelector("#list-name"),m=document.querySelector(".list-form"),p=document.querySelector(".add-new-list"),b=document.querySelector(".new-list-modal"),g=document.querySelector(".add-todo"),h=document.querySelector(".new-todo-modal"),A=document.querySelector(".todo-form"),f=document.querySelector("#todo-name"),v=document.querySelector("#due-date"),C=document.querySelector("#priority"),y=document.querySelector("#description"),L=document.querySelector(".all-todo"),E=document.querySelector(".todo-header"),S=document.querySelector(".all-list .a-list");g.onclick=()=>{h.removeAttribute("id")},p.addEventListener("click",(()=>{b.removeAttribute("id")})),m.onsubmit=function(e){e.preventDefault();let n=new t(a.value,[],i.length);s(u),function(t,e,s){i.push(t);const n=document.createElement("div");n.classList.add("a-list"),n.setAttribute("list-number",`${t.getListNumber}`),n.setAttribute("id","active-list"),e.insertBefore(n,s);const o=document.createElement("div");o.classList.add("left"),n.appendChild(o);const l=document.createElement("div");l.classList.add("right"),n.appendChild(l);const r=document.createElement("img");r.classList.add("icon"),r.setAttribute("src","icons/plus.png"),o.appendChild(r);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,o.appendChild(d);const c=document.createElement("img");c.classList.add("icon"),c.setAttribute("src","icons/plus.png"),l.appendChild(c);const u=document.createElement("img");u.classList.add("icon"),u.setAttribute("src","icons/plus.png"),l.appendChild(u);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),l.appendChild(a);const m=document.createElement("img");m.classList.add("delete"),m.setAttribute("src","icons/plus.png"),l.appendChild(m)}(n,u,b);const d=Array.from(document.querySelectorAll(".a-todo"));o(E,n.getListNumber,n.getTitle),l(d,n.getListNumber),document.getElementById("active-list").onclick=r,e.target.reset(),b.setAttribute("id","hide"),console.log(i)},m.onreset=()=>{b.setAttribute("id","hide")},A.onsubmit=function(t){t.preventDefault();const s=E.getAttribute("list-number"),o=i[parseInt(s)].getTodos.length;let l=new e(f.value,y.value,v.value,C.value,s,!1,o);i[parseInt(s)].getTodos.push(l),function(t,e){n.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const o=document.createElement("div");o.classList.add("description"),o.textContent=e.getDescription,i.appendChild(o);const l=document.createElement("div");l.classList.add("collapse"),i.appendChild(l);const r=document.createElement("div");r.classList.add("left"),s.appendChild(r);const d=document.createElement("div");d.classList.add("right"),s.appendChild(d);const c=document.createElement("img");c.setAttribute("src","icons/plus.png"),c.setAttribute("alt","collapse icon"),l.appendChild(c);const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id","todo-checkbox"),u.setAttribute("name","todo-checkbox"),r.appendChild(u);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,r.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),c.setAttribute("alt","icon img"),m.classList.add("icon"),d.appendChild(m);const p=document.createElement("img");p.setAttribute("src","icons/plus.png"),c.setAttribute("alt","icon img"),p.classList.add("icon"),d.appendChild(p);const b=document.createElement("img");b.setAttribute("src","icons/plus.png"),c.setAttribute("alt","icon img"),b.classList.add("icon"),d.appendChild(b);const g=document.createElement("img");g.setAttribute("src","icons/plus.png"),c.setAttribute("alt","icon img"),g.classList.add("delete"),d.appendChild(g)}(L,l),h.setAttribute("id","hide"),t.target.reset(),console.log(i)},A.onreset=()=>{h.setAttribute("id","hide")},S.onclick=r})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVV6RSxZQUFjLEdBQUc5QixFQUFRTCxrQkFBa0JLLEVBQVFhLGNBQzdEd0UsRUFBS0MsWUFBWWlCLEdBRWpCLE1BQU1iLEVBQVE5QyxTQUFTc0MsY0FBYyxPQUNyQ1EsRUFBTTdELGFBQWEsTUFBTyxrQkFDMUJ3RSxFQUFZeEUsYUFBYSxNQUFPLFlBQ2hDNkQsRUFBTXJELFVBQVU4QyxJQUFJLFFBQ3BCSSxFQUFNRCxZQUFZSSxHQUVsQixNQUFNQyxFQUFRL0MsU0FBU3NDLGNBQWMsT0FDckNTLEVBQU05RCxhQUFhLE1BQU8sa0JBQzFCd0UsRUFBWXhFLGFBQWEsTUFBTyxZQUNoQzhELEVBQU10RCxVQUFVOEMsSUFBSSxRQUNwQkksRUFBTUQsWUFBWUssR0FFbEIsTUFBTUMsRUFBUWhELFNBQVNzQyxjQUFjLE9BQ3JDVSxFQUFNL0QsYUFBYSxNQUFPLGtCQUMxQndFLEVBQVl4RSxhQUFhLE1BQU8sWUFDaEMrRCxFQUFNdkQsVUFBVThDLElBQUksUUFDcEJJLEVBQU1ELFlBQVlNLEdBRWxCLE1BQU1DLEVBQVFqRCxTQUFTc0MsY0FBYyxPQUNyQ1csRUFBTWhFLGFBQWEsTUFBTyxrQkFDMUJ3RSxFQUFZeEUsYUFBYSxNQUFPLFlBQ2hDZ0UsRUFBTXhELFVBQVU4QyxJQUFJLFVBQ3BCSSxFQUFNRCxZQUFZTyxFQUd0QixDQzVDdUJXLENBQW9CeEQsRUFBU2tELEdBR2hENUIsRUFBYXpDLGFBQWEsS0FBTSxRQUNoQ00sRUFBRUMsT0FBTzRELFFBQ1RuQyxRQUFRQyxJQUFJNUMsRUFDaEIsRUFpR0FxRCxFQUFTMEIsUUFBVSxLQUNmM0IsRUFBYXpDLGFBQWEsS0FBTSxPQUFPLEVBRzNDNEMsRUFBZUMsUUFBVXhDLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlTGlzdEludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZVRvZG9JbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdCB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIHRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b2RvcyA9IHRvZG9zO1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICAvLyB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICAvLyB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICB9XG5cbiAgICAvLyBnZXQgZ2V0QWN0aXZlKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgLy8gfVxuICAgIC8vIHNldCBzZXRBY3RpdmUodmFsdWUpIHtcbiAgICAvLyAgICAgdGhpcy5hY3RpdmUgPSB2YWx1ZTtcbiAgICAvLyB9XG5cbiAgICAvLyBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICAvLyB9XG5cbiAgICAvLyBzZXQgc2V0RHVlRGF0ZSh2YWx1ZSkge1xuICAgIC8vICAgICB0aGlzLmR1ZURhdGUgPSB2YWx1ZTtcbiAgICAvLyB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtyZXR1cm4gdGhpcy5saXN0TnVtYmVyfVxuXG4gICAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRpdGxlKCkge3JldHVybiB0aGlzLnRpdGxlfVxuXG4gICAgZ2V0IGdldFRvZG9zKCkge3JldHVybiB0aGlzLnRvZG9zfVxuXG4gICAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGFkZE5ld0xpc3QodGhlVG9kbykge1xuICAgICAgICB0aGlzLnRvZG9zLnB1c2godGhlVG9kbyk7XG4gICAgfVxufSIsIlxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG8ge1xuXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgbGlzdE51bWJlciwgY29tcGxldGVkLCB0b2RvTnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gY29tcGxldGVkO1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB0b2RvTnVtYmVyO1xuICAgIH1cblxuICAgIGdldCBnZXRUb2RvTnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2RvTnVtYmVyO1xuICAgIH1cblxuICAgIHNldCBzZXRUb2RvTnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb051bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRJc0NvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVkO1xuICAgIH1cblxuICAgIGNoYW5nZUNvbXBsZXRlU3RhdHVzKCkge1xuICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdE51bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICB9XG4gICAgZ2V0IGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUpIHtcblxuICAgIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0T2JqZWN0LmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYUxpc3QsIGluc2VydF9iZWZvcmUpO1xuXG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgaWNvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjEuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGljb24xKTtcblxuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RUaXRsZS5jbGFzc0xpc3QuYWRkKCdsaXN0LXRpdGxlJyk7XG4gICAgbGlzdFRpdGxlLnRleHRDb250ZW50ID0gbGlzdE9iamVjdC5nZXRUaXRsZTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGxpc3RUaXRsZSk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICAgIGNvbnN0IGljb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjMpO1xuXG4gICAgY29uc3QgaWNvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNC5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZScpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFeGlzdGluZ01hcmtlcihjb250YWluZXIpIHtcbiAgICBjb25zdCBmaXJzdExpc3QgPSBjb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgaWYgKGZpcnN0TGlzdC5nZXRBdHRyaWJ1dGUoJ2lkJykgPT09ICdhY3RpdmUtbGlzdCcpIHtcbiAgICAgICAgZmlyc3RMaXN0LnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBuZXh0TGlzdCA9IGZpcnN0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAobmV4dExpc3QuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWN0aXZlLWxpc3QnKXtcbiAgICAgICAgICAgICAgICBuZXh0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0TGlzdCA9IG5leHRMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUxpc3RzQW5kVG9kb3MoY29udGFpbmVyLCBsaXN0TnVtYmVyLCBhbGxUb2Rvcykge1xuICAgIGxpc3RzLnNwbGljZShwYXJzZUludChsaXN0TnVtYmVyKSwgMSk7XG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIC8vICB1cGRhdGUgZG9tc1xuICAgIGZvciAobGV0IGxpc3Qgb2YgY29udGFpbmVyKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBsaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtpbmRleH1gKTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgQXJyYXkgYW5kIHRvZG8gRE9NJ3NcbiAgICBsZXQgYWxsVG9kb0luZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpc3RzW2ldLnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICBpZiAobGlzdHNbaV0uZ2V0VG9kb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3Rfbm8gPSBsaXN0c1tpXS5nZXRMaXN0TnVtYmVyO1xuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiBsaXN0c1tpXS5nZXRUb2Rvcykge1xuICAgICAgICAgICAgICAgIHguc2V0TGlzdE51bWJlciA9IGk7XG4gICAgICAgICAgICAgICAgbGV0IHRoZURPTSA9IGFsbFRvZG9zW2FsbFRvZG9JbmRleF07XG4gICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3Rfbm99YCk7XG4gICAgICAgICAgICAgICAgYWxsVG9kb0luZGV4Kys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBleHBvcnQgZnVuY3Rpb24gdXBkYXRlVG9kb0RPTShhbGxUb2Rvcykge1xuLy8gICAgIGxldCBhbGxUb2RvSW5kZXggPSAwO1xuLy8gICAgIGZvciAobGV0IGxpc3Qgb2YgbGlzdHMpIHtcbi8vICAgICAgICAgaWYgKGxpc3QuZ2V0VG9kb3MubGVuZ3RoID09PSAwKSB7XG4vLyAgICAgICAgICAgICBjb250aW51ZTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBlbHNlIHtcbi8vICAgICAgICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBsaXN0LmdldExpc3ROdW1iZXI7XG4vLyAgICAgICAgICAgICBmb3IgKGxldCB0b2RvIG9mIGxpc3QuZ2V0VG9kbykge1xuLy8gICAgICAgICAgICAgICAgIGxldCB0aGVET00gPSBhbGxUb2Rvc1thbGxUb2RvSW5kZXhdO1xuLy8gICAgICAgICAgICAgICAgIHRoZURPTS5yZW1vdmVBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4vLyAgICAgICAgICAgICAgICAgdGhlRE9NLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0TnVtYmVyfWApO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgfVxuLy8gfVxuXG5cbi8vIDxkaXYgY2xhc3M9XCJhLWxpc3RcIj5cbi8vICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuLy8gICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwicGljXCI+XG4vLyAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LXRpdGxlXCI+TXkgRGF5PC9kaXY+XG4vLyAgICAgPC9kaXY+XG4vLyAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJFXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJVXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEXCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEZWxcIj5cbi8vICAgICA8L2Rpdj5cbi8vIDwvZGl2PlxuIiwiXG5cbmV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcblxuICAgIC8vIGRlc2NyaXB0aW9ucyBnb2VzIGhlcmVcblxuICAgIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgICBjb25zdCBhVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFUb2RvLmNsYXNzTGlzdC5hZGQoJ2EtdG9kbycpO1xuICAgIGFUb2RvLnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gICAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhTGlzdC5jbGFzc0xpc3QuYWRkKCdhLWxpc3QnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChhTGlzdCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGVUb2RvLmdldERlc2NyaXB0aW9uO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGNvbGxhcHNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29sbGFwc2UuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICBhVG9kby5hcHBlbmRDaGlsZChjb2xsYXBzZSk7XG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgY29sbGFwc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2NvbGxhcHNlIGljb24nKTtcbiAgICBjb2xsYXBzZS5hcHBlbmRDaGlsZChjb2xsYXBzZUltZyk7XG5cbiAgICBjb25zdCBpbnB1dDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0b2RvLWNoZWNrYm94Jyk7XG4gICAgLy8gaW5wdXQxLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGlucHV0MSk7XG5cbiAgICBjb25zdCB0aXRsZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZVRvZG8udGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldFRpdGxlfSAoRHVlOiAke3RoZVRvZG8uZ2V0RHVlRGF0ZX0pYDtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKHRpdGxlVG9kbyk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgJ2ljb24gaW1nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24zKTtcblxuICAgIGNvbnN0IGljb240ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBjb2xsYXBzZUltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdpY29uIGltZycpO1xuICAgIGljb240LmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnaWNvbiBpbWcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgICByZXR1cm4gYVRvZG87XG59XG5cblxuLy8gY2hhbmdlIHRvZG8gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aXRsZSkge1xuICAgIHRvZG9IZWFkZXIuc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4gICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xufVxuXG4vLyBzaG93IGFsbCB0b2RvcyBvZiBhIHBhcnRpY3VsYXIgbGlzdFxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgLy8gbWV0aG9kIGRlc2NyaXB0aW9uIGdvZXMgaGVyZVxuICAgIGlmIChhbGxUb2RvcyA9PT0gbnVsbCkgcmV0dXJuXG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBpZiAodG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykgPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHRvZG8ucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9kby5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUmVsYXRlZFRvZG8oY29udGFpbmVyLCBhbGxUb2RvcywgbGlzdE51bWJlcil7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBjb25zdCBsaXN0X251bSA9IHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBpZiAobGlzdF9udW0gPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBleHBvcnQgZnVuY3Rpb24gdXBkYXRlVG9kb0RPTShhbkFycmF5KSB7XG4vLyAgICAgZm9yIChsZXQgeCBvZiBhbkFycmF5KSB7XG4gICAgICAgIFxuLy8gICAgIH1cbi8vIH1cblxuLy8gPGRpdiBjbGFzcz1cImEtdG9kb1wiPlxuLy8gICAgIDxkaXYgY2xhc3M9XCJhLWxpc3RcIj5cbi8vICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnRcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJcIj5cbi8vICAgICAgICAgICAgIDxkaXY+bmFtZSBvZiB0aGUgdG9kbzwvZGl2PlxuLy8gICAgICAgICA8L2Rpdj5cbi8vICAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiRVwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIlVcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEXCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiRGVsXCI+XG4vLyAgICAgICAgIDwvZGl2PlxuLy8gICAgIDwvZGl2PlxuLy8gICAgIDxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiIGlkPVwiaGlkZVwiPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LiBFc3NlIGlwc2FtIGZ1Z2lhdCBldW0gaGljIGlwc3VtIGRvbG9ydW0gYmxhbmRpdGlpcyBpdXN0byBkZWxlbml0aSBwZXJmZXJlbmRpcyBlbmltIG5pc2kgYWRpcGlzY2kgaXVyZSBuYXR1cyBhZCBtYXhpbWUsIGFtZXQsIGNvcnBvcmlzIHF1aWJ1c2RhbSBhbGlxdWFtITwvZGl2PlxuLy8gICAgIDxkaXYgY2xhc3M9XCJjb2xsYXBzZVwiPlxuLy8gICAgICAgICA8aW1nIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiY29sbGFwc2UgaWNvblwiPlxuLy8gICAgIDwvZGl2PlxuLy8gPC9kaXY+XG5cbiIsImltcG9ydCBMaXN0IGZyb20gJy4vbGlzdCdcbmltcG9ydCBUb2RvIGZyb20gJy4vdG9kbydcbmltcG9ydCB7bGlzdHMsIGFkZE5ld0xpc3RJbnRlcmZhY2UsIHJlbW92ZUV4aXN0aW5nTWFya2VyLCB1cGRhdGVMaXN0c0FuZFRvZG9zfSBmcm9tICcuL21hbmFnZUxpc3RJbnRlcmZhY2UnXG5pbXBvcnQge2FkZE5ld1RvZG9JbnRlcmZhY2UsIGNoYW5nZVRvZG9IZWFkZXIsIHNob3dMaXN0c1RvZG9zLCBkZWxldGVSZWxhdGVkVG9kb30gZnJvbSAnLi9tYW5hZ2VUb2RvSW50ZXJmYWNlJ1xuXG5cbmZ1bmN0aW9uIGFkZExpc3QoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICAgIGxldCBuZXdMaXN0ID0gbmV3IExpc3QobmV3TGlzdGlucHV0LnZhbHVlLCBbXSwgbGlzdHMubGVuZ3RoKTtcbiAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICBhZGROZXdMaXN0SW50ZXJmYWNlKG5ld0xpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCwgdG9kb0hlYWRlcik7XG4gICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG5cbiAgICAvLyBtYW5hZ2UgdG9kbyBpbnRlcmZhY2VcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG5ld0xpc3QuZ2V0TGlzdE51bWJlciwgbmV3TGlzdC5nZXRUaXRsZSk7XG4gICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIG5ld0xpc3QuZ2V0TGlzdE51bWJlcik7XG4gICAgY29uc3QgbmV3TGlzdERPTSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY3RpdmUtbGlzdCcpO1xuICAgIG5ld0xpc3RET00ub25jbGljayA9IG1ha2VMaXN0QWN0aXZlO1xuICAgIGUudGFyZ2V0LnJlc2V0KCk7XG4gICAgbmV3TGlzdE1vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbn1cblxuXG5mdW5jdGlvbiBhZGRfYV9Ub2RvKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgICBjb25zdCBsaXN0TnVtYmVyID0gdG9kb0hlYWRlci5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgY29uc3QgdG9kb051bWJlciA9IGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5sZW5ndGg7XG4gICAgbGV0IG5ld1RvZG8gPSBuZXcgVG9kbyh0b2RvTmFtZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUsIGR1ZURhdGUudmFsdWUsIHByaW9yaXR5LnZhbHVlLCBsaXN0TnVtYmVyLCBmYWxzZSwgdG9kb051bWJlcik7XG4gICAgbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLnB1c2gobmV3VG9kbyk7XG5cblxuICAgIC8vIGJyaW5nIHRoZSB0b2RvIGludGVyZmFjZVxuICAgIGNvbnN0IG5ld1RvZG9ET00gPSBhZGROZXdUb2RvSW50ZXJmYWNlKGFsbFRvZG8sIG5ld1RvZG8pO1xuXG4gICAgLy8gaGlkZSBtb2RhbFxuICAgIG5ld1RvZG9Nb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICBlLnRhcmdldC5yZXNldCgpO1xuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbn1cblxuXG5mdW5jdGlvbiBtYWtlTGlzdEFjdGl2ZShlKSB7XG4gICAgLy8gaGFuZGxlIGRlbGV0ZSwgdXAsIGRvd24sIGNvbXBsZXRlXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgZGVsZXRlRWxlbWVudCh0aGlzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGdldCB0aGUgbGlzdE9iamVjdFxuICAgICAgICBsZXQgbGlzdE51bWJlciA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aGlzLmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQpO1xuICAgICAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtdG9kbycpKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIGxpc3ROdW1iZXIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGxpc3RzKTtcbn1cblxuZnVuY3Rpb24gc2hvd1JlbGF0ZWRUb2Rvcyh4LCBsaXN0Tm8pe1xuICAgIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9ICdBZGQgYSBMaXN0JztcbiAgICAgICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSAnJztcbiAgICB9XG4gICAgZWxzZSBpZiAobGlzdE5vID09PSBgMGApIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIwXCJdJyk7XG4gICAgICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbMF0uZ2V0VGl0bGUpO1xuICAgICAgICBzaG93TGlzdHNUb2Rvcyh4LCBgMGApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke3BhcnNlSW50KGxpc3RObyktMX1cIl1gKTtcbiAgICAgICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE5vLCBsaXN0c1twYXJzZUludChsaXN0Tm8pLTFdLmdldFRpdGxlKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoeCwgYCR7cGFyc2VJbnQobGlzdE5vKS0xfWApO1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBkZWxldGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QudmFsdWUgPT09ICdhLWxpc3QnKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIC8vIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgICAgICBhbGxMaXN0LnJlbW92ZUNoaWxkKGVsZW1lbnQpXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtbGlzdCcpKTtcbiAgICAgICAgbGV0IHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICBkZWxldGVSZWxhdGVkVG9kbyhhbGxUb2RvLCB4LCBpbmRleCk7XG4gICAgICAgIHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgaW5kZXgsIHgpO1xuICAgICAgICBzaG93UmVsYXRlZFRvZG9zKHgsIGluZGV4KTtcbiAgICAgICAgaWYgKHRvZG9IZWFkZXIuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpID09PSBpbmRleCkge1xuICAgICAgICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLy8gQWRkaW5nIGRlZmF1bHQgbGlzdFxubGV0IGRlZmF1bHRMaXN0ID0gbmV3IExpc3QoJ015IERheScsIFtdLCAwKTtcbmxpc3RzLnB1c2goZGVmYXVsdExpc3QpO1xuXG4vLyBBbGwgZ2xvYmFsIHZhcmlhYmxlcyBhbmQgZXZlbnRMaXN0ZW5lcnNcbmNvbnN0IGFsbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsaXN0LW5hbWUnKTtcbmNvbnN0IGxpc3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtZm9ybScpO1xuY29uc3QgYWRkTmV3TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtbmV3LWxpc3QnKTtcbmNvbnN0IG5ld0xpc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctbGlzdC1tb2RhbCcpO1xuY29uc3QgYWRkVG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy10b2RvLW1vZGFsJyk7XG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWZvcm0nKTtcbmNvbnN0IHRvZG9OYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG8tbmFtZScpO1xuY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkdWUtZGF0ZScpO1xuY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJpb3JpdHknKTtcbmNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJyk7XG5jb25zdCBhbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC10b2RvJyk7XG5jb25zdCB0b2RvSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8taGVhZGVyJyk7XG5cbmNvbnN0IGRlZmF1bHRMaXN0RE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC1saXN0IC5hLWxpc3QnKTtcblxuYWRkVG9kby5vbmNsaWNrID0gKCkgPT4ge1xuICAgIG5ld1RvZG9Nb2RhbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG59XG5cbmFkZE5ld0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbmV3TGlzdE1vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn0pXG5cblxubGlzdEZvcm0ub25zdWJtaXQgPSBhZGRMaXN0O1xubGlzdEZvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbnRvZG9Gb3JtLm9uc3VibWl0ID0gYWRkX2FfVG9kbztcbnRvZG9Gb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnNldEF0dHJpYnV0ZSgnaWQnLCAnaGlkZScpO1xufVxuXG5kZWZhdWx0TGlzdERPTS5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7Il0sIm5hbWVzIjpbIkxpc3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidG9kb3MiLCJsaXN0TnVtYmVyIiwidGhpcyIsImdldExpc3ROdW1iZXIiLCJzZXRMaXN0TnVtYmVyIiwidmFsdWUiLCJnZXRUaXRsZSIsImdldFRvZG9zIiwic2V0VGl0bGUiLCJzZXRUb2RvcyIsImFkZE5ld0xpc3QiLCJ0aGVUb2RvIiwicHVzaCIsIlRvZG8iLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsInRvZG9OdW1iZXIiLCJnZXRUb2RvTnVtYmVyIiwic2V0VG9kb051bWJlciIsImdldElzQ29tcGxldGVkIiwiY2hhbmdlQ29tcGxldGVTdGF0dXMiLCJnZXREZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldERlc2NyaXB0aW9uIiwic2V0RHVlRGF0ZSIsInNldFByaW9yaXR5IiwibGlzdHMiLCJyZW1vdmVFeGlzdGluZ01hcmtlciIsImNvbnRhaW5lciIsImZpcnN0TGlzdCIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwibmV4dExpc3QiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjaGFuZ2VUb2RvSGVhZGVyIiwidG9kb0hlYWRlciIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50Iiwic2hvd0xpc3RzVG9kb3MiLCJhbGxUb2RvcyIsInRvZG8iLCJtYWtlTGlzdEFjdGl2ZSIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJlbGVtZW50IiwiaW5kZXgiLCJhbGxMaXN0IiwicmVtb3ZlQ2hpbGQiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ4IiwiZGVsZXRlUmVsYXRlZFRvZG8iLCJhbGxUb2RvIiwic3BsaWNlIiwicGFyc2VJbnQiLCJsaXN0IiwiYWxsVG9kb0luZGV4IiwiaSIsImxlbmd0aCIsImxpc3Rfbm8iLCJ0aGVET00iLCJ1cGRhdGVMaXN0c0FuZFRvZG9zIiwic2hvd1JlbGF0ZWRUb2RvcyIsImRlbGV0ZUVsZW1lbnQiLCJsYXN0RWxlbWVudENoaWxkIiwiY29uc29sZSIsImxvZyIsImxpc3RObyIsInF1ZXJ5U2VsZWN0b3IiLCJkZWZhdWx0TGlzdCIsIm5ld0xpc3RpbnB1dCIsImxpc3RGb3JtIiwibmV3TGlzdE1vZGFsIiwiYWRkVG9kbyIsIm5ld1RvZG9Nb2RhbCIsInRvZG9Gb3JtIiwidG9kb05hbWUiLCJkZWZhdWx0TGlzdERPTSIsIm9uY2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwib25zdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsIm5ld0xpc3QiLCJsaXN0T2JqZWN0IiwiaW5zZXJ0X2JlZm9yZSIsImFMaXN0IiwiY3JlYXRlRWxlbWVudCIsImFkZCIsImluc2VydEJlZm9yZSIsImxlZnQiLCJhcHBlbmRDaGlsZCIsInJpZ2h0IiwiaWNvbjEiLCJsaXN0VGl0bGUiLCJpY29uMiIsImljb24zIiwiaWNvbjQiLCJpY29uNSIsImFkZE5ld0xpc3RJbnRlcmZhY2UiLCJnZXRFbGVtZW50QnlJZCIsInJlc2V0Iiwib25yZXNldCIsIm5ld1RvZG8iLCJhVG9kbyIsImNvbGxhcHNlIiwiY29sbGFwc2VJbWciLCJpbnB1dDEiLCJ0aXRsZVRvZG8iLCJhZGROZXdUb2RvSW50ZXJmYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==