(()=>{"use strict";class t{constructor(t,e,i,s=0){this.title=t,this.todos=e,this.listNumber=i,this.isDefault=s}get getIsDefault(){return this.isDefault}set setIsDefault(t){this.isDefault=t}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTodos(t){this.todos=t}set setTitle(t){this.title=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,l,r,n){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.listNumber=l,this.completed=r,this.todoNumber=n}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){1===this.completed?this.completed=0:this.completed=1}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t,e,s){i.push(t);const l=document.createElement("div");l.classList.add("a-list"),l.setAttribute("list-number",`${t.getListNumber}`),e.insertBefore(l,s);const r=document.createElement("div");r.classList.add("left"),l.appendChild(r);const n=document.createElement("div");n.classList.add("right"),l.appendChild(n);const o=document.createElement("img");o.classList.add("icon"),1===t.getIsDefault?o.setAttribute("src","icons/weather-sunny.png"):o.setAttribute("src","icons/todo.png"),r.appendChild(o);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,r.appendChild(d);const u=document.createElement("img");u.classList.add("edit"),u.setAttribute("src","icons/pencil.png"),n.appendChild(u);const c=document.createElement("img");return c.classList.add("delete"),c.setAttribute("src","icons/trash.png"),n.appendChild(c),l}function l(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function r(t){let e=0;for(let s=0;s<i.length;s++)if(i[s].setListNumber=s,0!==i[s].getTodos.length){let l=0;const r=i[s].getListNumber;for(let n of i[s].getTodos){n.setListNumber=s,n.setTodoNumber=l;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${r}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${l}`),l++,e++}}}let n=[];function o(t){if(""===t)return"";let e=new Date(`${t}`).toDateString();return e.slice(4,10)+", "+e.slice(11)}function d(t,e){n.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),"none"===e.getPriority?i.classList.toggle("none"):"medium"===e.getPriority?i.classList.toggle("medium"):"high"===e.getPriority?i.classList.toggle("high"):"normal"===e.getPriority&&i.classList.toggle("normal"),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const l=document.createElement("div");l.classList.add("description"),l.textContent=e.getDescription,i.appendChild(l);const r=document.createElement("div");r.classList.add("collapse"),i.appendChild(r);const d=document.createElement("div");d.classList.add("left"),s.appendChild(d);const u=document.createElement("div");u.classList.add("right"),s.appendChild(u);const c=document.createElement("img");c.setAttribute("src","icons/unfold.png"),c.setAttribute("alt","collapse icon"),c.setAttribute("id","hide"),r.appendChild(c);const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("id","todo-checkbox"),a.setAttribute("name","todo-checkbox"),1===e.getIsCompleted&&(a.checked=!0),d.appendChild(a);const m=document.createElement("div");m.innerHTML=`<p class="tName"><strong>${e.getTitle}</strong></p>\n    <p class='tDate'>${o(e.getDueDate)}\n    </p>`,d.appendChild(m);const g=document.createElement("img");g.setAttribute("src","icons/pencil.png"),g.classList.add("edit"),u.appendChild(g);const h=document.createElement("img");return h.setAttribute("src","icons/trash.png"),h.classList.add("delete"),u.appendChild(h),i}function u(t,e,i){null===e&&(t.firstElementChild.textContent=i),t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function c(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function a(t,e){let i=0;for(let s of t){let t=s.getTitle,l=s.getDescription,r=s.dueDate,n=s.getPriority,o=s.getListNumber,d=s.getIsCompleted,u=s.getTodoNumber;localStorage.setItem(`list_${e}_todo_${i}`,`${t},${l},${r},${n},${o},${d},${u}`),i++}}function m(t,e){localStorage.clear();let i=0;localStorage.setItem("activeListNumber",e);for(let e of t){let t=e.getTitle,s=e.getListNumber;1===e.getIsDefault?localStorage.setItem(`list_${i}`,`${t},${s},1`):localStorage.setItem(`list_${i}`,`${t},${s}`),a(e.getTodos,i),i++}}let g="0";function h(t){var e;t.preventDefault(),i[parseInt(g)].setTitle=t.target.firstElementChild.value,t.target.previousElementSibling.textContent=t.target.firstElementChild.value,u(x,g,t.target.firstElementChild.value),(e=t.target.parentNode.parentNode).firstElementChild.removeChild(e.firstElementChild.lastElementChild),e.firstElementChild.lastElementChild.removeAttribute("id"),m(i,g)}function b(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");A.removeChild(t);const s=Array.from(document.querySelectorAll(".a-list"));let l=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let s of e)s.getAttribute("list-number")===i&&t.removeChild(s)}($,l,e),l=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,s){i.splice(parseInt(e),1);let l=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${l}`),l++;r(s)}(s,e,l),e===g&&function(t,e){0===i.length?u(x,null,"Add a List"):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),u(x,e,i[0].getTitle),c(t,"0"),g="0"):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),u(x,e,i[parseInt(e)-1].getTitle),c(t,""+(parseInt(e)-1)),g=""+(parseInt(e)-1))}(l,e),g=document.querySelector("#active-list").getAttribute("list-number")}m(i,g)}(this);else if("edit"===t.target.classList.value)(function(t){const e=t.firstElementChild.lastElementChild;e.setAttribute("id","hide");const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("maxlength","40"),i.required=!0,i.value=e.textContent;const s=document.createElement("form");return s.setAttribute("action","#"),s.classList.add("edit-list-form"),t.firstElementChild.appendChild(s),s.appendChild(i),s}(this)).onsubmit=h;else{l(A),this.setAttribute("id","active-list");let t=this.getAttribute("list-number");u(x,t,this.firstElementChild.lastElementChild.textContent),c(Array.from(document.querySelectorAll(".a-todo")),t),g=t,localStorage.removeItem("activeListNumber"),localStorage.setItem("activeListNumber",g)}}function p(t){!0===t.checked?t.checked=!1:t.checked=!0}function f(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),$.removeChild(this),r(Array.from(document.querySelectorAll(".all-todo .a-todo")))}else if("edit"===t.target.classList.value){const t=document.querySelector(".edit-todo-modal");t.removeAttribute("id");const e=function(t,e,i){let s=t.getAttribute("list-number"),l=t.getAttribute("todo-number"),r=i[parseInt(s)].getTodos[parseInt(l)],n=e.firstElementChild.nextElementSibling;n.firstElementChild.value=r.getTitle,n.firstElementChild.nextElementSibling.lastElementChild.value=r.getDueDate;const o=r.getPriority;let d=n.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild;return function(t,e){let i=e.firstElementChild;for(;;){if(i.getAttribute("value")===t){i.selected=!0;break}i=i.nextElementSibling}}(o,d),d.parentNode.nextElementSibling.value=r.getDescription,r}(this,t,i),s=t.lastElementChild;s.onsubmit=t=>{!function(t,e,s){e.preventDefault(),s.classList.remove(t.getPriority),t.setTitle=e.target.firstElementChild.value,t.setDueDate=e.target.firstElementChild.nextElementSibling.lastElementChild.value,t.setPriority=e.target.firstElementChild.nextElementSibling.nextElementSibling.lastElementChild.value,t.setDescription=e.target.lastElementChild.previousElementSibling.value,e.target.reset(),e.target.parentNode.setAttribute("id","hide"),function(t,e){e.firstElementChild.firstElementChild.lastElementChild.innerHTML=`<p class="tName">\n                  <strong>${t.getTitle}</strong>\n                </p>\n                <p class='tDate'>${o(t.getDueDate)}</p>`,e.firstElementChild.nextElementSibling.textContent=`${t.getDescription}`,e.classList.toggle(t.getPriority)}(t,s),m(i,g)}(e,t,this)},s.onreset=()=>{t.setAttribute("id","hide")}}else{"checkbox"===t.target.getAttribute("type")&&p(t.target);const e=this.getAttribute("list-number"),s=this.getAttribute("todo-number");i[parseInt(e)].getTodos[parseInt(s)].changeCompleteStatus(),p(this.firstElementChild.firstElementChild.firstElementChild)}m(i,g)}const A=document.querySelector(".all-list"),v=document.querySelector("#list-name"),E=document.querySelector(".list-form"),C=document.querySelector(".add-new-list"),S=document.querySelector(".new-list-modal"),y=document.querySelector(".add-todo"),L=document.querySelector(".new-todo-modal"),N=document.querySelector(".todo-form"),T=document.querySelector("#todo-name"),D=document.querySelector("#due-date"),I=document.querySelector("#priority"),q=document.querySelector("#description"),$=document.querySelector(".all-todo"),x=document.querySelector(".todo-header"),k=document.querySelector(".menu");if(localStorage.getItem("activeListNumber")){let l=function(){let i=[],s=[];for(let l in localStorage)if(l.includes("list")&&!l.includes("todo")){const e=localStorage.getItem(l).split(","),s=e[0],r=parseInt(e[1]);if(3===e.length){const e=new t(s,[],r,1);i.push(e)}else{const e=new t(s,[],r);i.push(e)}}else if(l.includes("todo")){const t=localStorage.getItem(l).split(","),i=t[0],r=t[1],n=t[2],o=t[3],d=parseInt(t[4]),u=parseInt(t[5]),c=parseInt(t[6]),a=new e(i,r,n,o,d,u,c);s.push(a)}let l=function(t){return t.sort(((t,e)=>t.getListNumber>e.getListNumber?1:-1))}(i);return function(t,e){for(let i of e)t[i.getListNumber].getTodos.push(i);for(let e of t){const t=e.getTodos.sort(((t,e)=>t.getTodoNumber>e.getTodoNumber?1:-1));e.setTodos=t}}(l,s),l}();g=localStorage.getItem("activeListNumber"),function(t){if(0===t.length)return;for(let e of t){s(e,A,S);for(let t of e.getTodos)d($,t)}const e=document.querySelector(`.all-list div[list-number="${g}"]`);null!==e&&e.setAttribute("id","active-list");const l=Array.from(document.querySelectorAll(".a-todo"));u(x,g,i[parseInt(g)].getTitle),c(l,g)}(l)}else{let e=new t("My Day",[],0,1);s(e,A,S),u(x,"0","My Day"),document.querySelector(`.all-list div[list-number="${e.getListNumber}"]`).setAttribute("id","active-list"),m(i,g)}const w=document.querySelectorAll(".all-list .a-list"),P=document.querySelectorAll(".all-todo .a-todo");y.onclick=t=>{L.removeAttribute("id")},C.addEventListener("click",(()=>{S.removeAttribute("id"),A.scrollTo(0,A.scrollHeight)})),E.onsubmit=function(e){e.preventDefault();let r=new t(v.value,[],i.length);l(A);const n=s(r,A,S);n.setAttribute("id","active-list");const o=Array.from(document.querySelectorAll(".a-todo"));u(x,r.getListNumber,r.getTitle),c(o,r.getListNumber.toString()),g=r.getListNumber.toString(),n.onclick=b,e.target.reset(),S.setAttribute("id","hide"),A.scrollTo(0,A.scrollHeight),m(i,g)},E.onreset=()=>{S.setAttribute("id","hide")},N.onsubmit=function(t){t.preventDefault();const s=parseInt(x.getAttribute("list-number")),l=i[parseInt(s)].getTodos.length;let r=new e(T.value,q.value,D.value,I.value,s,0,l);i[parseInt(s)].getTodos.push(r),d($,r).onclick=f,L.setAttribute("id","hide"),$.scrollTo(0,$.scrollHeight),t.target.reset(),m(i,g)},N.onreset=()=>{L.setAttribute("id","hide")},w.forEach((t=>{t.onclick=b})),P.forEach((t=>{t.onclick=f})),k.addEventListener("click",(function(t){const e=document.querySelector(".side-bar"),i=document.querySelector(".sidebar-content");i.classList.add("show-sidebar-content"),e.classList.add("show-sidebar"),window.onclick=t=>{t.target===e&&(e.classList.remove("show-sidebar"),i.classList.remove("show-sidebar-content"))}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RzdELEVBQVE4RCxjQUM1QjlFLEVBQUVJLE9BQU9zQyxRQUNUL0MsRUFBUzdELEVBQU84RCxFQUNsQixFQXdPQXVELEVBQVNOLFFBQVUsS0FDakJLLEVBQWExRyxhQUFhLEtBQU0sT0FBTyxFQUd6Q2lJLEVBQWVRLFNBQVMvRCxJQUN0QkEsRUFBS3lELFFBQVVsRSxDQUFjLElBRy9CaUUsRUFBWU8sU0FBUzdGLElBQ25CQSxFQUFLdUYsUUFBVTVDLENBQVUsSUFHM0JzQixFQUFLdUIsaUJBQWlCLFNBL0V0QixTQUF1QjVFLEdBQ3JCLE1BQU1rRixFQUFVOUksU0FBU2lGLGNBQWMsYUFDakM4RCxFQUFpQi9JLFNBQVNpRixjQUFjLG9CQUM5QzhELEVBQWU3SSxVQUFVQyxJQUFJLHdCQUM3QjJJLEVBQVE1SSxVQUFVQyxJQUFJLGdCQUN0QjZJLE9BQU9ULFFBQVczRSxJQUNaQSxFQUFFSSxTQUFXOEUsSUFDZkEsRUFBUTVJLFVBQVVtRyxPQUFPLGdCQUN6QjBDLEVBQWU3SSxVQUFVbUcsT0FBTyx3QkFDbEMsQ0FFSixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9saXN0LmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZUxpc3RJbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9tYW5hZ2VUb2RvSW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvc3RvcmFnZU1hbmFnZW1lbnQuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBMaXN0IHtcbiAgY29uc3RydWN0b3IodGl0bGUsIHRvZG9zLCBsaXN0TnVtYmVyLCBpc0RlZmF1bHQgPSAwKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMudG9kb3MgPSB0b2RvcztcbiAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgIHRoaXMuaXNEZWZhdWx0ID0gaXNEZWZhdWx0O1xuICB9XG5cbiAgZ2V0IGdldElzRGVmYXVsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0RlZmF1bHQ7XG4gIH1cblxuICBzZXQgc2V0SXNEZWZhdWx0KHZhbHVlKSB7XG4gICAgdGhpcy5pc0RlZmF1bHQgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBnZXRMaXN0TnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLmxpc3ROdW1iZXI7XG4gIH1cblxuICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgIHRoaXMubGlzdE51bWJlciA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGdldFRpdGxlKCkge1xuICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICB9XG5cbiAgZ2V0IGdldFRvZG9zKCkge1xuICAgIHJldHVybiB0aGlzLnRvZG9zO1xuICB9XG5cbiAgc2V0IHNldFRvZG9zKHZhbHVlKSB7XG4gICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICB9XG5cbiAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICB9XG5cbiAgYWRkTmV3TGlzdCh0aGVUb2RvKSB7XG4gICAgdGhpcy50b2Rvcy5wdXNoKHRoZVRvZG8pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvIHtcbiAgY29uc3RydWN0b3IoXG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgZHVlRGF0ZSxcbiAgICBwcmlvcml0eSxcbiAgICBsaXN0TnVtYmVyLFxuICAgIGNvbXBsZXRlZCxcbiAgICB0b2RvTnVtYmVyXG4gICkge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgdGhpcy5saXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICB0aGlzLnRvZG9OdW1iZXIgPSB0b2RvTnVtYmVyO1xuICB9XG5cbiAgZ2V0IGdldFRvZG9OdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9kb051bWJlcjtcbiAgfVxuXG4gIHNldCBzZXRUb2RvTnVtYmVyKHZhbHVlKSB7XG4gICAgdGhpcy50b2RvTnVtYmVyID0gdmFsdWU7XG4gIH1cblxuICBnZXQgZ2V0SXNDb21wbGV0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGxldGVkO1xuICB9XG5cbiAgY2hhbmdlQ29tcGxldGVTdGF0dXMoKSB7XG4gICAgaWYgKHRoaXMuY29tcGxldGVkID09PSAxKSB7XG4gICAgICB0aGlzLmNvbXBsZXRlZCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29tcGxldGVkID0gMTtcbiAgICB9XG4gIH1cblxuICBnZXQgZ2V0TGlzdE51bWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy5saXN0TnVtYmVyO1xuICB9XG5cbiAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBnZXRUaXRsZSgpIHtcbiAgICByZXR1cm4gdGhpcy50aXRsZTtcbiAgfVxuICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb247XG4gIH1cbiAgZ2V0IGdldER1ZURhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgfVxuICBnZXQgZ2V0UHJpb3JpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJpb3JpdHk7XG4gIH1cblxuICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gIH1cblxuICBzZXQgc2V0RGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gIH1cbiAgc2V0IHNldER1ZURhdGUodmFsdWUpIHtcbiAgICB0aGlzLmR1ZURhdGUgPSB2YWx1ZTtcbiAgfVxuICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICB0aGlzLnByaW9yaXR5ID0gdmFsdWU7XG4gIH1cbn1cbiIsImV4cG9ydCBsZXQgbGlzdHMgPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5ld0xpc3RJbnRlcmZhY2UobGlzdE9iamVjdCwgY29udGFpbmVyLCBpbnNlcnRfYmVmb3JlKSB7XG4gIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgY29uc3QgYUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBhTGlzdC5jbGFzc0xpc3QuYWRkKFwiYS1saXN0XCIpO1xuICBhTGlzdC5zZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiLCBgJHtsaXN0T2JqZWN0LmdldExpc3ROdW1iZXJ9YCk7XG4gIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYUxpc3QsIGluc2VydF9iZWZvcmUpO1xuXG4gIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBsZWZ0LmNsYXNzTGlzdC5hZGQoXCJsZWZ0XCIpO1xuICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHJpZ2h0LmNsYXNzTGlzdC5hZGQoXCJyaWdodFwiKTtcbiAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gIGNvbnN0IGljb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaWNvbjEuY2xhc3NMaXN0LmFkZChcImljb25cIik7XG4gIGlmIChsaXN0T2JqZWN0LmdldElzRGVmYXVsdCA9PT0gMSkge1xuICAgIGljb24xLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImljb25zL3dlYXRoZXItc3VubnkucG5nXCIpO1xuICB9IGVsc2Uge1xuICAgIGljb24xLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImljb25zL3RvZG8ucG5nXCIpO1xuICB9XG4gIGxlZnQuYXBwZW5kQ2hpbGQoaWNvbjEpO1xuXG4gIGNvbnN0IGxpc3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGxpc3RUaXRsZS5jbGFzc0xpc3QuYWRkKFwibGlzdC10aXRsZVwiKTtcbiAgbGlzdFRpdGxlLnRleHRDb250ZW50ID0gbGlzdE9iamVjdC5nZXRUaXRsZTtcbiAgbGVmdC5hcHBlbmRDaGlsZChsaXN0VGl0bGUpO1xuXG4gIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaWNvbjIuY2xhc3NMaXN0LmFkZChcImVkaXRcIik7XG4gIGljb24yLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImljb25zL3BlbmNpbC5wbmdcIik7XG4gIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGljb241LmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIik7XG4gIGljb241LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImljb25zL3RyYXNoLnBuZ1wiKTtcbiAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xuXG4gIHJldHVybiBhTGlzdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4aXN0aW5nTWFya2VyKGNvbnRhaW5lcikge1xuICBpZiAobGlzdHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gIGNvbnN0IGZpcnN0TGlzdCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgaWYgKGZpcnN0TGlzdC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSA9PT0gXCJhY3RpdmUtbGlzdFwiKSB7XG4gICAgZmlyc3RMaXN0LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xuICB9IGVsc2Uge1xuICAgIGxldCBuZXh0TGlzdCA9IGZpcnN0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAobmV4dExpc3QuZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IFwiYWN0aXZlLWxpc3RcIikge1xuICAgICAgICBuZXh0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBuZXh0TGlzdCA9IG5leHRMaXN0Lm5leHRFbGVtZW50U2libGluZztcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcykge1xuICBsZXQgYWxsVG9kb0luZGV4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0cy5sZW5ndGg7IGkrKykge1xuICAgIGxpc3RzW2ldLnNldExpc3ROdW1iZXIgPSBpO1xuICAgIGlmIChsaXN0c1tpXS5nZXRUb2Rvcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdG9kb19ubyA9IDA7XG4gICAgICBjb25zdCBsaXN0X25vID0gbGlzdHNbaV0uZ2V0TGlzdE51bWJlcjtcbiAgICAgIGZvciAobGV0IHggb2YgbGlzdHNbaV0uZ2V0VG9kb3MpIHtcbiAgICAgICAgeC5zZXRMaXN0TnVtYmVyID0gaTtcbiAgICAgICAgeC5zZXRUb2RvTnVtYmVyID0gdG9kb19ubztcbiAgICAgICAgbGV0IHRoZURPTSA9IGFsbFRvZG9zW2FsbFRvZG9JbmRleF07XG4gICAgICAgIHRoZURPTS5yZW1vdmVBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgICAgICAgdGhlRE9NLnNldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIsIGAke2xpc3Rfbm99YCk7XG4gICAgICAgIHRoZURPTS5yZW1vdmVBdHRyaWJ1dGUoXCJ0b2RvLW51bWJlclwiKTtcbiAgICAgICAgdGhlRE9NLnNldEF0dHJpYnV0ZShcInRvZG8tbnVtYmVyXCIsIGAke3RvZG9fbm99YCk7XG4gICAgICAgIHRvZG9fbm8rKztcbiAgICAgICAgYWxsVG9kb0luZGV4Kys7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgbGlzdE51bWJlciwgYWxsVG9kb3MpIHtcbiAgbGlzdHMuc3BsaWNlKHBhcnNlSW50KGxpc3ROdW1iZXIpLCAxKTtcbiAgLy8gIHVwZGF0ZSBkb21zXG4gIGxldCBpbmRleCA9IDA7XG5cbiAgZm9yIChsZXQgbGlzdCBvZiBjb250YWluZXIpIHtcbiAgICBsaXN0LnJlbW92ZUF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIpO1xuICAgIGxpc3Quc2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIiwgYCR7aW5kZXh9YCk7XG4gICAgaW5kZXgrKztcbiAgfVxuXG4gIC8vIHVwZGF0ZSBBcnJheSBhbmQgdG9kbyBET00nc1xuICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdExpc3QoZWxlbWVudCkge1xuICBjb25zdCBsaXN0VGl0bGUgPSBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQ7XG4gIGxpc3RUaXRsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG5cbiAgLy8gY3JlYXRlIGFuIGlucHV0IEVsZW1lbnRcbiAgY29uc3QgbGlzdE5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgbGlzdE5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgbGlzdE5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCI0MFwiKTtcbiAgbGlzdE5hbWVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG4gIGxpc3ROYW1lSW5wdXQudmFsdWUgPSBsaXN0VGl0bGUudGV4dENvbnRlbnQ7XG5cbiAgLy8gY3JlYXRlIHRoZSBmb3JtXG4gIGNvbnN0IGxpc3ROYW1lRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICBsaXN0TmFtZUZvcm0uc2V0QXR0cmlidXRlKFwiYWN0aW9uXCIsIFwiI1wiKTtcbiAgbGlzdE5hbWVGb3JtLmNsYXNzTGlzdC5hZGQoXCJlZGl0LWxpc3QtZm9ybVwiKTtcblxuICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZENoaWxkKGxpc3ROYW1lRm9ybSk7XG4gIGxpc3ROYW1lRm9ybS5hcHBlbmRDaGlsZChsaXN0TmFtZUlucHV0KTtcblxuICByZXR1cm4gbGlzdE5hbWVGb3JtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5kb0NoYW5nZShlbGVtZW50KSB7XG4gIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlQ2hpbGQoXG4gICAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkXG4gICk7XG4gIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbn1cbiIsImV4cG9ydCBsZXQgdG9kb3MgPSBbXTtcblxuZnVuY3Rpb24gbWFrZURhdGVTdHJpbmcoZGF0ZVRleHQpIHtcbiAgbGV0IGRhdGVTdHJpbmcgPSBcIlwiO1xuICBpZiAoZGF0ZVRleHQgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gZGF0ZVN0cmluZztcbiAgfVxuICBsZXQgYURhdGUgPSBuZXcgRGF0ZShgJHtkYXRlVGV4dH1gKS50b0RhdGVTdHJpbmcoKTtcbiAgbGV0IG5ld0RhdGUgPSBhRGF0ZS5zbGljZSg0LCAxMCkgKyBcIiwgXCIgKyBhRGF0ZS5zbGljZSgxMSk7XG4gIHJldHVybiBuZXdEYXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3VG9kb0ludGVyZmFjZShjb250YWluZXIsIHRoZVRvZG8pIHtcbiAgLy8gZGVzY3JpcHRpb25zIGdvZXMgaGVyZVxuXG4gIHRvZG9zLnB1c2godGhlVG9kbyk7XG5cbiAgY29uc3QgYVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBhVG9kby5jbGFzc0xpc3QuYWRkKFwiYS10b2RvXCIpO1xuICBhVG9kby5zZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiLCBgJHt0aGVUb2RvLmdldExpc3ROdW1iZXJ9YCk7XG4gIGFUb2RvLnNldEF0dHJpYnV0ZShcInRvZG8tbnVtYmVyXCIsIGAke3RoZVRvZG8uZ2V0VG9kb051bWJlcn1gKTtcbiAgaWYgKHRoZVRvZG8uZ2V0UHJpb3JpdHkgPT09IFwibm9uZVwiKSB7XG4gICAgYVRvZG8uY2xhc3NMaXN0LnRvZ2dsZShcIm5vbmVcIik7XG4gIH0gZWxzZSBpZiAodGhlVG9kby5nZXRQcmlvcml0eSA9PT0gXCJtZWRpdW1cIikge1xuICAgIGFUb2RvLmNsYXNzTGlzdC50b2dnbGUoXCJtZWRpdW1cIik7XG4gIH0gZWxzZSBpZiAodGhlVG9kby5nZXRQcmlvcml0eSA9PT0gXCJoaWdoXCIpIHtcbiAgICBhVG9kby5jbGFzc0xpc3QudG9nZ2xlKFwiaGlnaFwiKTtcbiAgfSBlbHNlIGlmICh0aGVUb2RvLmdldFByaW9yaXR5ID09PSBcIm5vcm1hbFwiKSB7XG4gICAgYVRvZG8uY2xhc3NMaXN0LnRvZ2dsZShcIm5vcm1hbFwiKTtcbiAgfVxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYVRvZG8pO1xuXG4gIGNvbnN0IGFMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgYUxpc3QuY2xhc3NMaXN0LmFkZChcImEtbGlzdFwiKTtcbiAgYVRvZG8uYXBwZW5kQ2hpbGQoYUxpc3QpO1xuXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcImRlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoZVRvZG8uZ2V0RGVzY3JpcHRpb247XG4gIGFUb2RvLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcblxuICBjb25zdCBjb2xsYXBzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbGxhcHNlLmNsYXNzTGlzdC5hZGQoXCJjb2xsYXBzZVwiKTtcbiAgYVRvZG8uYXBwZW5kQ2hpbGQoY29sbGFwc2UpO1xuXG4gIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBsZWZ0LmNsYXNzTGlzdC5hZGQoXCJsZWZ0XCIpO1xuICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIHJpZ2h0LmNsYXNzTGlzdC5hZGQoXCJyaWdodFwiKTtcbiAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gIGNvbnN0IGNvbGxhcHNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaWNvbnMvdW5mb2xkLnBuZ1wiKTtcbiAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIFwiY29sbGFwc2UgaWNvblwiKTtcbiAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWRlXCIpO1xuICBjb2xsYXBzZS5hcHBlbmRDaGlsZChjb2xsYXBzZUltZyk7XG5cbiAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBpbnB1dDEuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICBpbnB1dDEuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0b2RvLWNoZWNrYm94XCIpO1xuICBpbnB1dDEuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInRvZG8tY2hlY2tib3hcIik7XG4gIGlmICh0aGVUb2RvLmdldElzQ29tcGxldGVkID09PSAxKSB7XG4gICAgaW5wdXQxLmNoZWNrZWQgPSB0cnVlO1xuICB9XG4gIGxlZnQuYXBwZW5kQ2hpbGQoaW5wdXQxKTtcblxuICBjb25zdCB0aXRsZVRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICB0aXRsZVRvZG8uaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwidE5hbWVcIj48c3Ryb25nPiR7dGhlVG9kby5nZXRUaXRsZX08L3N0cm9uZz48L3A+XG4gICAgPHAgY2xhc3M9J3REYXRlJz4ke21ha2VEYXRlU3RyaW5nKHRoZVRvZG8uZ2V0RHVlRGF0ZSl9XG4gICAgPC9wPmA7XG4gIGxlZnQuYXBwZW5kQ2hpbGQodGl0bGVUb2RvKTtcblxuICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gIGljb24yLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImljb25zL3BlbmNpbC5wbmdcIik7XG4gIGljb24yLmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIpO1xuICByaWdodC5hcHBlbmRDaGlsZChpY29uMik7XG5cbiAgY29uc3QgaWNvbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICBpY29uNS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJpY29ucy90cmFzaC5wbmdcIik7XG4gIGljb241LmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIik7XG4gIHJpZ2h0LmFwcGVuZENoaWxkKGljb241KTtcblxuICByZXR1cm4gYVRvZG87XG59XG5cbi8vIGNoYW5nZSB0b2RvIGhlYWRlclxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGl0bGUpIHtcbiAgaWYgKGxpc3ROdW1iZXIgPT09IG51bGwpIHtcbiAgICB0b2RvSGVhZGVyLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gdGl0bGU7XG4gIH1cbiAgdG9kb0hlYWRlci5zZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiLCBgJHtsaXN0TnVtYmVyfWApO1xuICB0b2RvSGVhZGVyLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50ID0gdGl0bGU7XG59XG5cbi8vIHNob3cgYWxsIHRvZG9zIG9mIGEgcGFydGljdWxhciBsaXN0XG5leHBvcnQgZnVuY3Rpb24gc2hvd0xpc3RzVG9kb3MoYWxsVG9kb3MsIGxpc3ROdW1iZXIpIHtcbiAgaWYgKGFsbFRvZG9zID09PSBudWxsKSByZXR1cm47XG4gIGZvciAobGV0IHRvZG8gb2YgYWxsVG9kb3MpIHtcbiAgICBpZiAodG9kby5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKSA9PT0gbGlzdE51bWJlcikge1xuICAgICAgdG9kby5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9kby5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZWxhdGVkVG9kbyhjb250YWluZXIsIGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gIGZvciAobGV0IHRvZG8gb2YgYWxsVG9kb3MpIHtcbiAgICBjb25zdCBsaXN0X251bSA9IHRvZG8uZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gICAgaWYgKGxpc3RfbnVtID09PSBsaXN0TnVtYmVyKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQodG9kbyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldFByaW9yaXR5VmFsdWUoc2VsZWN0ZWRPbmUsIHByaW9yaXR5SW5wdXQpIHtcbiAgbGV0IGlucHV0ID0gcHJpb3JpdHlJbnB1dC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSA9PT0gc2VsZWN0ZWRPbmUpIHtcbiAgICAgIGlucHV0LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpbnB1dCA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZztcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdFRvZG8oZWxlbWVudCwgZWRpdE1vZGFsLCBsaXN0cykge1xuICBsZXQgbGlzdE51bWJlciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gIGxldCB0b2RvTnVtYmVyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0b2RvLW51bWJlclwiKTtcbiAgbGV0IHRoZVRvZG8gPSBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICBsZXQgZWRpdEZvcm0gPSBlZGl0TW9kYWwuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICBlZGl0Rm9ybS5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZSA9IHRoZVRvZG8uZ2V0VGl0bGU7XG4gIGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlID1cbiAgICB0aGVUb2RvLmdldER1ZURhdGU7XG4gIGNvbnN0IHNlbGVjdGVkT25lID0gdGhlVG9kby5nZXRQcmlvcml0eTtcbiAgbGV0IHByaW9yaXR5SW5wdXQgPVxuICAgIGVkaXRGb3JtLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgIC5sYXN0RWxlbWVudENoaWxkO1xuICBzZXRQcmlvcml0eVZhbHVlKHNlbGVjdGVkT25lLCBwcmlvcml0eUlucHV0KTtcbiAgcHJpb3JpdHlJbnB1dC5wYXJlbnROb2RlLm5leHRFbGVtZW50U2libGluZy52YWx1ZSA9IHRoZVRvZG8uZ2V0RGVzY3JpcHRpb247XG5cbiAgcmV0dXJuIHRoZVRvZG87XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pIHtcbiAgdG9kb0RPTS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZFxuICAubGFzdEVsZW1lbnRDaGlsZFxuICAuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwidE5hbWVcIj5cbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHt0aGVUb2RvLmdldFRpdGxlfTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz0ndERhdGUnPiR7bWFrZURhdGVTdHJpbmcodGhlVG9kby5nZXREdWVEYXRlKX08L3A+YDtcbiAgdG9kb0RPTS5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBgJHt0aGVUb2RvLmdldERlc2NyaXB0aW9ufWA7XG4gIHRvZG9ET00uY2xhc3NMaXN0LnRvZ2dsZSh0aGVUb2RvLmdldFByaW9yaXR5KTtcbn1cbiIsImltcG9ydCBMaXN0IGZyb20gXCIuL2xpc3RcIjtcbmltcG9ydCBUb2RvIGZyb20gXCIuL3RvZG9cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVUb2RvKGFuQXJyYXksIGwpIHtcbiAgbGV0IHQgPSAwO1xuICBmb3IgKGxldCB0b2RvIG9mIGFuQXJyYXkpIHtcbiAgICBsZXQgdGl0bGUgPSB0b2RvLmdldFRpdGxlO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9IHRvZG8uZ2V0RGVzY3JpcHRpb247XG4gICAgbGV0IGR1ZURhdGUgPSB0b2RvLmR1ZURhdGU7XG4gICAgbGV0IHByaW9yaXR5ID0gdG9kby5nZXRQcmlvcml0eTtcbiAgICBsZXQgbGlzdE51bWJlciA9IHRvZG8uZ2V0TGlzdE51bWJlcjtcbiAgICBsZXQgY29tcGxldGVkID0gdG9kby5nZXRJc0NvbXBsZXRlZDtcbiAgICBsZXQgdG9kb051bWJlciA9IHRvZG8uZ2V0VG9kb051bWJlcjtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgIGBsaXN0XyR7bH1fdG9kb18ke3R9YCxcbiAgICAgIGAke3RpdGxlfSwke2Rlc2NyaXB0aW9ufSwke2R1ZURhdGV9LCR7cHJpb3JpdHl9LCR7bGlzdE51bWJlcn0sJHtjb21wbGV0ZWR9LCR7dG9kb051bWJlcn1gXG4gICAgKTtcbiAgICB0Kys7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKSB7XG4gIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICBsZXQgbCA9IDA7XG5cbiAgLy8gc2F2ZSBsaXN0c1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImFjdGl2ZUxpc3ROdW1iZXJcIiwgYWN0aXZlTGlzdE51bWJlcik7XG4gIGZvciAobGV0IGVsZW0gb2YgbGlzdHMpIHtcbiAgICBsZXQgbGlzdFRpdGxlID0gZWxlbS5nZXRUaXRsZTtcbiAgICBsZXQgbGlzdE51bWJlciA9IGVsZW0uZ2V0TGlzdE51bWJlcjtcbiAgICBpZiAoZWxlbS5nZXRJc0RlZmF1bHQgPT09IDEpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBsaXN0XyR7bH1gLCBgJHtsaXN0VGl0bGV9LCR7bGlzdE51bWJlcn0sMWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbGlzdF8ke2x9YCwgYCR7bGlzdFRpdGxlfSwke2xpc3ROdW1iZXJ9YCk7XG4gICAgfVxuICAgIHNhdmVUb2RvKGVsZW0uZ2V0VG9kb3MsIGwpO1xuICAgIGwrKztcbiAgfVxufVxuXG5mdW5jdGlvbiBzb3J0QXJyYXlzKGFycmF5TGlzdHMpIHtcbiAgY29uc3QgbmV3TGlzdHMgPSBhcnJheUxpc3RzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5nZXRMaXN0TnVtYmVyID4gYi5nZXRMaXN0TnVtYmVyKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG5ld0xpc3RzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRUb2Rvc1RvTGlzdHMoZmluYWxBcnJheSwgYXJyYXlUb2Rvcykge1xuICBmb3IgKGxldCB0b2RvIG9mIGFycmF5VG9kb3MpIHtcbiAgICBmaW5hbEFycmF5W3RvZG8uZ2V0TGlzdE51bWJlcl0uZ2V0VG9kb3MucHVzaCh0b2RvKTtcbiAgfVxuICAvLyBzb3J0IHRoZSB0b2Rvc1xuICBmb3IgKGxldCBsaXN0IG9mIGZpbmFsQXJyYXkpIHtcbiAgICBjb25zdCBuZXdUb2RvID0gbGlzdC5nZXRUb2Rvcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYS5nZXRUb2RvTnVtYmVyID4gYi5nZXRUb2RvTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxpc3Quc2V0VG9kb3MgPSBuZXdUb2RvO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRGF0YSgpIHtcbiAgbGV0IGFycmF5TGlzdHMgPSBbXTtcbiAgbGV0IGFycmF5VG9kb3MgPSBbXTtcbiAgZm9yIChsZXQgZWxlbSBpbiBsb2NhbFN0b3JhZ2UpIHtcbiAgICBpZiAoZWxlbS5pbmNsdWRlcyhcImxpc3RcIikgJiYgIWVsZW0uaW5jbHVkZXMoXCJ0b2RvXCIpKSB7XG4gICAgICBjb25zdCBsaXN0RGV0YWlscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pLnNwbGl0KFwiLFwiKTtcbiAgICAgIGNvbnN0IHRpdGxlID0gbGlzdERldGFpbHNbMF07XG4gICAgICBjb25zdCBsaXN0TnVtYmVyID0gcGFyc2VJbnQobGlzdERldGFpbHNbMV0pO1xuICAgICAgaWYgKGxpc3REZXRhaWxzLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBjb25zdCBuZXdMaXN0ID0gbmV3IExpc3QodGl0bGUsIFtdLCBsaXN0TnVtYmVyLCAxKTtcbiAgICAgICAgYXJyYXlMaXN0cy5wdXNoKG5ld0xpc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3TGlzdCA9IG5ldyBMaXN0KHRpdGxlLCBbXSwgbGlzdE51bWJlcik7XG4gICAgICAgIGFycmF5TGlzdHMucHVzaChuZXdMaXN0KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsZW0uaW5jbHVkZXMoXCJ0b2RvXCIpKSB7XG4gICAgICBjb25zdCB0b2RvRGV0YWlscyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGVsZW0pLnNwbGl0KFwiLFwiKTtcbiAgICAgIGNvbnN0IHRpdGxlID0gdG9kb0RldGFpbHNbMF07XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRvZG9EZXRhaWxzWzFdO1xuICAgICAgY29uc3QgZHVlRGF0ZSA9IHRvZG9EZXRhaWxzWzJdO1xuICAgICAgY29uc3QgcHJpb3JpdHkgPSB0b2RvRGV0YWlsc1szXTtcbiAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s0XSk7XG4gICAgICBjb25zdCBjb21wbGV0ZWQgPSBwYXJzZUludCh0b2RvRGV0YWlsc1s1XSk7XG4gICAgICBjb25zdCB0b2RvTnVtYmVyID0gcGFyc2VJbnQodG9kb0RldGFpbHNbNl0pO1xuICAgICAgY29uc3QgbmV3VG9kbyA9IG5ldyBUb2RvKFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIGR1ZURhdGUsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICBsaXN0TnVtYmVyLFxuICAgICAgICBjb21wbGV0ZWQsXG4gICAgICAgIHRvZG9OdW1iZXJcbiAgICAgICk7XG4gICAgICBhcnJheVRvZG9zLnB1c2gobmV3VG9kbyk7XG4gICAgfVxuICB9XG4gIGxldCBmaW5hbEFycmF5ID0gc29ydEFycmF5cyhhcnJheUxpc3RzKTtcbiAgaW5zZXJ0VG9kb3NUb0xpc3RzKGZpbmFsQXJyYXksIGFycmF5VG9kb3MpO1xuICByZXR1cm4gZmluYWxBcnJheTtcbn1cbiIsImltcG9ydCBMaXN0IGZyb20gXCIuL2xpc3RcIjtcbmltcG9ydCBUb2RvIGZyb20gXCIuL3RvZG9cIjtcbmltcG9ydCB7XG4gIGxpc3RzLFxuICBhZGROZXdMaXN0SW50ZXJmYWNlLFxuICByZW1vdmVFeGlzdGluZ01hcmtlcixcbiAgdXBkYXRlTGlzdHNBbmRUb2RvcyxcbiAgdXBkYXRlQXJyYXlBbmRUb2RvLFxuICBlZGl0TGlzdCxcbiAgdW5kb0NoYW5nZSxcbn0gZnJvbSBcIi4vbWFuYWdlTGlzdEludGVyZmFjZVwiO1xuaW1wb3J0IHtcbiAgYWRkTmV3VG9kb0ludGVyZmFjZSxcbiAgY2hhbmdlVG9kb0hlYWRlcixcbiAgc2hvd0xpc3RzVG9kb3MsXG4gIGRlbGV0ZVJlbGF0ZWRUb2RvLFxuICBlZGl0VG9kbyxcbiAgdXBkYXRlVG9kb0RPTSxcbn0gZnJvbSBcIi4vbWFuYWdlVG9kb0ludGVyZmFjZVwiO1xuaW1wb3J0IHsgc2F2ZURhdGEsIGxvYWREYXRhIH0gZnJvbSBcIi4vc3RvcmFnZU1hbmFnZW1lbnRcIjtcblxubGV0IGFjdGl2ZUxpc3ROdW1iZXIgPSBcIjBcIjtcblxuZnVuY3Rpb24gYWRkTGlzdChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gbWFuYWdlIEFycmF5IG9mIGxpc3RzXG4gIGxldCBuZXdMaXN0ID0gbmV3IExpc3QobmV3TGlzdGlucHV0LnZhbHVlLCBbXSwgbGlzdHMubGVuZ3RoKTtcbiAgcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gIGNvbnN0IG5ld0xpc3RET00gPSBhZGROZXdMaXN0SW50ZXJmYWNlKG5ld0xpc3QsIGFsbExpc3QsIG5ld0xpc3RNb2RhbCk7XG4gIG5ld0xpc3RET00uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhY3RpdmUtbGlzdFwiKTtcbiAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYS10b2RvXCIpKTtcblxuICAvLyBtYW5hZ2UgdG9kbyBpbnRlcmZhY2VcbiAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBuZXdMaXN0LmdldExpc3ROdW1iZXIsIG5ld0xpc3QuZ2V0VGl0bGUpO1xuICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbmV3TGlzdC5nZXRMaXN0TnVtYmVyLnRvU3RyaW5nKCkpO1xuICBhY3RpdmVMaXN0TnVtYmVyID0gbmV3TGlzdC5nZXRMaXN0TnVtYmVyLnRvU3RyaW5nKCk7XG4gIG5ld0xpc3RET00ub25jbGljayA9IG1ha2VMaXN0QWN0aXZlO1xuICBlLnRhcmdldC5yZXNldCgpO1xuICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWRlXCIpO1xuICBhbGxMaXN0LnNjcm9sbFRvKDAsIGFsbExpc3Quc2Nyb2xsSGVpZ2h0KTtcbiAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5mdW5jdGlvbiBhZGRfYV9Ub2RvKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyBtYW5hZ2UgQXJyYXkgb2YgbGlzdHNcbiAgY29uc3QgbGlzdE51bWJlciA9IHBhcnNlSW50KHRvZG9IZWFkZXIuZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIikpO1xuICBjb25zdCB0b2RvTnVtYmVyID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLmxlbmd0aDtcbiAgbGV0IG5ld1RvZG8gPSBuZXcgVG9kbyhcbiAgICB0b2RvTmFtZS52YWx1ZSxcbiAgICBkZXNjcmlwdGlvbi52YWx1ZSxcbiAgICBkdWVEYXRlLnZhbHVlLFxuICAgIHByaW9yaXR5LnZhbHVlLFxuICAgIGxpc3ROdW1iZXIsXG4gICAgMCxcbiAgICB0b2RvTnVtYmVyXG4gICk7XG4gIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5wdXNoKG5ld1RvZG8pO1xuXG4gIC8vIGJyaW5nIHRoZSB0b2RvIGludGVyZmFjZVxuICBjb25zdCBuZXdUb2RvRE9NID0gYWRkTmV3VG9kb0ludGVyZmFjZShhbGxUb2RvLCBuZXdUb2RvKTtcbiAgbmV3VG9kb0RPTS5vbmNsaWNrID0gbW9kaWZ5VG9kbztcblxuICAvLyBoaWRlIG1vZGFsXG4gIG5ld1RvZG9Nb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG4gIGFsbFRvZG8uc2Nyb2xsVG8oMCwgYWxsVG9kby5zY3JvbGxIZWlnaHQpO1xuICBlLnRhcmdldC5yZXNldCgpO1xuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIHNhdmVFZGl0ZWRMaXN0KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBsZXQgdGhlTGlzdCA9IGxpc3RzW3BhcnNlSW50KGFjdGl2ZUxpc3ROdW1iZXIpXTtcbiAgdGhlTGlzdC5zZXRUaXRsZSA9IGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlO1xuICBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID1cbiAgICBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgbGV0IGxpc3ROdW1iZXIgPSBhY3RpdmVMaXN0TnVtYmVyO1xuICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3ROdW1iZXIsIGUudGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLnZhbHVlKTtcbiAgdW5kb0NoYW5nZShlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUpO1xuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIG1ha2VMaXN0QWN0aXZlKGUpIHtcbiAgLy8gaGFuZGxlIGRlbGV0ZSwgdXAsIGRvd24sIGNvbXBsZXRlXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09IFwiZGVsZXRlXCIpIHtcbiAgICBkZWxldGVFbGVtZW50KHRoaXMpO1xuICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXCJlZGl0XCIpIHtcbiAgICBjb25zdCBsaXN0TmFtZUZvcm0gPSBlZGl0TGlzdCh0aGlzKTtcbiAgICBsaXN0TmFtZUZvcm0ub25zdWJtaXQgPSBzYXZlRWRpdGVkTGlzdDtcbiAgfSBlbHNlIHtcbiAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWN0aXZlLWxpc3RcIik7XG5cbiAgICAvLyBnZXQgdGhlIGxpc3RPYmplY3RcbiAgICBsZXQgbGlzdE51bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gICAgY2hhbmdlVG9kb0hlYWRlcihcbiAgICAgIHRvZG9IZWFkZXIsXG4gICAgICBsaXN0TnVtYmVyLFxuICAgICAgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50XG4gICAgKTtcbiAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hLXRvZG9cIikpO1xuICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gbGlzdE51bWJlcjtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImFjdGl2ZUxpc3ROdW1iZXJcIik7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhY3RpdmVMaXN0TnVtYmVyXCIsIGFjdGl2ZUxpc3ROdW1iZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNob3dSZWxhdGVkVG9kb3MoeCwgbGlzdE5vKSB7XG4gIGlmIChsaXN0cy5sZW5ndGggPT09IDApIHtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIG51bGwsIFwiQWRkIGEgTGlzdFwiKTtcbiAgfSBlbHNlIGlmIChsaXN0Tm8gPT09IGAwYCkge1xuICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiMFwiXScpO1xuICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhY3RpdmUtbGlzdFwiKTtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbMF0uZ2V0VGl0bGUpO1xuICAgIHNob3dMaXN0c1RvZG9zKHgsIGAwYCk7XG4gICAgYWN0aXZlTGlzdE51bWJlciA9IFwiMFwiO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke3BhcnNlSW50KGxpc3RObykgLSAxfVwiXWBcbiAgICApO1xuICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhY3RpdmUtbGlzdFwiKTtcbiAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbcGFyc2VJbnQobGlzdE5vKSAtIDFdLmdldFRpdGxlKTtcbiAgICBzaG93TGlzdHNUb2Rvcyh4LCBgJHtwYXJzZUludChsaXN0Tm8pIC0gMX1gKTtcbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gYCR7cGFyc2VJbnQobGlzdE5vKSAtIDF9YDtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LnZhbHVlID09PSBcImEtbGlzdFwiKSB7XG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImxpc3QtbnVtYmVyXCIpO1xuICAgIC8vIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgIGFsbExpc3QucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgY29uc3QgY29udGFpbmVyID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmEtbGlzdFwiKSk7XG4gICAgbGV0IHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWxsLXRvZG8gLmEtdG9kb1wiKSk7XG4gICAgZGVsZXRlUmVsYXRlZFRvZG8oYWxsVG9kbywgeCwgaW5kZXgpO1xuICAgIHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWxsLXRvZG8gLmEtdG9kb1wiKSk7XG4gICAgdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGluZGV4LCB4KTtcbiAgICBpZiAoaW5kZXggPT09IGFjdGl2ZUxpc3ROdW1iZXIpIHtcbiAgICAgIHNob3dSZWxhdGVkVG9kb3MoeCwgaW5kZXgpO1xuICAgIH1cbiAgICBhY3RpdmVMaXN0TnVtYmVyID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2FjdGl2ZS1saXN0XCIpXG4gICAgICAuZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gIH1cbiAgc2F2ZURhdGEobGlzdHMsIGFjdGl2ZUxpc3ROdW1iZXIpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VDaGVjayhlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBlbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURhdGFzKHRoZVRvZG8sIGUsIHRvZG9ET00pIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB0b2RvRE9NLmNsYXNzTGlzdC5yZW1vdmUodGhlVG9kby5nZXRQcmlvcml0eSk7XG4gIHRoZVRvZG8uc2V0VGl0bGUgPSBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgdGhlVG9kby5zZXREdWVEYXRlID1cbiAgICBlLnRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcubGFzdEVsZW1lbnRDaGlsZC52YWx1ZTtcbiAgdGhlVG9kby5zZXRQcmlvcml0eSA9XG4gICAgZS50YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLm5leHRFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLnZhbHVlO1xuICB0aGVUb2RvLnNldERlc2NyaXB0aW9uID1cbiAgICBlLnRhcmdldC5sYXN0RWxlbWVudENoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudmFsdWU7XG4gIGUudGFyZ2V0LnJlc2V0KCk7XG4gIGUudGFyZ2V0LnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWRlXCIpO1xuICB1cGRhdGVUb2RvRE9NKHRoZVRvZG8sIHRvZG9ET00pO1xuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIG1vZGlmeVRvZG8oZSkge1xuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImRlbGV0ZVwiKSB7XG4gICAgY29uc3QgbGlzdE51bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKFwibGlzdC1udW1iZXJcIik7XG4gICAgY29uc3QgdG9kb051bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKFwidG9kby1udW1iZXJcIik7XG5cbiAgICAvLyBkZWxldGUgdG9kbyBmcm9tIHRoZSBsaXN0cyBBcnJheSBhbmQgdGhlIGRvbVxuICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5zcGxpY2UocGFyc2VJbnQodG9kb051bWJlciksIDEpO1xuICAgIGFsbFRvZG8ucmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICAvLyB1cGRhdGUgdG9kbyBhcnJheVxuICAgIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFsbC10b2RvIC5hLXRvZG9cIikpO1xuICAgIHVwZGF0ZUFycmF5QW5kVG9kbyhhbGxUb2Rvcyk7XG4gIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LnZhbHVlID09PSBcImVkaXRcIikge1xuICAgIGNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC10b2RvLW1vZGFsXCIpO1xuICAgIGVkaXRNb2RhbC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICBjb25zdCB0aGVUb2RvID0gZWRpdFRvZG8odGhpcywgZWRpdE1vZGFsLCBsaXN0cyk7XG4gICAgY29uc3QgZWRpdEZvcm0gPSBlZGl0TW9kYWwubGFzdEVsZW1lbnRDaGlsZDtcbiAgICBlZGl0Rm9ybS5vbnN1Ym1pdCA9IChlKSA9PiB7XG4gICAgICB1cGRhdGVEYXRhcyh0aGVUb2RvLCBlLCB0aGlzKTtcbiAgICB9O1xuICAgIGVkaXRGb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gICAgICBlZGl0TW9kYWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWRlXCIpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgY2hhbmdlQ2hlY2soZS50YXJnZXQpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0TnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJsaXN0LW51bWJlclwiKTtcbiAgICBjb25zdCB0b2RvTnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0b2RvLW51bWJlclwiKTtcbiAgICBsZXQgdGhlTGlzdCA9IGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXTtcbiAgICBsZXQgdGhlVG9kbyA9IHRoZUxpc3QuZ2V0VG9kb3NbcGFyc2VJbnQodG9kb051bWJlcildO1xuICAgIHRoZVRvZG8uY2hhbmdlQ29tcGxldGVTdGF0dXMoKTtcbiAgICBjaGFuZ2VDaGVjayh0aGlzLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgfVxuICBzYXZlRGF0YShsaXN0cywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIGxvYWRQYWdlKGFuQXJyYXkpIHtcbiAgaWYgKGFuQXJyYXkubGVuZ3RoID09PSAwKSByZXR1cm47XG4gIGZvciAobGV0IGxpc3Qgb2YgYW5BcnJheSkge1xuICAgIGFkZE5ld0xpc3RJbnRlcmZhY2UobGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsKTtcbiAgICBmb3IgKGxldCB0b2RvIG9mIGxpc3QuZ2V0VG9kb3MpIHtcbiAgICAgIGFkZE5ld1RvZG9JbnRlcmZhY2UoYWxsVG9kbywgdG9kbyk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIGAuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiJHthY3RpdmVMaXN0TnVtYmVyfVwiXWBcbiAgKTtcbiAgLy8gcmVtb3ZlRXhpc3RpbmdNYXJrZXIoYWxsTGlzdCk7XG4gIGlmIChhY3RpdmVMaXN0ICE9PSBudWxsKSB7XG4gICAgYWN0aXZlTGlzdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFjdGl2ZS1saXN0XCIpO1xuICB9XG4gIGNvbnN0IGFsbFRvZG9zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmEtdG9kb1wiKSk7XG4gIGNoYW5nZVRvZG9IZWFkZXIoXG4gICAgdG9kb0hlYWRlcixcbiAgICBhY3RpdmVMaXN0TnVtYmVyLFxuICAgIGxpc3RzW3BhcnNlSW50KGFjdGl2ZUxpc3ROdW1iZXIpXS5nZXRUaXRsZVxuICApO1xuICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgYWN0aXZlTGlzdE51bWJlcik7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVNpZGVCYXIoZSkge1xuICBjb25zdCBzaWRlQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGUtYmFyJyk7XG4gIGNvbnN0IHNpZGViYXJDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXItY29udGVudCcpXG4gIHNpZGViYXJDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3ctc2lkZWJhci1jb250ZW50JylcbiAgc2lkZUJhci5jbGFzc0xpc3QuYWRkKCdzaG93LXNpZGViYXInKTtcbiAgd2luZG93Lm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gc2lkZUJhcikge1xuICAgICAgc2lkZUJhci5jbGFzc0xpc3QucmVtb3ZlKCdzaG93LXNpZGViYXInKTtcbiAgICAgIHNpZGViYXJDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctc2lkZWJhci1jb250ZW50JylcbiAgICB9XG4gIH1cbn1cblxuLy8gIyMjIyMjIyMjIyMjIyMgTUFJTiBGVU5DVElPTiAjIyMjIyMjIyMjIyMjIyMjI1xuXG4vLyBBbGwgZ2xvYmFsIHZhcmlhYmxlcyBhbmQgZXZlbnRMaXN0ZW5lcnNcbmNvbnN0IGFsbExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFsbC1saXN0XCIpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaXN0LW5hbWVcIik7XG5jb25zdCBsaXN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGlzdC1mb3JtXCIpO1xuY29uc3QgYWRkTmV3TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLW5ldy1saXN0XCIpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctbGlzdC1tb2RhbFwiKTtcbmNvbnN0IGFkZFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10b2RvXCIpO1xuY29uc3QgbmV3VG9kb01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctdG9kby1tb2RhbFwiKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWZvcm1cIik7XG5jb25zdCB0b2RvTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9kby1uYW1lXCIpO1xuY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZHVlLWRhdGVcIik7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHlcIik7XG5jb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIik7XG5jb25zdCBhbGxUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtdG9kb1wiKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8taGVhZGVyXCIpO1xuY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51Jyk7XG5cbi8vIGxvYWRpbmcgdGhlIGV4aXN0aW5nIGRhdGFcbmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFjdGl2ZUxpc3ROdW1iZXJcIikpIHtcbiAgbGV0IGFuQXJyYXkgPSBsb2FkRGF0YSgpO1xuICBhY3RpdmVMaXN0TnVtYmVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJhY3RpdmVMaXN0TnVtYmVyXCIpO1xuICBsb2FkUGFnZShhbkFycmF5KTtcbn0gZWxzZSB7XG4gIC8vIEFkZGluZyBkZWZhdWx0IGxpc3RcbiAgbGV0IGRlZmF1bHRMaXN0ID0gbmV3IExpc3QoXCJNeSBEYXlcIiwgW10sIDAsIDEpO1xuICBhZGROZXdMaXN0SW50ZXJmYWNlKGRlZmF1bHRMaXN0LCBhbGxMaXN0LCBuZXdMaXN0TW9kYWwpO1xuICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIFwiMFwiLCBcIk15IERheVwiKTtcbiAgY29uc3QgYWN0aXZlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYC5hbGwtbGlzdCBkaXZbbGlzdC1udW1iZXI9XCIke2RlZmF1bHRMaXN0LmdldExpc3ROdW1iZXJ9XCJdYFxuICApO1xuICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWN0aXZlLWxpc3RcIik7XG4gIHNhdmVEYXRhKGxpc3RzLCBhY3RpdmVMaXN0TnVtYmVyKTtcbn1cblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFsbC1saXN0IC5hLWxpc3RcIik7XG5jb25zdCBhbGxUb2RvRE9NUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWxsLXRvZG8gLmEtdG9kb1wiKTtcblxuYWRkVG9kby5vbmNsaWNrID0gKGUpID0+IHtcbiAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIpO1xufTtcblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gIGFsbExpc3Quc2Nyb2xsVG8oMCwgYWxsTGlzdC5zY3JvbGxIZWlnaHQpO1xufSk7XG5cbmxpc3RGb3JtLm9uc3VibWl0ID0gYWRkTGlzdDtcbmxpc3RGb3JtLm9ucmVzZXQgPSAoKSA9PiB7XG4gIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImhpZGVcIik7XG59O1xuXG50b2RvRm9ybS5vbnN1Ym1pdCA9IGFkZF9hX1RvZG87XG50b2RvRm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJoaWRlXCIpO1xufTtcblxuZGVmYXVsdExpc3RET00uZm9yRWFjaCgobGlzdCkgPT4ge1xuICBsaXN0Lm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTtcbn0pO1xuXG5hbGxUb2RvRE9NUy5mb3JFYWNoKCh0b2RvKSA9PiB7XG4gIHRvZG8ub25jbGljayA9IG1vZGlmeVRvZG87XG59KTtcblxubWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNpZGVCYXIpO1xuIl0sIm5hbWVzIjpbIkxpc3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidG9kb3MiLCJsaXN0TnVtYmVyIiwiaXNEZWZhdWx0IiwidGhpcyIsImdldElzRGVmYXVsdCIsInNldElzRGVmYXVsdCIsInZhbHVlIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJnZXRUaXRsZSIsImdldFRvZG9zIiwic2V0VG9kb3MiLCJzZXRUaXRsZSIsImFkZE5ld0xpc3QiLCJ0aGVUb2RvIiwicHVzaCIsIlRvZG8iLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsInRvZG9OdW1iZXIiLCJnZXRUb2RvTnVtYmVyIiwic2V0VG9kb051bWJlciIsImdldElzQ29tcGxldGVkIiwiY2hhbmdlQ29tcGxldGVTdGF0dXMiLCJnZXREZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJnZXRQcmlvcml0eSIsInNldERlc2NyaXB0aW9uIiwic2V0RHVlRGF0ZSIsInNldFByaW9yaXR5IiwibGlzdHMiLCJhZGROZXdMaXN0SW50ZXJmYWNlIiwibGlzdE9iamVjdCIsImNvbnRhaW5lciIsImluc2VydF9iZWZvcmUiLCJhTGlzdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImluc2VydEJlZm9yZSIsImxlZnQiLCJhcHBlbmRDaGlsZCIsInJpZ2h0IiwiaWNvbjEiLCJsaXN0VGl0bGUiLCJ0ZXh0Q29udGVudCIsImljb24yIiwiaWNvbjUiLCJyZW1vdmVFeGlzdGluZ01hcmtlciIsImxlbmd0aCIsImZpcnN0TGlzdCIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwibmV4dExpc3QiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ1cGRhdGVBcnJheUFuZFRvZG8iLCJhbGxUb2RvcyIsImFsbFRvZG9JbmRleCIsImkiLCJ0b2RvX25vIiwibGlzdF9ubyIsIngiLCJ0aGVET00iLCJtYWtlRGF0ZVN0cmluZyIsImRhdGVUZXh0IiwiYURhdGUiLCJEYXRlIiwidG9EYXRlU3RyaW5nIiwic2xpY2UiLCJhZGROZXdUb2RvSW50ZXJmYWNlIiwiYVRvZG8iLCJ0b2dnbGUiLCJjb2xsYXBzZSIsImNvbGxhcHNlSW1nIiwiaW5wdXQxIiwiY2hlY2tlZCIsInRpdGxlVG9kbyIsImlubmVySFRNTCIsImNoYW5nZVRvZG9IZWFkZXIiLCJ0b2RvSGVhZGVyIiwic2hvd0xpc3RzVG9kb3MiLCJ0b2RvIiwic2F2ZVRvZG8iLCJhbkFycmF5IiwibCIsInQiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2F2ZURhdGEiLCJhY3RpdmVMaXN0TnVtYmVyIiwiY2xlYXIiLCJlbGVtIiwic2F2ZUVkaXRlZExpc3QiLCJlIiwiZWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwicGFyc2VJbnQiLCJ0YXJnZXQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwibGFzdEVsZW1lbnRDaGlsZCIsIm1ha2VMaXN0QWN0aXZlIiwiaW5kZXgiLCJhbGxMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImRlbGV0ZVJlbGF0ZWRUb2RvIiwiYWxsVG9kbyIsInNwbGljZSIsImxpc3QiLCJ1cGRhdGVMaXN0c0FuZFRvZG9zIiwibGlzdE5vIiwicXVlcnlTZWxlY3RvciIsInNob3dSZWxhdGVkVG9kb3MiLCJkZWxldGVFbGVtZW50IiwibGlzdE5hbWVJbnB1dCIsInJlcXVpcmVkIiwibGlzdE5hbWVGb3JtIiwiZWRpdExpc3QiLCJvbnN1Ym1pdCIsInJlbW92ZUl0ZW0iLCJjaGFuZ2VDaGVjayIsIm1vZGlmeVRvZG8iLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybSIsInNlbGVjdGVkT25lIiwicHJpb3JpdHlJbnB1dCIsImlucHV0Iiwic2VsZWN0ZWQiLCJzZXRQcmlvcml0eVZhbHVlIiwiZWRpdFRvZG8iLCJ0b2RvRE9NIiwicmVtb3ZlIiwicmVzZXQiLCJ1cGRhdGVUb2RvRE9NIiwidXBkYXRlRGF0YXMiLCJvbnJlc2V0IiwibmV3TGlzdGlucHV0IiwibGlzdEZvcm0iLCJuZXdMaXN0TW9kYWwiLCJhZGRUb2RvIiwibmV3VG9kb01vZGFsIiwidG9kb0Zvcm0iLCJ0b2RvTmFtZSIsIm1lbnUiLCJnZXRJdGVtIiwiYXJyYXlMaXN0cyIsImFycmF5VG9kb3MiLCJpbmNsdWRlcyIsImxpc3REZXRhaWxzIiwic3BsaXQiLCJuZXdMaXN0IiwidG9kb0RldGFpbHMiLCJuZXdUb2RvIiwiZmluYWxBcnJheSIsInNvcnQiLCJhIiwiYiIsInNvcnRBcnJheXMiLCJpbnNlcnRUb2Rvc1RvTGlzdHMiLCJsb2FkRGF0YSIsImFjdGl2ZUxpc3QiLCJsb2FkUGFnZSIsImRlZmF1bHRMaXN0IiwiZGVmYXVsdExpc3RET00iLCJhbGxUb2RvRE9NUyIsIm9uY2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwic2Nyb2xsVG8iLCJzY3JvbGxIZWlnaHQiLCJuZXdMaXN0RE9NIiwidG9TdHJpbmciLCJmb3JFYWNoIiwic2lkZUJhciIsInNpZGViYXJDb250ZW50Iiwid2luZG93Il0sInNvdXJjZVJvb3QiOiIifQ==