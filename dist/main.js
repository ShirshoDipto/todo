(()=>{"use strict";class t{constructor(t,e,i){this.title=t,this.todos=e,this.listNumber=i}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getTodos(){return this.todos}set setTitle(t){this.title=t}set setTodos(t){this.todos=t}addNewList(t){this.todos.push(t)}}class e{constructor(t,e,i,s,o,n,r){this.title=t,this.description=e,this.dueDate=i,this.priority=s,this.listNumber=o,this.completed=n,this.todoNumber=r}get getTodoNumber(){return this.todoNumber}set setTodoNumber(t){this.todoNumber=t}get getIsCompleted(){return this.completed}changeCompleteStatus(){!0===this.completed?this.completed=!1:this.completed=!0}get getListNumber(){return this.listNumber}set setListNumber(t){this.listNumber=t}get getTitle(){return this.title}get getDescription(){return this.description}get getDueDate(){return this.dueDate}get getPriority(){return this.priority}set setTitle(t){this.title=t}set setDescription(t){this.description=t}set setDueDate(t){this.dueDate=t}set setPriority(t){this.priority=t}}let i=[];function s(t){if(0===i.length)return;const e=t.firstElementChild;if("active-list"===e.getAttribute("id"))e.removeAttribute("id");else{let t=e.nextElementSibling;for(;;){if("active-list"===t.getAttribute("id")){t.removeAttribute("id");break}t=t.nextElementSibling}}}function o(t){let e=0;for(let s=0;s<i.length;s++)if(i[s].setListNumber=s,0!==i[s].getTodos.length){let o=0;const n=i[s].getListNumber;for(let r of i[s].getTodos){r.setListNumber=s,r.setTodoNumber=o;let i=t[e];i.removeAttribute("list-number"),i.setAttribute("list-number",`${n}`),i.removeAttribute("todo-number"),i.setAttribute("todo-number",`${o}`),o++,e++}}}let n=[];function r(t,e,i){t.setAttribute("list-number",`${e}`),t.firstElementChild.textContent=i}function l(t,e){if(null!==t)for(let i of t)i.getAttribute("list-number")===e?i.removeAttribute("id"):i.setAttribute("id","hide")}function d(t){if("delete"===t.target.classList.value)!function(t){if("a-list"===t.classList.value){const e=t.getAttribute("list-number");m.removeChild(t);const s=Array.from(document.querySelectorAll(".a-list"));let n=Array.from(document.querySelectorAll(".all-todo .a-todo"));!function(t,e,i){for(let s of e)s.getAttribute("list-number")===i&&t.removeChild(s)}(S,n,e),n=Array.from(document.querySelectorAll(".all-todo .a-todo")),function(t,e,s){i.splice(parseInt(e),1);let n=0;for(let e of t)e.removeAttribute("list-number"),e.setAttribute("list-number",`${n}`),n++;o(s)}(s,e,n),c(n,e),N.getAttribute("list-number")===e&&c(n,e)}}(this);else{s(m),this.setAttribute("id","active-list");let e=t.target.getAttribute("list-number");r(N,e,this.firstElementChild.lastElementChild.textContent),l(Array.from(document.querySelectorAll(".a-todo")),e)}console.log(i)}function c(t,e){0===i.length?(N.firstElementChild.textContent="Add a List",N.firstElementChild.nextElementSibling.textContent=""):"0"===e?(document.querySelector('.all-list div[list-number="0"]').setAttribute("id","active-list"),r(N,e,i[0].getTitle),l(t,"0")):(document.querySelector(`.all-list div[list-number="${parseInt(e)-1}"]`).setAttribute("id","active-list"),r(N,e,i[parseInt(e)-1].getTitle),l(t,""+(parseInt(e)-1)))}function u(t){if("delete"===t.target.classList.value){const t=this.getAttribute("list-number"),e=this.getAttribute("todo-number");i[parseInt(t)].getTodos.splice(parseInt(e),1),console.log(i),S.removeChild(this),o(Array.from(document.querySelectorAll(".all-todo .a-todo")))}}let a=new t("My Day",[],0);i.push(a);const m=document.querySelector(".all-list"),p=document.querySelector("#list-name"),b=document.querySelector(".list-form"),h=document.querySelector(".add-new-list"),g=document.querySelector(".new-list-modal"),A=document.querySelector(".add-todo"),f=document.querySelector(".new-todo-modal"),v=document.querySelector(".todo-form"),y=document.querySelector("#todo-name"),C=document.querySelector("#due-date"),L=document.querySelector("#priority"),E=document.querySelector("#description"),S=document.querySelector(".all-todo"),N=document.querySelector(".todo-header"),q=document.querySelector(".all-list .a-list");A.onclick=()=>{f.removeAttribute("id")},h.addEventListener("click",(()=>{g.removeAttribute("id")})),b.onsubmit=function(e){e.preventDefault();let o=new t(p.value,[],i.length);s(m),function(t,e,s){i.push(t);const o=document.createElement("div");o.classList.add("a-list"),o.setAttribute("list-number",`${t.getListNumber}`),o.setAttribute("id","active-list"),e.insertBefore(o,s);const n=document.createElement("div");n.classList.add("left"),o.appendChild(n);const r=document.createElement("div");r.classList.add("right"),o.appendChild(r);const l=document.createElement("img");l.classList.add("icon"),l.setAttribute("src","icons/plus.png"),n.appendChild(l);const d=document.createElement("div");d.classList.add("list-title"),d.textContent=t.getTitle,n.appendChild(d);const c=document.createElement("img");c.classList.add("icon"),c.setAttribute("src","icons/plus.png"),r.appendChild(c);const u=document.createElement("img");u.classList.add("icon"),u.setAttribute("src","icons/plus.png"),r.appendChild(u);const a=document.createElement("img");a.classList.add("icon"),a.setAttribute("src","icons/plus.png"),r.appendChild(a);const m=document.createElement("img");m.classList.add("delete"),m.setAttribute("src","icons/plus.png"),r.appendChild(m)}(o,m,g);const n=Array.from(document.querySelectorAll(".a-todo"));r(N,o.getListNumber,o.getTitle),l(n,o.getListNumber),document.getElementById("active-list").onclick=d,e.target.reset(),g.setAttribute("id","hide"),console.log(i)},b.onreset=()=>{g.setAttribute("id","hide")},v.onsubmit=function(t){t.preventDefault();const s=N.getAttribute("list-number"),o=i[parseInt(s)].getTodos.length;let r=new e(y.value,E.value,C.value,L.value,s,!1,o);i[parseInt(s)].getTodos.push(r);const l=function(t,e){n.push(e);const i=document.createElement("div");i.classList.add("a-todo"),i.setAttribute("list-number",`${e.getListNumber}`),i.setAttribute("todo-number",`${e.getTodoNumber}`),t.appendChild(i);const s=document.createElement("div");s.classList.add("a-list"),i.appendChild(s);const o=document.createElement("div");o.classList.add("description"),o.textContent=e.getDescription,i.appendChild(o);const r=document.createElement("div");r.classList.add("collapse"),i.appendChild(r);const l=document.createElement("div");l.classList.add("left"),s.appendChild(l);const d=document.createElement("div");d.classList.add("right"),s.appendChild(d);const c=document.createElement("img");c.setAttribute("src","icons/plus.png"),c.setAttribute("alt","collapse icon"),r.appendChild(c);const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id","todo-checkbox"),u.setAttribute("name","todo-checkbox"),l.appendChild(u);const a=document.createElement("div");a.textContent=`${e.getTitle} (Due: ${e.getDueDate})`,l.appendChild(a);const m=document.createElement("img");m.setAttribute("src","icons/plus.png"),m.classList.add("icon"),d.appendChild(m);const p=document.createElement("img");p.setAttribute("src","icons/plus.png"),p.classList.add("icon"),d.appendChild(p);const b=document.createElement("img");b.setAttribute("src","icons/plus.png"),b.classList.add("icon"),d.appendChild(b);const h=document.createElement("img");return h.setAttribute("src","icons/plus.png"),h.classList.add("delete"),d.appendChild(h),i}(S,r);l.onclick=u,f.setAttribute("id","hide"),t.target.reset(),console.log(i)},v.onreset=()=>{f.setAttribute("id","hide")},q.onclick=d})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxDQUNYLENDeEN1QkssQ0FBb0JyRCxFQUFTOEMsR0FDaERDLEVBQVd6QixRQUFVVixFQUdyQk0sRUFBYXJDLGFBQWEsS0FBTSxRQUNoQ08sRUFBRUMsT0FBT3VELFFBQ1RwQyxRQUFRQyxJQUFJOUMsRUFDaEIsRUFrSEF3RCxFQUFTMEIsUUFBVSxLQUNmM0IsRUFBYXJDLGFBQWEsS0FBTSxPQUFPLEVBRzNDd0MsRUFBZUMsUUFBVW5DLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8vLi9zcmMvbWFuYWdlTGlzdEludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLy4vc3JjL21hbmFnZVRvZG9JbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG9kby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlzdCB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIHRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy50b2RvcyA9IHRvZG9zO1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSBsaXN0TnVtYmVyO1xuICAgICAgICAvLyB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICAvLyB0aGlzLmFjdGl2ZSA9IGFjdGl2ZTtcbiAgICB9XG5cbiAgICAvLyBnZXQgZ2V0QWN0aXZlKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgLy8gfVxuICAgIC8vIHNldCBzZXRBY3RpdmUodmFsdWUpIHtcbiAgICAvLyAgICAgdGhpcy5hY3RpdmUgPSB2YWx1ZTtcbiAgICAvLyB9XG5cbiAgICAvLyBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICAvLyB9XG5cbiAgICAvLyBzZXQgc2V0RHVlRGF0ZSh2YWx1ZSkge1xuICAgIC8vICAgICB0aGlzLmR1ZURhdGUgPSB2YWx1ZTtcbiAgICAvLyB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtyZXR1cm4gdGhpcy5saXN0TnVtYmVyfVxuXG4gICAgc2V0IHNldExpc3ROdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5saXN0TnVtYmVyID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRpdGxlKCkge3JldHVybiB0aGlzLnRpdGxlfVxuXG4gICAgZ2V0IGdldFRvZG9zKCkge3JldHVybiB0aGlzLnRvZG9zfVxuXG4gICAgc2V0IHNldFRpdGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VG9kb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy50b2RvcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGFkZE5ld0xpc3QodGhlVG9kbykge1xuICAgICAgICB0aGlzLnRvZG9zLnB1c2godGhlVG9kbyk7XG4gICAgfVxufSIsIlxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvZG8ge1xuXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgbGlzdE51bWJlciwgY29tcGxldGVkLCB0b2RvTnVtYmVyKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMubGlzdE51bWJlciA9IGxpc3ROdW1iZXI7XG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gY29tcGxldGVkO1xuICAgICAgICB0aGlzLnRvZG9OdW1iZXIgPSB0b2RvTnVtYmVyO1xuICAgIH1cblxuICAgIGdldCBnZXRUb2RvTnVtYmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2RvTnVtYmVyO1xuICAgIH1cblxuICAgIHNldCBzZXRUb2RvTnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudG9kb051bWJlciA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBnZXRJc0NvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVkO1xuICAgIH1cblxuICAgIGNoYW5nZUNvbXBsZXRlU3RhdHVzKCkge1xuICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdE51bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdE51bWJlcjtcbiAgICB9XG5cbiAgICBzZXQgc2V0TGlzdE51bWJlcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmxpc3ROdW1iZXIgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0VGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICAgIH1cbiAgICBnZXQgZ2V0RGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgZ2V0RHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZTtcbiAgICB9XG4gICAgZ2V0IGdldFByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmlvcml0eTtcbiAgICB9XG5cbiAgICBzZXQgc2V0VGl0bGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldCBzZXREZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfVxuICAgIHNldCBzZXREdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXQgc2V0UHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGxldCBsaXN0cyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3TGlzdEludGVyZmFjZShsaXN0T2JqZWN0LCBjb250YWluZXIsIGluc2VydF9iZWZvcmUpIHtcblxuICAgIGxpc3RzLnB1c2gobGlzdE9iamVjdCk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFMaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtsaXN0T2JqZWN0LmdldExpc3ROdW1iZXJ9YCk7XG4gICAgYUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYUxpc3QsIGluc2VydF9iZWZvcmUpO1xuXG5cbiAgICBjb25zdCBsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGVmdC5jbGFzc0xpc3QuYWRkKCdsZWZ0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQobGVmdCk7XG5cbiAgICBjb25zdCByaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0Jyk7XG4gICAgYUxpc3QuYXBwZW5kQ2hpbGQocmlnaHQpO1xuXG4gICAgY29uc3QgaWNvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMS5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjEuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGljb24xKTtcblxuICAgIGNvbnN0IGxpc3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGxpc3RUaXRsZS5jbGFzc0xpc3QuYWRkKCdsaXN0LXRpdGxlJyk7XG4gICAgbGlzdFRpdGxlLnRleHRDb250ZW50ID0gbGlzdE9iamVjdC5nZXRUaXRsZTtcbiAgICBsZWZ0LmFwcGVuZENoaWxkKGxpc3RUaXRsZSk7XG5cbiAgICBjb25zdCBpY29uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb24yLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICBpY29uMi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb24yKTtcblxuICAgIGNvbnN0IGljb24zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjMuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGljb24zLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjMpO1xuXG4gICAgY29uc3QgaWNvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uNC5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgaWNvbjQuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNCk7XG5cbiAgICBjb25zdCBpY29uNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb241LmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZScpO1xuICAgIGljb241LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjUpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFeGlzdGluZ01hcmtlcihjb250YWluZXIpIHtcbiAgICBpZiAobGlzdHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgY29uc3QgZmlyc3RMaXN0ID0gY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGlmIChmaXJzdExpc3QuZ2V0QXR0cmlidXRlKCdpZCcpID09PSAnYWN0aXZlLWxpc3QnKSB7XG4gICAgICAgIGZpcnN0TGlzdC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbmV4dExpc3QgPSBmaXJzdExpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRMaXN0LmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gJ2FjdGl2ZS1saXN0Jyl7XG4gICAgICAgICAgICAgICAgbmV4dExpc3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dExpc3QgPSBuZXh0TGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURPTXMobnVtKSB7XG4vLyAgICAgbGV0IGluZGV4ID0gMDtcblxuLy8gICAgIC8vICB1cGRhdGUgZG9tc1xuLy8gICAgIGZvciAobGV0IGxpc3Qgb2YgY29udGFpbmVyKSB7XG4vLyAgICAgICAgIGxpc3QucmVtb3ZlQXR0cmlidXRlKG51bSk7XG4vLyAgICAgICAgIGxpc3Quc2V0QXR0cmlidXRlKG51bSwgYCR7aW5kZXh9YCk7XG4vLyAgICAgICAgIGluZGV4Kys7XG4vLyAgICAgfVxuXG4vLyB9XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMaXN0cyhhbGxMaXN0cykge1xuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdHMubGVuZ3RoOyBpKyspIHtcbi8vICAgICAgICAgbGlzdHNbaV0uc2V0TGlzdE51bWJlciA9IGk7XG4vLyAgICAgICAgIGFsbExpc3RzXG4vLyAgICAgfVxuLy8gfVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpIHtcbiAgICBsZXQgYWxsVG9kb0luZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpc3RzW2ldLnNldExpc3ROdW1iZXIgPSBpO1xuICAgICAgICBpZiAobGlzdHNbaV0uZ2V0VG9kb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0b2RvX25vID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGxpc3Rfbm8gPSBsaXN0c1tpXS5nZXRMaXN0TnVtYmVyO1xuICAgICAgICAgICAgZm9yIChsZXQgeCBvZiBsaXN0c1tpXS5nZXRUb2Rvcykge1xuICAgICAgICAgICAgICAgIHguc2V0TGlzdE51bWJlciA9IGk7XG4gICAgICAgICAgICAgICAgeC5zZXRUb2RvTnVtYmVyID0gdG9kb19ubztcbiAgICAgICAgICAgICAgICBsZXQgdGhlRE9NID0gYWxsVG9kb3NbYWxsVG9kb0luZGV4XTtcbiAgICAgICAgICAgICAgICB0aGVET00ucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICAgICAgICAgIHRoZURPTS5zZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJywgYCR7bGlzdF9ub31gKTtcbiAgICAgICAgICAgICAgICB0aGVET00ucmVtb3ZlQXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuICAgICAgICAgICAgICAgIHRoZURPTS5zZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJywgYCR7dG9kb19ub31gKTtcbiAgICAgICAgICAgICAgICB0b2RvX25vKys7XG4gICAgICAgICAgICAgICAgYWxsVG9kb0luZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMaXN0c0FuZFRvZG9zKGNvbnRhaW5lciwgbGlzdE51bWJlciwgYWxsVG9kb3MpIHtcblxuICAgIGxpc3RzLnNwbGljZShwYXJzZUludChsaXN0TnVtYmVyKSwgMSk7XG4gICAgLy8gIHVwZGF0ZSBkb21zXG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIGZvciAobGV0IGxpc3Qgb2YgY29udGFpbmVyKSB7XG4gICAgICAgIGxpc3QucmVtb3ZlQXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBsaXN0LnNldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInLCBgJHtpbmRleH1gKTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgQXJyYXkgYW5kIHRvZG8gRE9NJ3NcbiAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xufVxuXG5cbi8vIGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2RvRE9NKGFsbFRvZG9zKSB7XG4vLyAgICAgbGV0IGFsbFRvZG9JbmRleCA9IDA7XG4vLyAgICAgZm9yIChsZXQgbGlzdCBvZiBsaXN0cykge1xuLy8gICAgICAgICBpZiAobGlzdC5nZXRUb2Rvcy5sZW5ndGggPT09IDApIHtcbi8vICAgICAgICAgICAgIGNvbnRpbnVlO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGVsc2Uge1xuLy8gICAgICAgICAgICAgY29uc3QgbGlzdE51bWJlciA9IGxpc3QuZ2V0TGlzdE51bWJlcjtcbi8vICAgICAgICAgICAgIGZvciAobGV0IHRvZG8gb2YgbGlzdC5nZXRUb2RvKSB7XG4vLyAgICAgICAgICAgICAgICAgbGV0IHRoZURPTSA9IGFsbFRvZG9zW2FsbFRvZG9JbmRleF07XG4vLyAgICAgICAgICAgICAgICAgdGhlRE9NLnJlbW92ZUF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbi8vICAgICAgICAgICAgICAgICB0aGVET00uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICB9XG4vLyB9XG5cblxuLy8gPGRpdiBjbGFzcz1cImEtbGlzdFwiPlxuLy8gICAgIDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG4vLyAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJwaWNcIj5cbi8vICAgICAgICAgPGRpdiBjbGFzcz1cImxpc3QtdGl0bGVcIj5NeSBEYXk8L2Rpdj5cbi8vICAgICA8L2Rpdj5cbi8vICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkVcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIlVcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRcIj5cbi8vICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIkRlbFwiPlxuLy8gICAgIDwvZGl2PlxuLy8gPC9kaXY+XG4iLCJcblxuZXhwb3J0IGxldCB0b2RvcyA9IFtdO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXdUb2RvSW50ZXJmYWNlKGNvbnRhaW5lciwgdGhlVG9kbykge1xuXG4gICAgLy8gZGVzY3JpcHRpb25zIGdvZXMgaGVyZVxuXG4gICAgdG9kb3MucHVzaCh0aGVUb2RvKTtcblxuICAgIGNvbnN0IGFUb2RvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYVRvZG8uY2xhc3NMaXN0LmFkZCgnYS10b2RvJyk7XG4gICAgYVRvZG8uc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke3RoZVRvZG8uZ2V0TGlzdE51bWJlcn1gKTtcbiAgICBhVG9kby5zZXRBdHRyaWJ1dGUoJ3RvZG8tbnVtYmVyJywgYCR7dGhlVG9kby5nZXRUb2RvTnVtYmVyfWApO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhVG9kbyk7XG5cbiAgICBjb25zdCBhTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFMaXN0LmNsYXNzTGlzdC5hZGQoJ2EtbGlzdCcpO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGFMaXN0KTtcblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZCgnZGVzY3JpcHRpb24nKTtcbiAgICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoZVRvZG8uZ2V0RGVzY3JpcHRpb247XG4gICAgYVRvZG8uYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gICAgY29uc3QgY29sbGFwc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb2xsYXBzZS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xuICAgIGFUb2RvLmFwcGVuZENoaWxkKGNvbGxhcHNlKTtcblxuICAgIGNvbnN0IGxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ2xlZnQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChsZWZ0KTtcblxuICAgIGNvbnN0IHJpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcbiAgICBhTGlzdC5hcHBlbmRDaGlsZChyaWdodCk7XG5cbiAgICBjb25zdCBjb2xsYXBzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGNvbGxhcHNlSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgY29sbGFwc2VJbWcuc2V0QXR0cmlidXRlKCdhbHQnLCAnY29sbGFwc2UgaWNvbicpO1xuICAgIGNvbGxhcHNlLmFwcGVuZENoaWxkKGNvbGxhcHNlSW1nKTtcblxuICAgIGNvbnN0IGlucHV0MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQxLnNldEF0dHJpYnV0ZSgndHlwZScsICdjaGVja2JveCcpO1xuICAgIGlucHV0MS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvZG8tY2hlY2tib3gnKTtcbiAgICBpbnB1dDEuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RvZG8tY2hlY2tib3gnKTtcbiAgICAvLyBpbnB1dDEuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQoaW5wdXQxKTtcblxuICAgIGNvbnN0IHRpdGxlVG9kbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRpdGxlVG9kby50ZXh0Q29udGVudCA9IGAke3RoZVRvZG8uZ2V0VGl0bGV9IChEdWU6ICR7dGhlVG9kby5nZXREdWVEYXRlfSlgO1xuICAgIGxlZnQuYXBwZW5kQ2hpbGQodGl0bGVUb2RvKTtcblxuICAgIGNvbnN0IGljb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjIuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uMi5jbGFzc0xpc3QuYWRkKCdpY29uJyk7XG4gICAgcmlnaHQuYXBwZW5kQ2hpbGQoaWNvbjIpO1xuXG4gICAgY29uc3QgaWNvbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpY29uMy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpY29ucy9wbHVzLnBuZycpO1xuICAgIGljb24zLmNsYXNzTGlzdC5hZGQoJ2ljb24nKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uMyk7XG5cbiAgICBjb25zdCBpY29uNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGljb240LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ljb25zL3BsdXMucG5nJyk7XG4gICAgaWNvbjQuY2xhc3NMaXN0LmFkZCgnaWNvbicpO1xuICAgIHJpZ2h0LmFwcGVuZENoaWxkKGljb240KTtcblxuICAgIGNvbnN0IGljb241ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgaWNvbjUuc2V0QXR0cmlidXRlKCdzcmMnLCAnaWNvbnMvcGx1cy5wbmcnKTtcbiAgICBpY29uNS5jbGFzc0xpc3QuYWRkKCdkZWxldGUnKTtcbiAgICByaWdodC5hcHBlbmRDaGlsZChpY29uNSk7XG5cbiAgICByZXR1cm4gYVRvZG87XG59XG5cblxuLy8gY2hhbmdlIHRvZG8gaGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0TnVtYmVyLCB0aXRsZSkge1xuICAgIHRvZG9IZWFkZXIuc2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicsIGAke2xpc3ROdW1iZXJ9YCk7XG4gICAgdG9kb0hlYWRlci5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9IHRpdGxlO1xufVxuXG4vLyBzaG93IGFsbCB0b2RvcyBvZiBhIHBhcnRpY3VsYXIgbGlzdFxuZXhwb3J0IGZ1bmN0aW9uIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKSB7XG4gICAgLy8gbWV0aG9kIGRlc2NyaXB0aW9uIGdvZXMgaGVyZVxuICAgIGlmIChhbGxUb2RvcyA9PT0gbnVsbCkgcmV0dXJuXG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBpZiAodG9kby5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJykgPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIHRvZG8ucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9kby5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUmVsYXRlZFRvZG8oY29udGFpbmVyLCBhbGxUb2RvcywgbGlzdE51bWJlcil7XG4gICAgZm9yIChsZXQgdG9kbyBvZiBhbGxUb2Rvcykge1xuICAgICAgICBjb25zdCBsaXN0X251bSA9IHRvZG8uZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICBpZiAobGlzdF9udW0gPT09IGxpc3ROdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZCh0b2RvKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gPGRpdiBjbGFzcz1cImEtdG9kb1wiPlxuLy8gICAgIDxkaXYgY2xhc3M9XCJhLWxpc3RcIj5cbi8vICAgICAgICAgPGRpdiBjbGFzcz1cImxlZnRcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJcIj5cbi8vICAgICAgICAgICAgIDxkaXY+bmFtZSBvZiB0aGUgdG9kbzwvZGl2PlxuLy8gICAgICAgICA8L2Rpdj5cbi8vICAgICAgICAgPGRpdiBjbGFzcz1cInJpZ2h0XCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiRVwiPlxuLy8gICAgICAgICAgICAgPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpY29ucy9wbHVzLnBuZ1wiIGFsdD1cIlVcIj5cbi8vICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJpY29uXCIgc3JjPVwiaWNvbnMvcGx1cy5wbmdcIiBhbHQ9XCJEXCI+XG4vLyAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiRGVsXCI+XG4vLyAgICAgICAgIDwvZGl2PlxuLy8gICAgIDwvZGl2PlxuLy8gICAgIDxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiIGlkPVwiaGlkZVwiPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LiBFc3NlIGlwc2FtIGZ1Z2lhdCBldW0gaGljIGlwc3VtIGRvbG9ydW0gYmxhbmRpdGlpcyBpdXN0byBkZWxlbml0aSBwZXJmZXJlbmRpcyBlbmltIG5pc2kgYWRpcGlzY2kgaXVyZSBuYXR1cyBhZCBtYXhpbWUsIGFtZXQsIGNvcnBvcmlzIHF1aWJ1c2RhbSBhbGlxdWFtITwvZGl2PlxuLy8gICAgIDxkaXYgY2xhc3M9XCJjb2xsYXBzZVwiPlxuLy8gICAgICAgICA8aW1nIHNyYz1cImljb25zL3BsdXMucG5nXCIgYWx0PVwiY29sbGFwc2UgaWNvblwiPlxuLy8gICAgIDwvZGl2PlxuLy8gPC9kaXY+XG5cbiIsImltcG9ydCBMaXN0IGZyb20gJy4vbGlzdCdcbmltcG9ydCBUb2RvIGZyb20gJy4vdG9kbydcbmltcG9ydCB7bGlzdHMsIGFkZE5ld0xpc3RJbnRlcmZhY2UsIHJlbW92ZUV4aXN0aW5nTWFya2VyLCB1cGRhdGVMaXN0c0FuZFRvZG9zLCB1cGRhdGVBcnJheUFuZFRvZG99IGZyb20gJy4vbWFuYWdlTGlzdEludGVyZmFjZSdcbmltcG9ydCB7YWRkTmV3VG9kb0ludGVyZmFjZSwgY2hhbmdlVG9kb0hlYWRlciwgc2hvd0xpc3RzVG9kb3MsIGRlbGV0ZVJlbGF0ZWRUb2RvfSBmcm9tICcuL21hbmFnZVRvZG9JbnRlcmZhY2UnXG5cblxuZnVuY3Rpb24gYWRkTGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbWFuYWdlIEFycmF5IG9mIGxpc3RzXG4gICAgbGV0IG5ld0xpc3QgPSBuZXcgTGlzdChuZXdMaXN0aW5wdXQudmFsdWUsIFtdLCBsaXN0cy5sZW5ndGgpO1xuICAgIHJlbW92ZUV4aXN0aW5nTWFya2VyKGFsbExpc3QpO1xuICAgIGFkZE5ld0xpc3RJbnRlcmZhY2UobmV3TGlzdCwgYWxsTGlzdCwgbmV3TGlzdE1vZGFsLCB0b2RvSGVhZGVyKTtcbiAgICBjb25zdCBhbGxUb2RvcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmEtdG9kbycpKTtcblxuICAgIC8vIG1hbmFnZSB0b2RvIGludGVyZmFjZVxuICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbmV3TGlzdC5nZXRMaXN0TnVtYmVyLCBuZXdMaXN0LmdldFRpdGxlKTtcbiAgICBzaG93TGlzdHNUb2RvcyhhbGxUb2RvcywgbmV3TGlzdC5nZXRMaXN0TnVtYmVyKTtcbiAgICBjb25zdCBuZXdMaXN0RE9NID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjdGl2ZS1saXN0Jyk7XG4gICAgbmV3TGlzdERPTS5vbmNsaWNrID0gbWFrZUxpc3RBY3RpdmU7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBuZXdMaXN0TW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgY29uc29sZS5sb2cobGlzdHMpO1xufVxuXG5cbmZ1bmN0aW9uIGFkZF9hX1RvZG8oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIC8vIG1hbmFnZSBBcnJheSBvZiBsaXN0c1xuICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0b2RvSGVhZGVyLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICBjb25zdCB0b2RvTnVtYmVyID0gbGlzdHNbcGFyc2VJbnQobGlzdE51bWJlcildLmdldFRvZG9zLmxlbmd0aDtcbiAgICBsZXQgbmV3VG9kbyA9IG5ldyBUb2RvKHRvZG9OYW1lLnZhbHVlLCBkZXNjcmlwdGlvbi52YWx1ZSwgZHVlRGF0ZS52YWx1ZSwgcHJpb3JpdHkudmFsdWUsIGxpc3ROdW1iZXIsIGZhbHNlLCB0b2RvTnVtYmVyKTtcbiAgICBsaXN0c1twYXJzZUludChsaXN0TnVtYmVyKV0uZ2V0VG9kb3MucHVzaChuZXdUb2RvKTtcblxuXG4gICAgLy8gYnJpbmcgdGhlIHRvZG8gaW50ZXJmYWNlXG4gICAgY29uc3QgbmV3VG9kb0RPTSA9IGFkZE5ld1RvZG9JbnRlcmZhY2UoYWxsVG9kbywgbmV3VG9kbyk7XG4gICAgbmV3VG9kb0RPTS5vbmNsaWNrID0gbW9kaWZ5VG9kbztcblxuICAgIC8vIGhpZGUgbW9kYWxcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG4gICAgZS50YXJnZXQucmVzZXQoKTtcbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cblxuZnVuY3Rpb24gbWFrZUxpc3RBY3RpdmUoZSkge1xuICAgIC8vIGhhbmRsZSBkZWxldGUsIHVwLCBkb3duLCBjb21wbGV0ZVxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGRlbGV0ZUVsZW1lbnQodGhpcyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2FjdGl2ZS1saXN0Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgdGhlIGxpc3RPYmplY3RcbiAgICAgICAgbGV0IGxpc3ROdW1iZXIgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2xpc3QtbnVtYmVyJyk7XG4gICAgICAgIGNoYW5nZVRvZG9IZWFkZXIodG9kb0hlYWRlciwgbGlzdE51bWJlciwgdGhpcy5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLXRvZG8nKSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKGFsbFRvZG9zLCBsaXN0TnVtYmVyKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG59XG5cbmZ1bmN0aW9uIHNob3dSZWxhdGVkVG9kb3MoeCwgbGlzdE5vKXtcbiAgICBpZiAobGlzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSAnQWRkIGEgTGlzdCc7XG4gICAgICAgIHRvZG9IZWFkZXIuZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxpc3RObyA9PT0gYDBgKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiMFwiXScpO1xuICAgICAgICBhY3RpdmVMaXN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYWN0aXZlLWxpc3QnKTtcbiAgICAgICAgY2hhbmdlVG9kb0hlYWRlcih0b2RvSGVhZGVyLCBsaXN0Tm8sIGxpc3RzWzBdLmdldFRpdGxlKTtcbiAgICAgICAgc2hvd0xpc3RzVG9kb3MoeCwgYDBgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYWxsLWxpc3QgZGl2W2xpc3QtbnVtYmVyPVwiJHtwYXJzZUludChsaXN0Tm8pLTF9XCJdYCk7XG4gICAgICAgIGFjdGl2ZUxpc3Quc2V0QXR0cmlidXRlKCdpZCcsICdhY3RpdmUtbGlzdCcpO1xuICAgICAgICBjaGFuZ2VUb2RvSGVhZGVyKHRvZG9IZWFkZXIsIGxpc3RObywgbGlzdHNbcGFyc2VJbnQobGlzdE5vKS0xXS5nZXRUaXRsZSk7XG4gICAgICAgIHNob3dMaXN0c1RvZG9zKHgsIGAke3BhcnNlSW50KGxpc3RObyktMX1gKTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gZGVsZXRlRWxlbWVudChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LnZhbHVlID09PSAnYS1saXN0Jykge1xuICAgICAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsaXN0LW51bWJlcicpO1xuICAgICAgICAvLyByZW1vdmVFeGlzdGluZ01hcmtlcihhbGxMaXN0KTtcbiAgICAgICAgYWxsTGlzdC5yZW1vdmVDaGlsZChlbGVtZW50KVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hLWxpc3QnKSk7XG4gICAgICAgIGxldCB4ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpKTtcbiAgICAgICAgZGVsZXRlUmVsYXRlZFRvZG8oYWxsVG9kbywgeCwgaW5kZXgpO1xuICAgICAgICB4ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWxsLXRvZG8gLmEtdG9kbycpKTtcbiAgICAgICAgdXBkYXRlTGlzdHNBbmRUb2Rvcyhjb250YWluZXIsIGluZGV4LCB4KTtcbiAgICAgICAgc2hvd1JlbGF0ZWRUb2Rvcyh4LCBpbmRleCk7XG4gICAgICAgIGlmICh0b2RvSGVhZGVyLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKSA9PT0gaW5kZXgpIHtcbiAgICAgICAgICAgIHNob3dSZWxhdGVkVG9kb3MoeCwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIG1vZGlmeVRvZG8oZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAgIGNvbnN0IGxpc3ROdW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbGlzdC1udW1iZXInKTtcbiAgICAgICAgY29uc3QgdG9kb051bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCd0b2RvLW51bWJlcicpO1xuXG4gICAgICAgIC8vIGRlbGV0ZSB0b2RvIGZyb20gdGhlIGxpc3RzIEFycmF5IGFuZCB0aGUgZG9tXG4gICAgICAgIGxpc3RzW3BhcnNlSW50KGxpc3ROdW1iZXIpXS5nZXRUb2Rvcy5zcGxpY2UocGFyc2VJbnQodG9kb051bWJlciksIDEpO1xuICAgICAgICBjb25zb2xlLmxvZyhsaXN0cyk7XG4gICAgICAgIGFsbFRvZG8ucmVtb3ZlQ2hpbGQodGhpcyk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRvZG8gYXJyYXlcbiAgICAgICAgY29uc3QgYWxsVG9kb3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hbGwtdG9kbyAuYS10b2RvJykpO1xuICAgICAgICB1cGRhdGVBcnJheUFuZFRvZG8oYWxsVG9kb3MpO1xuICAgIH1cbn1cblxuXG4vLyBBZGRpbmcgZGVmYXVsdCBsaXN0XG5sZXQgZGVmYXVsdExpc3QgPSBuZXcgTGlzdCgnTXkgRGF5JywgW10sIDApO1xubGlzdHMucHVzaChkZWZhdWx0TGlzdCk7XG5cbi8vIEFsbCBnbG9iYWwgdmFyaWFibGVzIGFuZCBldmVudExpc3RlbmVyc1xuY29uc3QgYWxsTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGwtbGlzdCcpO1xuY29uc3QgbmV3TGlzdGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xpc3QtbmFtZScpO1xuY29uc3QgbGlzdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC1mb3JtJyk7XG5jb25zdCBhZGROZXdMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1uZXctbGlzdCcpO1xuY29uc3QgbmV3TGlzdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1saXN0LW1vZGFsJyk7XG5jb25zdCBhZGRUb2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG5jb25zdCBuZXdUb2RvTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3LXRvZG8tbW9kYWwnKTtcbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tZm9ybScpO1xuY29uc3QgdG9kb05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9kby1uYW1lJyk7XG5jb25zdCBkdWVEYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2R1ZS1kYXRlJyk7XG5jb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcmlvcml0eScpO1xuY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24nKTtcbmNvbnN0IGFsbFRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLXRvZG8nKTtcbmNvbnN0IHRvZG9IZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1oZWFkZXInKTtcblxuY29uc3QgZGVmYXVsdExpc3RET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxsLWxpc3QgLmEtbGlzdCcpO1xuXG5hZGRUb2RvLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgbmV3VG9kb01vZGFsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbn1cblxuYWRkTmV3TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBuZXdMaXN0TW9kYWwucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xufSlcblxuXG5saXN0Rm9ybS5vbnN1Ym1pdCA9IGFkZExpc3Q7XG5saXN0Rm9ybS5vbnJlc2V0ID0gKCkgPT4ge1xuICAgIG5ld0xpc3RNb2RhbC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2hpZGUnKTtcbn1cblxudG9kb0Zvcm0ub25zdWJtaXQgPSBhZGRfYV9Ub2RvO1xudG9kb0Zvcm0ub25yZXNldCA9ICgpID0+IHtcbiAgICBuZXdUb2RvTW9kYWwuc2V0QXR0cmlidXRlKCdpZCcsICdoaWRlJyk7XG59XG5cbmRlZmF1bHRMaXN0RE9NLm9uY2xpY2sgPSBtYWtlTGlzdEFjdGl2ZTsiXSwibmFtZXMiOlsiTGlzdCIsImNvbnN0cnVjdG9yIiwidGl0bGUiLCJ0b2RvcyIsImxpc3ROdW1iZXIiLCJ0aGlzIiwiZ2V0TGlzdE51bWJlciIsInNldExpc3ROdW1iZXIiLCJ2YWx1ZSIsImdldFRpdGxlIiwiZ2V0VG9kb3MiLCJzZXRUaXRsZSIsInNldFRvZG9zIiwiYWRkTmV3TGlzdCIsInRoZVRvZG8iLCJwdXNoIiwiVG9kbyIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGVkIiwidG9kb051bWJlciIsImdldFRvZG9OdW1iZXIiLCJzZXRUb2RvTnVtYmVyIiwiZ2V0SXNDb21wbGV0ZWQiLCJjaGFuZ2VDb21wbGV0ZVN0YXR1cyIsImdldERlc2NyaXB0aW9uIiwiZ2V0RHVlRGF0ZSIsImdldFByaW9yaXR5Iiwic2V0RGVzY3JpcHRpb24iLCJzZXREdWVEYXRlIiwic2V0UHJpb3JpdHkiLCJsaXN0cyIsInJlbW92ZUV4aXN0aW5nTWFya2VyIiwiY29udGFpbmVyIiwibGVuZ3RoIiwiZmlyc3RMaXN0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJuZXh0TGlzdCIsIm5leHRFbGVtZW50U2libGluZyIsInVwZGF0ZUFycmF5QW5kVG9kbyIsImFsbFRvZG9zIiwiYWxsVG9kb0luZGV4IiwiaSIsInRvZG9fbm8iLCJsaXN0X25vIiwieCIsInRoZURPTSIsInNldEF0dHJpYnV0ZSIsImNoYW5nZVRvZG9IZWFkZXIiLCJ0b2RvSGVhZGVyIiwidGV4dENvbnRlbnQiLCJzaG93TGlzdHNUb2RvcyIsInRvZG8iLCJtYWtlTGlzdEFjdGl2ZSIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJlbGVtZW50IiwiaW5kZXgiLCJhbGxMaXN0IiwicmVtb3ZlQ2hpbGQiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkZWxldGVSZWxhdGVkVG9kbyIsImFsbFRvZG8iLCJzcGxpY2UiLCJwYXJzZUludCIsImxpc3QiLCJ1cGRhdGVMaXN0c0FuZFRvZG9zIiwic2hvd1JlbGF0ZWRUb2RvcyIsImRlbGV0ZUVsZW1lbnQiLCJsYXN0RWxlbWVudENoaWxkIiwiY29uc29sZSIsImxvZyIsImxpc3RObyIsInF1ZXJ5U2VsZWN0b3IiLCJtb2RpZnlUb2RvIiwiZGVmYXVsdExpc3QiLCJuZXdMaXN0aW5wdXQiLCJsaXN0Rm9ybSIsIm5ld0xpc3RNb2RhbCIsImFkZFRvZG8iLCJuZXdUb2RvTW9kYWwiLCJ0b2RvRm9ybSIsInRvZG9OYW1lIiwiZGVmYXVsdExpc3RET00iLCJvbmNsaWNrIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uc3VibWl0IiwicHJldmVudERlZmF1bHQiLCJuZXdMaXN0IiwibGlzdE9iamVjdCIsImluc2VydF9iZWZvcmUiLCJhTGlzdCIsImNyZWF0ZUVsZW1lbnQiLCJhZGQiLCJpbnNlcnRCZWZvcmUiLCJsZWZ0IiwiYXBwZW5kQ2hpbGQiLCJyaWdodCIsImljb24xIiwibGlzdFRpdGxlIiwiaWNvbjIiLCJpY29uMyIsImljb240IiwiaWNvbjUiLCJhZGROZXdMaXN0SW50ZXJmYWNlIiwiZ2V0RWxlbWVudEJ5SWQiLCJyZXNldCIsIm9ucmVzZXQiLCJuZXdUb2RvIiwibmV3VG9kb0RPTSIsImFUb2RvIiwiY29sbGFwc2UiLCJjb2xsYXBzZUltZyIsImlucHV0MSIsInRpdGxlVG9kbyIsImFkZE5ld1RvZG9JbnRlcmZhY2UiXSwic291cmNlUm9vdCI6IiJ9